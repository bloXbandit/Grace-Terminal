import{f as te,s as ne,u as re,i as xe,v as Se,m as Ce,d as Ee,b as Xt,c as Jt,e as Nt,g as ze,C as Ae,a as Ie,P as Oe,_ as Te}from"./fullPreview-SZvbgAQr.js";import{e as tt,I as Be,d as rt,h as Q,l as T,p as Rt,F as Ct,D as It,j as bt,t as at,v as lt,r as ot,i as kt,w as pt,a$ as De,B as Gt,b0 as Re,a1 as Kt,a3 as Tt,c as wt,k as Ot,T as me,b1 as ee,y as Le,u as jt,g as qt,a2 as se,o as ie,a6 as Fe,f as Me,a as _e,ab as Pe,a7 as $t,ag as Ue,E as $e,aQ as Ne,b2 as je,aT as Lt,aX as ue,ak as Ft,b3 as We,b4 as Ze,b5 as He,a9 as Ve,af as Dt,n as Ge,M as Ke,z as qe,aY as Ye,aP as Xe,b6 as Je,aW as Qe,aD as de,b7 as tn}from"./index-y24F1-rU.js";import{u as Mt,c as en,a as he,m as nn}from"./edit-DybdI1Gg.js";import{s as rn}from"./default-model-setting-BQE8g2xZ.js";import{P as sn}from"./pricing-DUKkLA7_.js";import{s as an}from"./auth-BN2fB74f.js";import{s as Ht}from"./membership-GkEFab9j.js";import{S as on,W as ln}from"./wechatpay-CgvKqgmN.js";import{e as zt}from"./emitter-E5P-NQ8u.js";import{s as cn}from"./mcp-BxgCf6AX.js";import"./http-D7M9oJmQ.js";import{s as ve,R as un,K as dn,A as hn}from"./KnowledgeModal-fkMmeMe6.js";import"./lemon-BOZR-6gf.js";import"./index-CuH_tq0a.js";import"./marked.esm-BktMfnUh.js";import"./index-TjCxX7sJ.js";var fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M704 446H320c-4.4 0-8 3.6-8 8v402c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8V454c0-4.4-3.6-8-8-8zm-328 64h272v117H376V510zm272 290H376V683h272v117z"}},{tag:"path",attrs:{d:"M424 748a32 32 0 1064 0 32 32 0 10-64 0zm0-178a32 32 0 1064 0 32 32 0 10-64 0z"}},{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}}]},name:"cloud-server",theme:"outlined"};function fe(st){for(var V=1;V<arguments.length;V++){var p=arguments[V]!=null?Object(arguments[V]):{},I=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(I=I.concat(Object.getOwnPropertySymbols(p).filter(function(w){return Object.getOwnPropertyDescriptor(p,w).enumerable}))),I.forEach(function(w){pn(st,w,p[w])})}return st}function pn(st,V,p){return V in st?Object.defineProperty(st,V,{value:p,enumerable:!0,configurable:!0,writable:!0}):st[V]=p,st}var ae=function(V,p){var I=fe({},V,p.attrs);return tt(Be,fe({},I,{icon:fn}),null)};ae.displayName="CloudServerOutlined";ae.inheritAttrs=!1;const mn={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-x text-white",viewBox:"0 0 24 24"};function _n(st,V){return Q(),rt("svg",mn,V[0]||(V[0]=[T("path",{d:"M18 6 6 18M6 6l12 12"},null,-1)]))}const vn={render:_n},gn={style:{overflow:"auto",width:"100%","min-width":"0"}},wn={class:"upload-fileList"},bn={style:{"min-width":"0",width:"100%"}},yn={key:0,style:{display:"flex",width:"100%","align-items":"center"}},kn={class:"file-name"},xn=["onClick"],Sn={key:1,style:{display:"flex",width:"100%","align-items":"center",color:"#34322d"}},Cn={key:2},En={class:"file-size"},zn={__name:"ChatInputFileList",props:{fileList:{type:Array,default:()=>[]},conversation_id:{type:String,default:""}},emits:["update:fileList"],setup(st,{emit:V}){const p=st,I=V,w=o=>{console.log("delete file",o),ne.deleteFile(o.id,p.conversation_id),I("update:fileList",p.fileList.filter(s=>s.id!==o.id))},d=o=>o<1024?`${o} B`:o<1024*1024?`${(o/1024).toFixed(2)} KB`:`${(o/(1024*1024)).toFixed(2)} MB`;return(o,s)=>(Q(),rt("div",gn,[T("div",wn,[(Q(!0),rt(Ct,null,It(st.fileList,(u,_)=>(Q(),rt("div",{class:"upload-fileList-item",key:_},[tt(te,{url:u.name,"is-update":!0,class:"file-icon"},null,8,["url"]),T("div",bn,[u.uploading?(Q(),rt("div",Sn,s[0]||(s[0]=[T("div",{class:"loading-spinner"},null,-1),T("div",{style:{"margin-left":"8px"}},"Uploading...",-1)]))):(Q(),rt("div",yn,[T("div",kn,at(u.name),1),T("div",{class:"delete-button",onClick:f=>w(u)},[tt(lt(vn))],8,xn)])),u.uploading?bt("",!0):(Q(),rt("div",Cn,[T("div",En,at(d(u.size)),1)]))])]))),128))])]))}},An=Rt(zn,[["__scopeId","data-v-dbfd9cdd"]]),In={__name:"ChatInputUpload",props:{fileList:{type:Array,default:()=>[]},conversation_id:{type:String,default:""},isPublic:{type:Boolean,default:!1}},emits:["update:fileList"],setup(st,{emit:V}){const p=st,I=()=>localStorage.getItem("hasShownPublicWarning")==="true",w=f=>{localStorage.setItem("hasShownPublicWarning",f.toString())},d=ot(I()),o=ot(!1),s=V,u=async f=>{if(p.isPublic&&!d.value){if(f.stopPropagation(),await new Promise(m=>{Kt.confirm({title:"Public File Upload Warning",content:"You have selected public mode. The uploaded files will be made public. Please confirm to continue?",okText:"Continue",cancelText:"Cancel",centered:!0,onOk:()=>{d.value=!0,w(!0),m(!0)},onCancel:()=>{m(!1)}})})){const m=f.target.closest(".ant-upload").querySelector('input[type="file"]');m&&m.click()}return}},_=async f=>{f.uid=Date.now()+Math.random();const g={uid:f.uid,name:f.name,size:f.size,uploading:!0,error:!1};s("update:fileList",[...p.fileList,g]);try{const m=new FormData;m.append("conversation_id",p.conversation_id||""),m.append("files",f);let h=(await ne.uploadFile(m))[0];console.log("upload",h);const n=p.fileList.filter(l=>l.uid!==f.uid).concat({name:h.name,size:f.size,url:h.url,id:h.id,workspace_dir:h.workspace_dir,uploading:!1,error:!1});console.log("newFileList",n),s("update:fileList",n)}catch(m){console.log("上传失败，更新对应文件状态",m);const r=p.fileList.map(h=>h.uid===f.uid?{...h,uploading:!1,error:!0}:h);s("update:fileList",r)}return!1};return(f,g)=>{const m=Gt,r=Re;return Q(),kt(r,{"file-list":st.fileList,"before-upload":_,"show-upload-list":!1,disabled:o.value},{default:pt(()=>[tt(m,{type:"text",class:"upload-button",onClick:u},{icon:pt(()=>[tt(lt(De))]),_:1})]),_:1},8,["file-list","disabled"])}}},On=Rt(In,[["__scopeId","data-v-af7b397f"]]),Tn={key:0,class:"selection-preview"},Bn={class:"preview-header"},Dn={class:"preview-title"},Rn={class:"preview-content"},Ln={class:"preview-image-container"},Fn=["src"],Mn={__name:"SelectionPreview",setup(st){const V=re(),{editorMode:p,selectedElement:I,selectedScreenshot:w,showSelectionPreview:d}=Tt(V),o=wt(()=>{var g;if(!I.value)return"";const u=((g=I.value.tagName)==null?void 0:g.toLowerCase())||"",_=I.value.id?`#${I.value.id}`:"",f=I.value.className?`.${I.value.className.split(" ")[0]}`:"";return`${u}${_}${f}`}),s=()=>{V.setShowSelectionPreview(!1)};return(u,_)=>{const f=me,g=Gt;return Q(),kt(Le,{name:"preview-slide"},{default:pt(()=>[lt(d)&&lt(w)&&lt(p)==="ai-edit"?(Q(),rt("div",Tn,[T("div",Bn,[T("div",Dn,[_[0]||(_[0]=T("i",{class:"fas fa-crosshairs"},null,-1)),_[1]||(_[1]=T("span",null,"Selected",-1)),tt(f,{size:"small",color:"blue"},{default:pt(()=>[Ot(at(o.value),1)]),_:1})]),tt(g,{type:"text",size:"small",onClick:s,class:"close-btn"},{default:pt(()=>[tt(lt(ee))]),_:1})]),T("div",Rn,[T("div",Ln,[T("img",{src:lt(w),alt:"Selected element preview",class:"preview-image"},null,8,Fn)])])])):bt("",!0)]),_:1})}}},Pn=Rt(Mn,[["__scopeId","data-v-2d3544a8"]]),Un={key:0,class:"recharge-products"},$n={class:"product-title"},Nn={class:"product-info"},jn={style:{"margin-top":"8px"}},Wn=["loading","onClick"],Zn={key:1},Hn={style:{"text-align":"center",display:"flex","flex-direction":"column","align-items":"center"}},Vn={style:{display:"inline-block"}},Gn={style:{"margin-top":"12px"}},Kn={style:{display:"flex","flex-direction":"column",gap:"16px",padding:"12px 4px"}},qn={class:"payment-content"},Yn={class:"payment-title"},Xn={class:"payment-description"},Jn={class:"payment-content"},Qn={class:"payment-title"},tr={class:"payment-description"},er={__name:"rechargeProducts",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(st,{emit:V}){const{t:p}=jt();qt();const I=se(),{user:w,membership:d,points:o}=Tt(I),s=st,u=V,_=wt({get:()=>s.open,set:O=>u("update:open",O)}),f=ot(!1),g=ot(""),m=ot(!1),r=ot(null),h=ot(null),n=ot(!1),l=wt(()=>"$"),a=ot([]),v=async O=>{m.value=!0,r.value=O};ie(async()=>{await b()});const b=async()=>{let O=await Ht.getRechargeProductList();a.value=O||[]},x=async O=>{if(m.value=!1,n.value=!0,O==="stripe"){let L=await Ht.createStripePointPurchaseOrder(r.value.id);window.location.href=L.url,n.value=!1}else{let L=await Ht.createPointPurchaseOrder(r.value.id);L&&L.code_url?(n.value=!1,g.value=L.code_url,f.value=!0,S(L.order_sn)):n.value=!1,console.log(L)}},S=async O=>{let B=0;h.value=setInterval(async()=>{B++;const W=await Ht.checkOrderStatus(O);(W==null?void 0:W.status)==="paid"&&(clearInterval(h.value),f.value=!1,Me.success(p("member.paymentSuccess")),R(),console.log("支付成功")),B>=20&&(clearInterval(h.value),console.warn("支付超时，请重新下单"))},3e3)},R=()=>{window.location.reload()};return(O,L)=>{const B=Fe,W=Kt;return Q(),kt(W,{open:_.value,"onUpdate:open":L[4]||(L[4]=q=>_.value=q),width:"720px",centered:"",footer:null,title:"Buy add-on credits"},{default:pt(()=>[a.value.length?(Q(),rt("div",Un,[(Q(!0),rt(Ct,null,It(a.value,q=>(Q(),rt("div",{key:q.id,class:"product-card"},[T("div",$n,at(q.product_name),1),T("div",Nn,[T("p",jn,at(l.value)+" "+at(q.amount),1),T("p",null,at(q.points_awarded)+at(lt(p)("member.pointsUnit")),1)]),T("button",{size:"small",loading:n.value,onClick:y=>v(q)},at(lt(p)("member.buyNow")),9,Wn)]))),128))])):(Q(),rt("div",Zn,at(lt(p)("member.noPackagesAvailable")),1)),tt(W,{open:f.value,"onUpdate:open":L[0]||(L[0]=q=>f.value=q),title:lt(p)("member.wechatScanToPay"),centered:"",footer:null},{default:pt(()=>[T("div",Hn,[T("div",Vn,[tt(B,{value:g.value,size:200},null,8,["value"])]),T("p",Gn,at(lt(p)("member.wechatScanPrompt")),1)])]),_:1},8,["open","title"]),tt(W,{open:m.value,"onUpdate:open":L[3]||(L[3]=q=>m.value=q),footer:null,centered:"",width:"480",title:O.$t("member.selectPaymentMethod")},{default:pt(()=>[T("div",Kn,[T("div",{class:"payment-option",onClick:L[1]||(L[1]=q=>x("stripe"))},[tt(lt(on)),T("div",qn,[T("div",Yn,at(O.$t("payment.stripe.title")),1),T("div",Xn,at(O.$t("payment.stripe.description")),1)])]),T("div",{class:"payment-option",onClick:L[2]||(L[2]=q=>x("wechat"))},[tt(lt(ln)),T("div",Jn,[T("div",Qn,at(O.$t("payment.wechat.title")),1),T("div",tr,at(O.$t("payment.wechat.description")),1)])])])]),_:1},8,["open","title"])]),_:1},8,["open"])}}},nr=Rt(er,[["__scopeId","data-v-fe4405c7"]]),rr={class:"chat-input"},sr={class:"input-wrapper"},ir={class:"input-area"},ar={class:"input-container"},or={class:"input-actions"},lr={class:"left-actions"},cr={class:"button-row first-row"},ur={class:"mode-selector-dropdown"},dr={class:"mode-option"},hr={class:"mode-circle"},fr={key:0,class:"mode-inner-circle"},pr={class:"mode-texts"},mr={class:"mode-label"},_r={class:"mode-desc"},vr={class:"mode-name"},gr={class:"mcp-button-container"},wr={class:"modal-header"},br={class:"option-list"},yr=["onClick"],kr={class:"option-info"},xr={class:"option-circle"},Sr={key:0,class:"option-inner-circle"},Cr={class:"option-texts"},Er={class:"option-label"},zr={class:"option-desc"},Ar={class:"modal-header"},Ir={class:"option-list"},Or=["onClick"],Tr={class:"option-info"},Br={class:"option-circle"},Dr={key:0,class:"option-inner-circle"},Rr={class:"option-texts"},Lr={class:"option-label"},Fr={class:"option-desc"},Mr={class:"buy-credits"},Pr={class:"upgrade-des-wrapper"},Ur={key:0,class:"upgrade-des"},$r={key:1,class:"upgrade-des"},Nr={__name:"ChatInput",emits:["send"],setup(st,{emit:V}){const{t:p}=jt();qt();const I=_e(),w=ot("Upgrade required"),d=se(),{user:o,membership:s,points:u}=Tt(d),_=Mt(),{agent:f,chat:g,model_id:m}=Tt(_),r=ot(""),h=ot(p("lemon.welcome.placeholder")),n=ot([]),l=ot("text"),a=ot(!0),v=ot(!1),b=ot(localStorage.getItem("workMode")||"auto"),x=wt(()=>[{value:"auto",label:p("lemon.workMode.auto.label"),description:p("lemon.workMode.auto.description")},{value:"agent",label:p("lemon.workMode.agent.label"),description:p("lemon.workMode.agent.description")},{value:"chat",label:p("lemon.workMode.chat.label"),description:p("lemon.workMode.chat.description")}]),S=ot([]),R=ot([]),O=V,L=[{value:!0,label:"Public",desc:"Anyone can view and remix"},{value:!1,label:"Personal",desc:"Only visible to yourself"}],B=ot(!1),W=ot(""),q=ot(""),y=ot(!1),F=ot(!1),e=ot(!1);wt(()=>!!o.value.id);const U=wt(()=>_.mode),it=wt(()=>I.params.id||null),A=wt(()=>R.value.length===0?["disable"]:R.value),Y=wt(()=>{var i;const c=_.list.find(k=>{var P;return k.conversation_id===((P=_.chat)==null?void 0:P.conversation_id)});return console.log(" chat?.status",c==null?void 0:c.status),console.log(" chatStore.chat?.conversation_id ",(i=_.chat)==null?void 0:i.conversation_id),(c==null?void 0:c.status)!="running"}),$=()=>{y.value=window.innerWidth<=768},K=()=>{F.value=!0},z=()=>{const c=document.querySelector(".mobile-mode-selector");c&&c.classList.add("closing"),setTimeout(()=>{F.value=!1},250)},C=()=>{const c=document.querySelector(".mobile-visibility-selector");c&&c.classList.add("closing"),setTimeout(()=>{e.value=!1},250)},J=c=>{_t(c),z()},G=c=>{mt(c),C()};ie(async()=>{await xt(),await j(),$(),window.addEventListener("resize",$),zt.on("changeMessageText",c=>{r.value=c}),zt.on("showUpgrade",()=>{w.value="",W.value="You don't have enough credits, and the prediction can't complete the task. ",q.value="Please upgrade or purchase more credits.",B.value=!0})}),Pe(()=>{window.removeEventListener("resize",$)}),$t(()=>I.params.agentId,()=>{console.log("agent.value 改变",f.value),f.value&&(R.value=f.value.mcp_server_ids||[])});const j=async()=>{const c=await cn.activate_servers();Array.isArray(c)&&(S.value=c),f.value&&(R.value=f.value.mcp_server_ids||[])},ht=({key:c})=>{if(c==="disable")R.value=[];else{const i=R.value.indexOf(c);i!==-1?R.value.splice(i,1):R.value.push(c)}localStorage.setItem("selectedMcpServerIds",JSON.stringify(R.value)),f.value&&(f.value.mcp_server_ids=R.value,gt())},gt=async()=>{f.value&&(await ve.update(f.value.id,f.value.name,f.value.describe,f.value.mcp_server_ids,f.value.is_public),zt.emit("updateAgentList"))},ut=()=>{zt.emit("openComputerPreview")},dt=()=>{B.value=!1},_t=c=>{b.value=c,console.log("工作模式切换为:",c),localStorage.setItem("workMode",c)},mt=c=>{var i;if(console.log("handleVisibilityChange",c),!c&&!((i=s.value)!=null&&i.planName)){a.value=!0,w.value="Upgrade required",W.value="",B.value=!0;return}f.value.is_public=c,gt()};$t(()=>f.value,c=>{var i;f.value&&f.value.is_public!==void 0?a.value=(i=f.value)==null?void 0:i.is_public:a.value=!0},{immediate:!0}),window.addEventListener("message",c=>{if(c.origin!=="https://lemonai.ai")return;const{type:i,payload:k}=c.data;console.log("监听 message 事件",c.data),i==="transferData"&&(_.mode="task",r.value=k,t())});const yt=ot([]),xt=async()=>{console.log("membership.value",s.value);const c=k=>{if(k.length>0&&!m.value){const P=k[0].id*1;m.value=P}},i=localStorage.getItem("modelList");if(i)try{yt.value=JSON.parse(i),c(yt.value)}catch(k){console.error("Failed to parse cached modelList",k)}try{const k=await rn.getModels();Array.isArray(k)&&(yt.value=k,localStorage.setItem("modelList",JSON.stringify(k)),c(k))}catch(k){console.error("Failed to fetch models from API",k)}},t=()=>{const c=r.value.trim();if(!c&&n.value.length===0)return;console.log("selectedModelValue.value",m.value);let k=JSON.parse(localStorage.getItem("modelList")).find(P=>P.id===m.value);if(console.log("modelDetail",k),u.value.total<=100&&k.is_subscribe){W.value="You don't have enough credits to use this subscription model. ",q.value="Please subscribe or purchase more credits to continue.",w.value="",B.value=!0;return}O("send",{text:c,mode:l.value,files:n.value,mcp_server_ids:R.value,is_public:a.value,workMode:b.value}),r.value="",n.value=[]},M=()=>{_.handleStop()},D=c=>{c.shiftKey&&c.key==="Enter"||c.isComposing||c.key==="Enter"&&(c.preventDefault(),t())};return(c,i)=>{var ct;const k=Ue,P=$e,N=Gt,E=Ze,Z=He,X=We,H=je,et=me,ft=Kt;return Q(),rt(Ct,null,[T("div",rr,[tt(Pn),T("div",sr,[T("div",ir,[tt(An,{fileList:n.value,"onUpdate:fileList":i[0]||(i[0]=nt=>n.value=nt),conversation_id:it.value,"onUpdate:conversation_id":i[1]||(i[1]=nt=>it.value=nt)},null,8,["fileList","conversation_id"]),T("div",ar,[tt(k,{class:"input-textarea",value:r.value,"onUpdate:value":i[2]||(i[2]=nt=>r.value=nt),placeholder:h.value,"auto-size":{minRows:2,maxRows:8},onKeydown:D},null,8,["value","placeholder"]),T("div",or,[T("div",lr,[T("div",cr,[U.value==="task"?(Q(),kt(On,{key:0,fileList:n.value,"onUpdate:fileList":i[3]||(i[3]=nt=>n.value=nt),conversation_id:it.value,"onUpdate:conversation_id":i[4]||(i[4]=nt=>it.value=nt),isPublic:a.value},null,8,["fileList","conversation_id","isPublic"])):bt("",!0),i[15]||(i[15]=T("div",{class:"model-locked"},[T("span",{class:"model-locked-text"},"GPT-5")],-1)),T("div",ur,[y.value?(Q(),rt("div",{key:1,class:"mobile-mode-trigger",onClick:K},[T("span",vr,at(((ct=x.value.find(nt=>nt.value===b.value))==null?void 0:ct.label)||"Auto"),1),tt(lt(Ne),{class:"dropdown-icon"})])):(Q(),kt(P,{key:0,value:b.value,"onUpdate:value":i[5]||(i[5]=nt=>b.value=nt),class:"mode-select-dropdown",options:x.value,onChange:_t,dropdownMatchSelectWidth:!1,bordered:!1},{option:pt(({value:nt,label:At,description:Et})=>[T("div",dr,[T("span",hr,[b.value===nt?(Q(),rt("span",fr)):bt("",!0)]),T("div",pr,[T("div",mr,at(At),1),T("div",_r,at(Et),1)])])]),_:1},8,["value","options"]))]),T("div",gr,[tt(H,{trigger:["click"],placement:"top",class:"mcp-dropdown"},{overlay:pt(()=>[tt(X,{selectedKeys:A.value,multiple:"",class:"mcp-server-menu",onClick:ht},{default:pt(()=>[tt(E,{key:"disable"},{default:pt(()=>i[12]||(i[12]=[T("span",null,"Close MCP",-1)])),_:1}),tt(Z),(Q(!0),rt(Ct,null,It(S.value,nt=>(Q(),kt(E,{key:nt.id,class:"mcp-server-item"},{default:pt(()=>[T("span",null,at(nt.name),1),R.value&&R.value.includes(nt.id)?(Q(),kt(lt(Ve),{key:0,class:"check-icon"})):bt("",!0)]),_:2},1024))),128))]),_:1},8,["selectedKeys"])]),default:pt(()=>[tt(N,{class:Ft(["mcp-button",{"mcp-button-active":R.value&&R.value.length>0}])},{icon:pt(()=>[tt(lt(ae))]),default:pt(()=>[i[11]||(i[11]=Ot(" MCP "))]),_:1},8,["class"])]),_:1}),tt(N,{class:"computer-button",onClick:ut},{icon:pt(()=>i[13]||(i[13]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[T("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),T("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),T("line",{x1:"12",y1:"17",x2:"12",y2:"21"})],-1)])),default:pt(()=>[i[14]||(i[14]=Ot(" Computer "))]),_:1})])])]),Y.value?(Q(),kt(N,{key:0,onClick:t,class:"send-button",disabled:!r.value},{icon:pt(()=>i[16]||(i[16]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 16 16",fill:"#fff"},[T("path",{d:"M7.91699 15.0642C7.53125 15.0642 7.22119 14.9397 6.98682 14.6907C6.75244 14.4465 6.63525 14.1218 6.63525 13.7166V6.39966L6.77441 3.34546L7.48486 3.89478L5.62451 6.12134L3.99121 7.76196C3.87402 7.87915 3.73975 7.97681 3.58838 8.05493C3.44189 8.13306 3.271 8.17212 3.07568 8.17212C2.73389 8.17212 2.4458 8.05981 2.21143 7.83521C1.98193 7.60571 1.86719 7.3103 1.86719 6.94897C1.86719 6.60229 1.99902 6.29712 2.2627 6.03345L6.97949 1.30933C7.0918 1.19214 7.2334 1.10181 7.4043 1.03833C7.5752 0.969971 7.74609 0.935791 7.91699 0.935791C8.08789 0.935791 8.25879 0.969971 8.42969 1.03833C8.60059 1.10181 8.74463 1.19214 8.86182 1.30933L13.5786 6.03345C13.8423 6.29712 13.9741 6.60229 13.9741 6.94897C13.9741 7.3103 13.8569 7.60571 13.6226 7.83521C13.3931 8.05981 13.1074 8.17212 12.7656 8.17212C12.5703 8.17212 12.397 8.13306 12.2456 8.05493C12.0991 7.97681 11.9673 7.87915 11.8501 7.76196L10.2095 6.12134L8.34912 3.89478L9.05957 3.34546L9.19141 6.39966V13.7166C9.19141 14.1218 9.07422 14.4465 8.83984 14.6907C8.60547 14.9397 8.29785 15.0642 7.91699 15.0642Z",fill:"var(--icon-onblack)"})],-1)])),_:1},8,["disabled"])):(Q(),rt("button",{key:1,class:"stop-button",onClick:M},i[17]||(i[17]=[T("div",null,null,-1)])))])])])])]),(Q(),kt(ue,{to:"body"},[F.value?(Q(),rt("div",{key:0,class:"mobile-modal-overlay",onClick:z},[T("div",{class:"mobile-mode-selector",onClick:i[6]||(i[6]=Lt(()=>{},["stop"]))},[T("div",wr,[T("h3",null,at(lt(p)("lemon.workMode.title")),1),tt(N,{type:"text",onClick:z,class:"close-btn"},{default:pt(()=>[tt(lt(ee))]),_:1})]),T("div",br,[(Q(!0),rt(Ct,null,It(x.value,nt=>(Q(),rt("div",{key:nt.value,class:Ft(["option-item",{selected:nt.value===b.value}]),onClick:At=>J(nt.value)},[T("div",kr,[T("span",xr,[b.value===nt.value?(Q(),rt("span",Sr)):bt("",!0)]),T("div",Cr,[T("div",Er,at(nt.label),1),T("div",zr,at(nt.description),1)])])],10,yr))),128))])])])):bt("",!0)])),(Q(),kt(ue,{to:"body"},[e.value?(Q(),rt("div",{key:0,class:"mobile-modal-overlay",onClick:C},[T("div",{class:"mobile-visibility-selector",onClick:i[7]||(i[7]=Lt(()=>{},["stop"]))},[T("div",Ar,[i[18]||(i[18]=T("h3",null,"Visibility",-1)),tt(N,{type:"text",onClick:C,class:"close-btn"},{default:pt(()=>[tt(lt(ee))]),_:1})]),T("div",Ir,[(Q(),rt(Ct,null,It(L,nt=>T("div",{key:nt.value,class:Ft(["option-item",{selected:nt.value===a.value}]),onClick:At=>G(nt.value)},[T("div",Tr,[T("span",Br,[a.value===nt.value?(Q(),rt("span",Dr)):bt("",!0)]),T("div",Rr,[T("div",Lr,[Ot(at(nt.label)+" ",1),nt.value?bt("",!0):(Q(),kt(et,{key:0,size:"small",class:"pro-tag-mobile"},{default:pt(()=>i[19]||(i[19]=[Ot("Pro+")])),_:1}))]),T("div",Fr,at(nt.desc),1)])])],10,Or)),64))])])])):bt("",!0)])),tt(ft,{open:B.value,"onUpdate:open":i[9]||(i[9]=nt=>B.value=nt),title:w.value,centered:"",width:"1200px",footer:null,onCancel:dt},{default:pt(()=>{var nt;return[T("div",Mr,[T("div",Pr,[W.value?(Q(),rt("span",Ur,at(W.value),1)):bt("",!0),q.value?(Q(),rt("span",$r,at(q.value),1)):bt("",!0)]),(nt=lt(s))!=null&&nt.planName?(Q(),kt(N,{key:0,type:"primary",onClick:i[8]||(i[8]=At=>v.value=!0)},{default:pt(()=>i[20]||(i[20]=[Ot("Buy credits")])),_:1})):bt("",!0)]),tt(sn,{isWindow:"true",showTitle:"false",onClose_window:dt})]}),_:1},8,["open","title"]),tt(nr,{open:v.value,"onUpdate:open":i[10]||(i[10]=nt=>v.value=nt)},null,8,["open"])],64)}}},oe=Rt(Nr,[["__scopeId","data-v-5c211fe0"]]),jr={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-arrow-down text-[var(--icon-primary)]",viewBox:"0 0 24 24"};function Wr(st,V){return Q(),rt("svg",jr,V[0]||(V[0]=[T("path",{d:"M12 5v14M19 12l-7 7-7-7"},null,-1)]))}const Zr={render:Wr};function Vt(st){throw new Error('Could not dynamically require "'+st+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ge={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(st,V){(function(p){st.exports=p()})(function(){return function p(I,w,d){function o(_,f){if(!w[_]){if(!I[_]){var g=typeof Vt=="function"&&Vt;if(!f&&g)return g(_,!0);if(s)return s(_,!0);var m=new Error("Cannot find module '"+_+"'");throw m.code="MODULE_NOT_FOUND",m}var r=w[_]={exports:{}};I[_][0].call(r.exports,function(h){var n=I[_][1][h];return o(n||h)},r,r.exports,p,I,w,d)}return w[_].exports}for(var s=typeof Vt=="function"&&Vt,u=0;u<d.length;u++)o(d[u]);return o}({1:[function(p,I,w){var d=p("./utils"),o=p("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";w.encode=function(u){for(var _,f,g,m,r,h,n,l=[],a=0,v=u.length,b=v,x=d.getTypeOf(u)!=="string";a<u.length;)b=v-a,g=x?(_=u[a++],f=a<v?u[a++]:0,a<v?u[a++]:0):(_=u.charCodeAt(a++),f=a<v?u.charCodeAt(a++):0,a<v?u.charCodeAt(a++):0),m=_>>2,r=(3&_)<<4|f>>4,h=1<b?(15&f)<<2|g>>6:64,n=2<b?63&g:64,l.push(s.charAt(m)+s.charAt(r)+s.charAt(h)+s.charAt(n));return l.join("")},w.decode=function(u){var _,f,g,m,r,h,n=0,l=0,a="data:";if(u.substr(0,a.length)===a)throw new Error("Invalid base64 input, it looks like a data url.");var v,b=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&b--,u.charAt(u.length-2)===s.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|b):new Array(0|b);n<u.length;)_=s.indexOf(u.charAt(n++))<<2|(m=s.indexOf(u.charAt(n++)))>>4,f=(15&m)<<4|(r=s.indexOf(u.charAt(n++)))>>2,g=(3&r)<<6|(h=s.indexOf(u.charAt(n++))),v[l++]=_,r!==64&&(v[l++]=f),h!==64&&(v[l++]=g);return v}},{"./support":30,"./utils":32}],2:[function(p,I,w){var d=p("./external"),o=p("./stream/DataWorker"),s=p("./stream/Crc32Probe"),u=p("./stream/DataLengthProbe");function _(f,g,m,r,h){this.compressedSize=f,this.uncompressedSize=g,this.crc32=m,this.compression=r,this.compressedContent=h}_.prototype={getContentWorker:function(){var f=new o(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),g=this;return f.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(f,g,m){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(g.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",g)},I.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(p,I,w){var d=p("./stream/GenericWorker");w.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},w.DEFLATE=p("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(p,I,w){var d=p("./utils"),o=function(){for(var s,u=[],_=0;_<256;_++){s=_;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[_]=s}return u}();I.exports=function(s,u){return s!==void 0&&s.length?d.getTypeOf(s)!=="string"?function(_,f,g,m){var r=o,h=m+g;_^=-1;for(var n=m;n<h;n++)_=_>>>8^r[255&(_^f[n])];return-1^_}(0|u,s,s.length,0):function(_,f,g,m){var r=o,h=m+g;_^=-1;for(var n=m;n<h;n++)_=_>>>8^r[255&(_^f.charCodeAt(n))];return-1^_}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(p,I,w){w.base64=!1,w.binary=!1,w.dir=!1,w.createFolders=!0,w.date=null,w.compression=null,w.compressionOptions=null,w.comment=null,w.unixPermissions=null,w.dosPermissions=null},{}],6:[function(p,I,w){var d=null;d=typeof Promise<"u"?Promise:p("lie"),I.exports={Promise:d}},{lie:37}],7:[function(p,I,w){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=p("pako"),s=p("./utils"),u=p("./stream/GenericWorker"),_=d?"uint8array":"array";function f(g,m){u.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=m,this.meta={}}w.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(_,g.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(m){g.push({data:m,meta:g.meta})}},w.compressWorker=function(g){return new f("Deflate",g)},w.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(p,I,w){function d(r,h){var n,l="";for(n=0;n<h;n++)l+=String.fromCharCode(255&r),r>>>=8;return l}function o(r,h,n,l,a,v){var b,x,S=r.file,R=r.compression,O=v!==_.utf8encode,L=s.transformTo("string",v(S.name)),B=s.transformTo("string",_.utf8encode(S.name)),W=S.comment,q=s.transformTo("string",v(W)),y=s.transformTo("string",_.utf8encode(W)),F=B.length!==S.name.length,e=y.length!==W.length,U="",it="",A="",Y=S.dir,$=S.date,K={crc32:0,compressedSize:0,uncompressedSize:0};h&&!n||(K.crc32=r.crc32,K.compressedSize=r.compressedSize,K.uncompressedSize=r.uncompressedSize);var z=0;h&&(z|=8),O||!F&&!e||(z|=2048);var C=0,J=0;Y&&(C|=16),a==="UNIX"?(J=798,C|=function(j,ht){var gt=j;return j||(gt=ht?16893:33204),(65535&gt)<<16}(S.unixPermissions,Y)):(J=20,C|=function(j){return 63&(j||0)}(S.dosPermissions)),b=$.getUTCHours(),b<<=6,b|=$.getUTCMinutes(),b<<=5,b|=$.getUTCSeconds()/2,x=$.getUTCFullYear()-1980,x<<=4,x|=$.getUTCMonth()+1,x<<=5,x|=$.getUTCDate(),F&&(it=d(1,1)+d(f(L),4)+B,U+="up"+d(it.length,2)+it),e&&(A=d(1,1)+d(f(q),4)+y,U+="uc"+d(A.length,2)+A);var G="";return G+=`
\0`,G+=d(z,2),G+=R.magic,G+=d(b,2),G+=d(x,2),G+=d(K.crc32,4),G+=d(K.compressedSize,4),G+=d(K.uncompressedSize,4),G+=d(L.length,2),G+=d(U.length,2),{fileRecord:g.LOCAL_FILE_HEADER+G+L+U,dirRecord:g.CENTRAL_FILE_HEADER+d(J,2)+G+d(q.length,2)+"\0\0\0\0"+d(C,4)+d(l,4)+L+U+q}}var s=p("../utils"),u=p("../stream/GenericWorker"),_=p("../utf8"),f=p("../crc32"),g=p("../signature");function m(r,h,n,l){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=h,this.zipPlatform=n,this.encodeFileName=l,this.streamFiles=r,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,u),m.prototype.push=function(r){var h=r.meta.percent||0,n=this.entriesCount,l=this._sources.length;this.accumulate?this.contentBuffer.push(r):(this.bytesWritten+=r.data.length,u.prototype.push.call(this,{data:r.data,meta:{currentFile:this.currentFile,percent:n?(h+100*(n-l-1))/n:100}}))},m.prototype.openedSource=function(r){this.currentSourceOffset=this.bytesWritten,this.currentFile=r.file.name;var h=this.streamFiles&&!r.file.dir;if(h){var n=o(r,h,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(r){this.accumulate=!1;var h=this.streamFiles&&!r.file.dir,n=o(r,h,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),h)this.push({data:function(l){return g.DATA_DESCRIPTOR+d(l.crc32,4)+d(l.compressedSize,4)+d(l.uncompressedSize,4)}(r),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var r=this.bytesWritten,h=0;h<this.dirRecords.length;h++)this.push({data:this.dirRecords[h],meta:{percent:100}});var n=this.bytesWritten-r,l=function(a,v,b,x,S){var R=s.transformTo("string",S(x));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(a,2)+d(a,2)+d(v,4)+d(b,4)+d(R.length,2)+R}(this.dirRecords.length,n,r,this.zipComment,this.encodeFileName);this.push({data:l,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(r){this._sources.push(r);var h=this;return r.on("data",function(n){h.processChunk(n)}),r.on("end",function(){h.closedSource(h.previous.streamInfo),h._sources.length?h.prepareNextSource():h.end()}),r.on("error",function(n){h.error(n)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(r){var h=this._sources;if(!u.prototype.error.call(this,r))return!1;for(var n=0;n<h.length;n++)try{h[n].error(r)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var r=this._sources,h=0;h<r.length;h++)r[h].lock()},I.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(p,I,w){var d=p("../compressions"),o=p("./ZipFileWorker");w.generateWorker=function(s,u,_){var f=new o(u.streamFiles,_,u.platform,u.encodeFileName),g=0;try{s.forEach(function(m,r){g++;var h=function(v,b){var x=v||b,S=d[x];if(!S)throw new Error(x+" is not a valid compression method !");return S}(r.options.compression,u.compression),n=r.options.compressionOptions||u.compressionOptions||{},l=r.dir,a=r.date;r._compressWorker(h,n).withStreamInfo("file",{name:m,dir:l,date:a,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(f)}),f.entriesCount=g}catch(m){f.error(m)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(p,I,w){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new d;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(d.prototype=p("./object")).loadAsync=p("./load"),d.support=p("./support"),d.defaults=p("./defaults"),d.version="3.10.1",d.loadAsync=function(o,s){return new d().loadAsync(o,s)},d.external=p("./external"),I.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(p,I,w){var d=p("./utils"),o=p("./external"),s=p("./utf8"),u=p("./zipEntries"),_=p("./stream/Crc32Probe"),f=p("./nodejsUtils");function g(m){return new o.Promise(function(r,h){var n=m.decompressed.getContentWorker().pipe(new _);n.on("error",function(l){h(l)}).on("end",function(){n.streamInfo.crc32!==m.decompressed.crc32?h(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}I.exports=function(m,r){var h=this;return r=d.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",m,!0,r.optimizedBinaryString,r.base64).then(function(n){var l=new u(r);return l.load(n),l}).then(function(n){var l=[o.Promise.resolve(n)],a=n.files;if(r.checkCRC32)for(var v=0;v<a.length;v++)l.push(g(a[v]));return o.Promise.all(l)}).then(function(n){for(var l=n.shift(),a=l.files,v=0;v<a.length;v++){var b=a[v],x=b.fileNameStr,S=d.resolve(b.fileNameStr);h.file(S,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:r.createFolders}),b.dir||(h.file(S).unsafeOriginalName=x)}return l.zipComment.length&&(h.comment=l.zipComment),h})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(p,I,w){var d=p("../utils"),o=p("../stream/GenericWorker");function s(u,_){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(_)}d.inherits(s,o),s.prototype._bindStream=function(u){var _=this;(this._stream=u).pause(),u.on("data",function(f){_.push({data:f,meta:{percent:0}})}).on("error",function(f){_.isPaused?this.generatedError=f:_.error(f)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},I.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(p,I,w){var d=p("readable-stream").Readable;function o(s,u,_){d.call(this,u),this._helper=s;var f=this;s.on("data",function(g,m){f.push(g)||f._helper.pause(),_&&_(m)}).on("error",function(g){f.emit("error",g)}).on("end",function(){f.push(null)})}p("../utils").inherits(o,d),o.prototype._read=function(){this._helper.resume()},I.exports=o},{"../utils":32,"readable-stream":16}],14:[function(p,I,w){I.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,o);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,o)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var o=new Buffer(d);return o.fill(0),o},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(p,I,w){function d(S,R,O){var L,B=s.getTypeOf(R),W=s.extend(O||{},f);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(S=a(S)),W.createFolders&&(L=l(S))&&v.call(this,L,!0);var q=B==="string"&&W.binary===!1&&W.base64===!1;O&&O.binary!==void 0||(W.binary=!q),(R instanceof g&&R.uncompressedSize===0||W.dir||!R||R.length===0)&&(W.base64=!1,W.binary=!0,R="",W.compression="STORE",B="string");var y=null;y=R instanceof g||R instanceof u?R:h.isNode&&h.isStream(R)?new n(S,R):s.prepareContent(S,R,W.binary,W.optimizedBinaryString,W.base64);var F=new m(S,y,W);this.files[S]=F}var o=p("./utf8"),s=p("./utils"),u=p("./stream/GenericWorker"),_=p("./stream/StreamHelper"),f=p("./defaults"),g=p("./compressedObject"),m=p("./zipObject"),r=p("./generate"),h=p("./nodejsUtils"),n=p("./nodejs/NodejsStreamInputAdapter"),l=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var R=S.lastIndexOf("/");return 0<R?S.substring(0,R):""},a=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},v=function(S,R){return R=R!==void 0?R:f.createFolders,S=a(S),this.files[S]||d.call(this,S,null,{dir:!0,createFolders:R}),this.files[S]};function b(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var R,O,L;for(R in this.files)L=this.files[R],(O=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&S(O,L)},filter:function(S){var R=[];return this.forEach(function(O,L){S(O,L)&&R.push(L)}),R},file:function(S,R,O){if(arguments.length!==1)return S=this.root+S,d.call(this,S,R,O),this;if(b(S)){var L=S;return this.filter(function(W,q){return!q.dir&&L.test(W)})}var B=this.files[this.root+S];return B&&!B.dir?B:null},folder:function(S){if(!S)return this;if(b(S))return this.filter(function(B,W){return W.dir&&S.test(B)});var R=this.root+S,O=v.call(this,R),L=this.clone();return L.root=O.name,L},remove:function(S){S=this.root+S;var R=this.files[S];if(R||(S.slice(-1)!=="/"&&(S+="/"),R=this.files[S]),R&&!R.dir)delete this.files[S];else for(var O=this.filter(function(B,W){return W.name.slice(0,S.length)===S}),L=0;L<O.length;L++)delete this.files[O[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var R,O={};try{if((O=s.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");s.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var L=O.comment||this.comment||"";R=r.generateWorker(this,O,L)}catch(B){(R=new u("error")).error(B)}return new _(R,O.type||"string",O.mimeType)},generateAsync:function(S,R){return this.generateInternalStream(S).accumulate(R)},generateNodeStream:function(S,R){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(R)}};I.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(p,I,w){I.exports=p("stream")},{stream:void 0}],17:[function(p,I,w){var d=p("./DataReader");function o(s){d.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}p("../utils").inherits(o,d),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),_=s.charCodeAt(1),f=s.charCodeAt(2),g=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===_&&this.data[m+2]===f&&this.data[m+3]===g)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),_=s.charCodeAt(1),f=s.charCodeAt(2),g=s.charCodeAt(3),m=this.readData(4);return u===m[0]&&_===m[1]&&f===m[2]&&g===m[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},I.exports=o},{"../utils":32,"./DataReader":18}],18:[function(p,I,w){var d=p("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,_=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)_=(_<<8)+this.byteAt(u);return this.index+=s,_},readString:function(s){return d.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},I.exports=o},{"../utils":32}],19:[function(p,I,w){var d=p("./Uint8ArrayReader");function o(s){d.call(this,s)}p("../utils").inherits(o,d),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},I.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(p,I,w){var d=p("./DataReader");function o(s){d.call(this,s)}p("../utils").inherits(o,d),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},I.exports=o},{"../utils":32,"./DataReader":18}],21:[function(p,I,w){var d=p("./ArrayReader");function o(s){d.call(this,s)}p("../utils").inherits(o,d),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},I.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(p,I,w){var d=p("../utils"),o=p("../support"),s=p("./ArrayReader"),u=p("./StringReader"),_=p("./NodeBufferReader"),f=p("./Uint8ArrayReader");I.exports=function(g){var m=d.getTypeOf(g);return d.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new _(g):o.uint8array?new f(d.transformTo("uint8array",g)):new s(d.transformTo("array",g)):new u(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(p,I,w){w.LOCAL_FILE_HEADER="PK",w.CENTRAL_FILE_HEADER="PK",w.CENTRAL_DIRECTORY_END="PK",w.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",w.ZIP64_CENTRAL_DIRECTORY_END="PK",w.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(p,I,w){var d=p("./GenericWorker"),o=p("../utils");function s(u){d.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,d),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},I.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(p,I,w){var d=p("./GenericWorker"),o=p("../crc32");function s(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}p("../utils").inherits(s,d),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},I.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(p,I,w){var d=p("../utils"),o=p("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}d.inherits(s,o),s.prototype.processChunk=function(u){if(u){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+u.data.length}o.prototype.processChunk.call(this,u)},I.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(p,I,w){var d=p("../utils"),o=p("./GenericWorker");function s(u){o.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){_.dataIsReady=!0,_.data=f,_.max=f&&f.length||0,_.type=d.getTypeOf(f),_.isPaused||_._tickAndRepeat()},function(f){_.error(f)})}d.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,_);break;case"uint8array":u=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":u=this.data.slice(this.index,_)}return this.index=_,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},I.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(p,I,w){function d(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},I.exports=d},{}],29:[function(p,I,w){var d=p("../utils"),o=p("./ConvertWorker"),s=p("./GenericWorker"),u=p("../base64"),_=p("../support"),f=p("../external"),g=null;if(_.nodestream)try{g=p("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(h,n){return new f.Promise(function(l,a){var v=[],b=h._internalType,x=h._outputType,S=h._mimeType;h.on("data",function(R,O){v.push(R),n&&n(O)}).on("error",function(R){v=[],a(R)}).on("end",function(){try{var R=function(O,L,B){switch(O){case"blob":return d.newBlob(d.transformTo("arraybuffer",L),B);case"base64":return u.encode(L);default:return d.transformTo(O,L)}}(x,function(O,L){var B,W=0,q=null,y=0;for(B=0;B<L.length;B++)y+=L[B].length;switch(O){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(q=new Uint8Array(y),B=0;B<L.length;B++)q.set(L[B],W),W+=L[B].length;return q;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+O+"'")}}(b,v),S);l(R)}catch(O){a(O)}v=[]}).resume()})}function r(h,n,l){var a=n;switch(n){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=n,this._mimeType=l,d.checkSupport(a),this._worker=h.pipe(new o(a)),h.lock()}catch(v){this._worker=new s("error"),this._worker.error(v)}}r.prototype={accumulate:function(h){return m(this,h)},on:function(h,n){var l=this;return h==="data"?this._worker.on(h,function(a){n.call(l,a.data,a.meta)}):this._worker.on(h,function(){d.delay(n,arguments,l)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(h){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},h)}},I.exports=r},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(p,I,w){if(w.base64=!0,w.array=!0,w.string=!0,w.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",w.nodebuffer=typeof Buffer<"u",w.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")w.blob=!1;else{var d=new ArrayBuffer(0);try{w.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(d),w.blob=o.getBlob("application/zip").size===0}catch{w.blob=!1}}}try{w.nodestream=!!p("readable-stream").Readable}catch{w.nodestream=!1}},{"readable-stream":16}],31:[function(p,I,w){for(var d=p("./utils"),o=p("./support"),s=p("./nodejsUtils"),u=p("./stream/GenericWorker"),_=new Array(256),f=0;f<256;f++)_[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;_[254]=_[254]=1;function g(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}w.utf8encode=function(r){return o.nodebuffer?s.newBufferFrom(r,"utf-8"):function(h){var n,l,a,v,b,x=h.length,S=0;for(v=0;v<x;v++)(64512&(l=h.charCodeAt(v)))==55296&&v+1<x&&(64512&(a=h.charCodeAt(v+1)))==56320&&(l=65536+(l-55296<<10)+(a-56320),v++),S+=l<128?1:l<2048?2:l<65536?3:4;for(n=o.uint8array?new Uint8Array(S):new Array(S),v=b=0;b<S;v++)(64512&(l=h.charCodeAt(v)))==55296&&v+1<x&&(64512&(a=h.charCodeAt(v+1)))==56320&&(l=65536+(l-55296<<10)+(a-56320),v++),l<128?n[b++]=l:(l<2048?n[b++]=192|l>>>6:(l<65536?n[b++]=224|l>>>12:(n[b++]=240|l>>>18,n[b++]=128|l>>>12&63),n[b++]=128|l>>>6&63),n[b++]=128|63&l);return n}(r)},w.utf8decode=function(r){return o.nodebuffer?d.transformTo("nodebuffer",r).toString("utf-8"):function(h){var n,l,a,v,b=h.length,x=new Array(2*b);for(n=l=0;n<b;)if((a=h[n++])<128)x[l++]=a;else if(4<(v=_[a]))x[l++]=65533,n+=v-1;else{for(a&=v===2?31:v===3?15:7;1<v&&n<b;)a=a<<6|63&h[n++],v--;1<v?x[l++]=65533:a<65536?x[l++]=a:(a-=65536,x[l++]=55296|a>>10&1023,x[l++]=56320|1023&a)}return x.length!==l&&(x.subarray?x=x.subarray(0,l):x.length=l),d.applyFromCharCode(x)}(r=d.transformTo(o.uint8array?"uint8array":"array",r))},d.inherits(g,u),g.prototype.processChunk=function(r){var h=d.transformTo(o.uint8array?"uint8array":"array",r.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var n=h;(h=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),h.set(n,this.leftOver.length)}else h=this.leftOver.concat(h);this.leftOver=null}var l=function(v,b){var x;for((b=b||v.length)>v.length&&(b=v.length),x=b-1;0<=x&&(192&v[x])==128;)x--;return x<0||x===0?b:x+_[v[x]]>b?x:b}(h),a=h;l!==h.length&&(o.uint8array?(a=h.subarray(0,l),this.leftOver=h.subarray(l,h.length)):(a=h.slice(0,l),this.leftOver=h.slice(l,h.length))),this.push({data:w.utf8decode(a),meta:r.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:w.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},w.Utf8DecodeWorker=g,d.inherits(m,u),m.prototype.processChunk=function(r){this.push({data:w.utf8encode(r.data),meta:r.meta})},w.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(p,I,w){var d=p("./support"),o=p("./base64"),s=p("./nodejsUtils"),u=p("./external");function _(n){return n}function f(n,l){for(var a=0;a<n.length;++a)l[a]=255&n.charCodeAt(a);return l}p("setimmediate"),w.newBlob=function(n,l){w.checkSupport("blob");try{return new Blob([n],{type:l})}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(n),a.getBlob(l)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(n,l,a){var v=[],b=0,x=n.length;if(x<=a)return String.fromCharCode.apply(null,n);for(;b<x;)l==="array"||l==="nodebuffer"?v.push(String.fromCharCode.apply(null,n.slice(b,Math.min(b+a,x)))):v.push(String.fromCharCode.apply(null,n.subarray(b,Math.min(b+a,x)))),b+=a;return v.join("")},stringifyByChar:function(n){for(var l="",a=0;a<n.length;a++)l+=String.fromCharCode(n[a]);return l},applyCanBeUsed:{uint8array:function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function m(n){var l=65536,a=w.getTypeOf(n),v=!0;if(a==="uint8array"?v=g.applyCanBeUsed.uint8array:a==="nodebuffer"&&(v=g.applyCanBeUsed.nodebuffer),v)for(;1<l;)try{return g.stringifyByChunk(n,a,l)}catch{l=Math.floor(l/2)}return g.stringifyByChar(n)}function r(n,l){for(var a=0;a<n.length;a++)l[a]=n[a];return l}w.applyFromCharCode=m;var h={};h.string={string:_,array:function(n){return f(n,new Array(n.length))},arraybuffer:function(n){return h.string.uint8array(n).buffer},uint8array:function(n){return f(n,new Uint8Array(n.length))},nodebuffer:function(n){return f(n,s.allocBuffer(n.length))}},h.array={string:m,array:_,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return s.newBufferFrom(n)}},h.arraybuffer={string:function(n){return m(new Uint8Array(n))},array:function(n){return r(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:_,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return s.newBufferFrom(new Uint8Array(n))}},h.uint8array={string:m,array:function(n){return r(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:_,nodebuffer:function(n){return s.newBufferFrom(n)}},h.nodebuffer={string:m,array:function(n){return r(n,new Array(n.length))},arraybuffer:function(n){return h.nodebuffer.uint8array(n).buffer},uint8array:function(n){return r(n,new Uint8Array(n.length))},nodebuffer:_},w.transformTo=function(n,l){if(l=l||"",!n)return l;w.checkSupport(n);var a=w.getTypeOf(l);return h[a][n](l)},w.resolve=function(n){for(var l=n.split("/"),a=[],v=0;v<l.length;v++){var b=l[v];b==="."||b===""&&v!==0&&v!==l.length-1||(b===".."?a.pop():a.push(b))}return a.join("/")},w.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":d.nodebuffer&&s.isBuffer(n)?"nodebuffer":d.uint8array&&n instanceof Uint8Array?"uint8array":d.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},w.checkSupport=function(n){if(!d[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},w.MAX_VALUE_16BITS=65535,w.MAX_VALUE_32BITS=-1,w.pretty=function(n){var l,a,v="";for(a=0;a<(n||"").length;a++)v+="\\x"+((l=n.charCodeAt(a))<16?"0":"")+l.toString(16).toUpperCase();return v},w.delay=function(n,l,a){setImmediate(function(){n.apply(a||null,l||[])})},w.inherits=function(n,l){function a(){}a.prototype=l.prototype,n.prototype=new a},w.extend=function(){var n,l,a={};for(n=0;n<arguments.length;n++)for(l in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],l)&&a[l]===void 0&&(a[l]=arguments[n][l]);return a},w.prepareContent=function(n,l,a,v,b){return u.Promise.resolve(l).then(function(x){return d.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new u.Promise(function(S,R){var O=new FileReader;O.onload=function(L){S(L.target.result)},O.onerror=function(L){R(L.target.error)},O.readAsArrayBuffer(x)}):x}).then(function(x){var S=w.getTypeOf(x);return S?(S==="arraybuffer"?x=w.transformTo("uint8array",x):S==="string"&&(b?x=o.decode(x):a&&v!==!0&&(x=function(R){return f(R,d.uint8array?new Uint8Array(R.length):new Array(R.length))}(x))),x):u.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(p,I,w){var d=p("./reader/readerFor"),o=p("./utils"),s=p("./signature"),u=p("./zipEntry"),_=p("./support");function f(g){this.files=[],this.loadOptions=g}f.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(g)+")")}},isSignature:function(g,m){var r=this.reader.index;this.reader.setIndex(g);var h=this.reader.readString(4)===m;return this.reader.setIndex(r),h},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),m=_.uint8array?"uint8array":"array",r=o.transformTo(m,g);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,m,r,h=this.zip64EndOfCentralSize-44;0<h;)g=this.reader.readInt(2),m=this.reader.readInt(4),r=this.reader.readData(m),this.zip64ExtensibleData[g]={id:g,length:m,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,m;for(g=0;g<this.files.length;g++)m=this.files[g],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(g=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var m=g;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var h=m-r;if(0<h)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=h);else if(h<0)throw new Error("Corrupted zip: missing "+Math.abs(h)+" bytes.")},prepareReader:function(g){this.reader=d(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},I.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(p,I,w){var d=p("./reader/readerFor"),o=p("./utils"),s=p("./compressedObject"),u=p("./crc32"),_=p("./utf8"),f=p("./compressions"),g=p("./support");function m(r,h){this.options=r,this.loadOptions=h}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(r){var h,n;if(r.skip(22),this.fileNameLength=r.readInt(2),n=r.readInt(2),this.fileName=r.readData(this.fileNameLength),r.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((h=function(l){for(var a in f)if(Object.prototype.hasOwnProperty.call(f,a)&&f[a].magic===l)return f[a];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,h,r.readData(this.compressedSize))},readCentralPart:function(r){this.versionMadeBy=r.readInt(2),r.skip(2),this.bitFlag=r.readInt(2),this.compressionMethod=r.readString(2),this.date=r.readDate(),this.crc32=r.readInt(4),this.compressedSize=r.readInt(4),this.uncompressedSize=r.readInt(4);var h=r.readInt(2);if(this.extraFieldsLength=r.readInt(2),this.fileCommentLength=r.readInt(2),this.diskNumberStart=r.readInt(2),this.internalFileAttributes=r.readInt(2),this.externalFileAttributes=r.readInt(4),this.localHeaderOffset=r.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");r.skip(h),this.readExtraFields(r),this.parseZIP64ExtraField(r),this.fileComment=r.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var r=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),r==0&&(this.dosPermissions=63&this.externalFileAttributes),r==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var r=d(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(r){var h,n,l,a=r.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});r.index+4<a;)h=r.readInt(2),n=r.readInt(2),l=r.readData(n),this.extraFields[h]={id:h,length:n,value:l};r.setIndex(a)},handleUTF8:function(){var r=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var h=this.findExtraFieldUnicodePath();if(h!==null)this.fileNameStr=h;else{var n=o.transformTo(r,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var l=this.findExtraFieldUnicodeComment();if(l!==null)this.fileCommentStr=l;else{var a=o.transformTo(r,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var r=this.extraFields[28789];if(r){var h=d(r.value);return h.readInt(1)!==1||u(this.fileName)!==h.readInt(4)?null:_.utf8decode(h.readData(r.length-5))}return null},findExtraFieldUnicodeComment:function(){var r=this.extraFields[25461];if(r){var h=d(r.value);return h.readInt(1)!==1||u(this.fileComment)!==h.readInt(4)?null:_.utf8decode(h.readData(r.length-5))}return null}},I.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(p,I,w){function d(h,n,l){this.name=h,this.dir=l.dir,this.date=l.date,this.comment=l.comment,this.unixPermissions=l.unixPermissions,this.dosPermissions=l.dosPermissions,this._data=n,this._dataBinary=l.binary,this.options={compression:l.compression,compressionOptions:l.compressionOptions}}var o=p("./stream/StreamHelper"),s=p("./stream/DataWorker"),u=p("./utf8"),_=p("./compressedObject"),f=p("./stream/GenericWorker");d.prototype={internalStream:function(h){var n=null,l="string";try{if(!h)throw new Error("No output type specified.");var a=(l=h.toLowerCase())==="string"||l==="text";l!=="binarystring"&&l!=="text"||(l="string"),n=this._decompressWorker();var v=!this._dataBinary;v&&!a&&(n=n.pipe(new u.Utf8EncodeWorker)),!v&&a&&(n=n.pipe(new u.Utf8DecodeWorker))}catch(b){(n=new f("error")).error(b)}return new o(n,l,"")},async:function(h,n){return this.internalStream(h).accumulate(n)},nodeStream:function(h,n){return this.internalStream(h||"nodebuffer").toNodejsStream(n)},_compressWorker:function(h,n){if(this._data instanceof _&&this._data.compression.magic===h.magic)return this._data.getCompressedWorker();var l=this._decompressWorker();return this._dataBinary||(l=l.pipe(new u.Utf8EncodeWorker)),_.createWorkerFrom(l,h,n)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},r=0;r<g.length;r++)d.prototype[g[r]]=m;I.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(p,I,w){(function(d){var o,s,u=d.MutationObserver||d.WebKitMutationObserver;if(u){var _=0,f=new u(h),g=d.document.createTextNode("");f.observe(g,{characterData:!0}),o=function(){g.data=_=++_%2}}else if(d.setImmediate||d.MessageChannel===void 0)o="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var n=d.document.createElement("script");n.onreadystatechange=function(){h(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},d.document.documentElement.appendChild(n)}:function(){setTimeout(h,0)};else{var m=new d.MessageChannel;m.port1.onmessage=h,o=function(){m.port2.postMessage(0)}}var r=[];function h(){var n,l;s=!0;for(var a=r.length;a;){for(l=r,r=[],n=-1;++n<a;)l[n]();a=r.length}s=!1}I.exports=function(n){r.push(n)!==1||s||o()}}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(p,I,w){var d=p("immediate");function o(){}var s={},u=["REJECTED"],_=["FULFILLED"],f=["PENDING"];function g(a){if(typeof a!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,a!==o&&n(this,a)}function m(a,v,b){this.promise=a,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function r(a,v,b){d(function(){var x;try{x=v(b)}catch(S){return s.reject(a,S)}x===a?s.reject(a,new TypeError("Cannot resolve promise with itself")):s.resolve(a,x)})}function h(a){var v=a&&a.then;if(a&&(typeof a=="object"||typeof a=="function")&&typeof v=="function")return function(){v.apply(a,arguments)}}function n(a,v){var b=!1;function x(O){b||(b=!0,s.reject(a,O))}function S(O){b||(b=!0,s.resolve(a,O))}var R=l(function(){v(S,x)});R.status==="error"&&x(R.value)}function l(a,v){var b={};try{b.value=a(v),b.status="success"}catch(x){b.status="error",b.value=x}return b}(I.exports=g).prototype.finally=function(a){if(typeof a!="function")return this;var v=this.constructor;return this.then(function(b){return v.resolve(a()).then(function(){return b})},function(b){return v.resolve(a()).then(function(){throw b})})},g.prototype.catch=function(a){return this.then(null,a)},g.prototype.then=function(a,v){if(typeof a!="function"&&this.state===_||typeof v!="function"&&this.state===u)return this;var b=new this.constructor(o);return this.state!==f?r(b,this.state===_?a:v,this.outcome):this.queue.push(new m(b,a,v)),b},m.prototype.callFulfilled=function(a){s.resolve(this.promise,a)},m.prototype.otherCallFulfilled=function(a){r(this.promise,this.onFulfilled,a)},m.prototype.callRejected=function(a){s.reject(this.promise,a)},m.prototype.otherCallRejected=function(a){r(this.promise,this.onRejected,a)},s.resolve=function(a,v){var b=l(h,v);if(b.status==="error")return s.reject(a,b.value);var x=b.value;if(x)n(a,x);else{a.state=_,a.outcome=v;for(var S=-1,R=a.queue.length;++S<R;)a.queue[S].callFulfilled(v)}return a},s.reject=function(a,v){a.state=u,a.outcome=v;for(var b=-1,x=a.queue.length;++b<x;)a.queue[b].callRejected(v);return a},g.resolve=function(a){return a instanceof this?a:s.resolve(new this(o),a)},g.reject=function(a){var v=new this(o);return s.reject(v,a)},g.all=function(a){var v=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=a.length,x=!1;if(!b)return this.resolve([]);for(var S=new Array(b),R=0,O=-1,L=new this(o);++O<b;)B(a[O],O);return L;function B(W,q){v.resolve(W).then(function(y){S[q]=y,++R!==b||x||(x=!0,s.resolve(L,S))},function(y){x||(x=!0,s.reject(L,y))})}},g.race=function(a){var v=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=a.length,x=!1;if(!b)return this.resolve([]);for(var S=-1,R=new this(o);++S<b;)O=a[S],v.resolve(O).then(function(L){x||(x=!0,s.resolve(R,L))},function(L){x||(x=!0,s.reject(R,L))});var O;return R}},{immediate:36}],38:[function(p,I,w){var d={};(0,p("./lib/utils/common").assign)(d,p("./lib/deflate"),p("./lib/inflate"),p("./lib/zlib/constants")),I.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(p,I,w){var d=p("./zlib/deflate"),o=p("./utils/common"),s=p("./utils/strings"),u=p("./zlib/messages"),_=p("./zlib/zstream"),f=Object.prototype.toString,g=0,m=-1,r=0,h=8;function n(a){if(!(this instanceof n))return new n(a);this.options=o.assign({level:m,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:r,to:""},a||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var b=d.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(b!==g)throw new Error(u[b]);if(v.header&&d.deflateSetHeader(this.strm,v.header),v.dictionary){var x;if(x=typeof v.dictionary=="string"?s.string2buf(v.dictionary):f.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(b=d.deflateSetDictionary(this.strm,x))!==g)throw new Error(u[b]);this._dict_set=!0}}function l(a,v){var b=new n(v);if(b.push(a,!0),b.err)throw b.msg||u[b.err];return b.result}n.prototype.push=function(a,v){var b,x,S=this.strm,R=this.options.chunkSize;if(this.ended)return!1;x=v===~~v?v:v===!0?4:0,typeof a=="string"?S.input=s.string2buf(a):f.call(a)==="[object ArrayBuffer]"?S.input=new Uint8Array(a):S.input=a,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(R),S.next_out=0,S.avail_out=R),(b=d.deflate(S,x))!==1&&b!==g)return this.onEnd(b),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(S.output,S.next_out))):this.onData(o.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&b!==1);return x===4?(b=d.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===g):x!==2||(this.onEnd(g),!(S.avail_out=0))},n.prototype.onData=function(a){this.chunks.push(a)},n.prototype.onEnd=function(a){a===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},w.Deflate=n,w.deflate=l,w.deflateRaw=function(a,v){return(v=v||{}).raw=!0,l(a,v)},w.gzip=function(a,v){return(v=v||{}).gzip=!0,l(a,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(p,I,w){var d=p("./zlib/inflate"),o=p("./utils/common"),s=p("./utils/strings"),u=p("./zlib/constants"),_=p("./zlib/messages"),f=p("./zlib/zstream"),g=p("./zlib/gzheader"),m=Object.prototype.toString;function r(n){if(!(this instanceof r))return new r(n);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},n||{});var l=this.options;l.raw&&0<=l.windowBits&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),!(0<=l.windowBits&&l.windowBits<16)||n&&n.windowBits||(l.windowBits+=32),15<l.windowBits&&l.windowBits<48&&!(15&l.windowBits)&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var a=d.inflateInit2(this.strm,l.windowBits);if(a!==u.Z_OK)throw new Error(_[a]);this.header=new g,d.inflateGetHeader(this.strm,this.header)}function h(n,l){var a=new r(l);if(a.push(n,!0),a.err)throw a.msg||_[a.err];return a.result}r.prototype.push=function(n,l){var a,v,b,x,S,R,O=this.strm,L=this.options.chunkSize,B=this.options.dictionary,W=!1;if(this.ended)return!1;v=l===~~l?l:l===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof n=="string"?O.input=s.binstring2buf(n):m.call(n)==="[object ArrayBuffer]"?O.input=new Uint8Array(n):O.input=n,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(L),O.next_out=0,O.avail_out=L),(a=d.inflate(O,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&B&&(R=typeof B=="string"?s.string2buf(B):m.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,a=d.inflateSetDictionary(this.strm,R)),a===u.Z_BUF_ERROR&&W===!0&&(a=u.Z_OK,W=!1),a!==u.Z_STREAM_END&&a!==u.Z_OK)return this.onEnd(a),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&a!==u.Z_STREAM_END&&(O.avail_in!==0||v!==u.Z_FINISH&&v!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=s.utf8border(O.output,O.next_out),x=O.next_out-b,S=s.buf2string(O.output,b),O.next_out=x,O.avail_out=L-x,x&&o.arraySet(O.output,O.output,b,x,0),this.onData(S)):this.onData(o.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(W=!0)}while((0<O.avail_in||O.avail_out===0)&&a!==u.Z_STREAM_END);return a===u.Z_STREAM_END&&(v=u.Z_FINISH),v===u.Z_FINISH?(a=d.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===u.Z_OK):v!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(O.avail_out=0))},r.prototype.onData=function(n){this.chunks.push(n)},r.prototype.onEnd=function(n){n===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},w.Inflate=r,w.inflate=h,w.inflateRaw=function(n,l){return(l=l||{}).raw=!0,h(n,l)},w.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(p,I,w){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";w.assign=function(u){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var f=_.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var g in f)f.hasOwnProperty(g)&&(u[g]=f[g])}}return u},w.shrinkBuf=function(u,_){return u.length===_?u:u.subarray?u.subarray(0,_):(u.length=_,u)};var o={arraySet:function(u,_,f,g,m){if(_.subarray&&u.subarray)u.set(_.subarray(f,f+g),m);else for(var r=0;r<g;r++)u[m+r]=_[f+r]},flattenChunks:function(u){var _,f,g,m,r,h;for(_=g=0,f=u.length;_<f;_++)g+=u[_].length;for(h=new Uint8Array(g),_=m=0,f=u.length;_<f;_++)r=u[_],h.set(r,m),m+=r.length;return h}},s={arraySet:function(u,_,f,g,m){for(var r=0;r<g;r++)u[m+r]=_[f+r]},flattenChunks:function(u){return[].concat.apply([],u)}};w.setTyped=function(u){u?(w.Buf8=Uint8Array,w.Buf16=Uint16Array,w.Buf32=Int32Array,w.assign(w,o)):(w.Buf8=Array,w.Buf16=Array,w.Buf32=Array,w.assign(w,s))},w.setTyped(d)},{}],42:[function(p,I,w){var d=p("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new d.Buf8(256),_=0;_<256;_++)u[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function f(g,m){if(m<65537&&(g.subarray&&s||!g.subarray&&o))return String.fromCharCode.apply(null,d.shrinkBuf(g,m));for(var r="",h=0;h<m;h++)r+=String.fromCharCode(g[h]);return r}u[254]=u[254]=1,w.string2buf=function(g){var m,r,h,n,l,a=g.length,v=0;for(n=0;n<a;n++)(64512&(r=g.charCodeAt(n)))==55296&&n+1<a&&(64512&(h=g.charCodeAt(n+1)))==56320&&(r=65536+(r-55296<<10)+(h-56320),n++),v+=r<128?1:r<2048?2:r<65536?3:4;for(m=new d.Buf8(v),n=l=0;l<v;n++)(64512&(r=g.charCodeAt(n)))==55296&&n+1<a&&(64512&(h=g.charCodeAt(n+1)))==56320&&(r=65536+(r-55296<<10)+(h-56320),n++),r<128?m[l++]=r:(r<2048?m[l++]=192|r>>>6:(r<65536?m[l++]=224|r>>>12:(m[l++]=240|r>>>18,m[l++]=128|r>>>12&63),m[l++]=128|r>>>6&63),m[l++]=128|63&r);return m},w.buf2binstring=function(g){return f(g,g.length)},w.binstring2buf=function(g){for(var m=new d.Buf8(g.length),r=0,h=m.length;r<h;r++)m[r]=g.charCodeAt(r);return m},w.buf2string=function(g,m){var r,h,n,l,a=m||g.length,v=new Array(2*a);for(r=h=0;r<a;)if((n=g[r++])<128)v[h++]=n;else if(4<(l=u[n]))v[h++]=65533,r+=l-1;else{for(n&=l===2?31:l===3?15:7;1<l&&r<a;)n=n<<6|63&g[r++],l--;1<l?v[h++]=65533:n<65536?v[h++]=n:(n-=65536,v[h++]=55296|n>>10&1023,v[h++]=56320|1023&n)}return f(v,h)},w.utf8border=function(g,m){var r;for((m=m||g.length)>g.length&&(m=g.length),r=m-1;0<=r&&(192&g[r])==128;)r--;return r<0||r===0?m:r+u[g[r]]>m?r:m}},{"./common":41}],43:[function(p,I,w){I.exports=function(d,o,s,u){for(var _=65535&d|0,f=d>>>16&65535|0,g=0;s!==0;){for(s-=g=2e3<s?2e3:s;f=f+(_=_+o[u++]|0)|0,--g;);_%=65521,f%=65521}return _|f<<16|0}},{}],44:[function(p,I,w){I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(p,I,w){var d=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var _=0;_<8;_++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();I.exports=function(o,s,u,_){var f=d,g=_+u;o^=-1;for(var m=_;m<g;m++)o=o>>>8^f[255&(o^s[m])];return-1^o}},{}],46:[function(p,I,w){var d,o=p("../utils/common"),s=p("./trees"),u=p("./adler32"),_=p("./crc32"),f=p("./messages"),g=0,m=4,r=0,h=-2,n=-1,l=4,a=2,v=8,b=9,x=286,S=30,R=19,O=2*x+1,L=15,B=3,W=258,q=W+B+1,y=42,F=113,e=1,U=2,it=3,A=4;function Y(t,M){return t.msg=f[M],M}function $(t){return(t<<1)-(4<t?9:0)}function K(t){for(var M=t.length;0<=--M;)t[M]=0}function z(t){var M=t.state,D=M.pending;D>t.avail_out&&(D=t.avail_out),D!==0&&(o.arraySet(t.output,M.pending_buf,M.pending_out,D,t.next_out),t.next_out+=D,M.pending_out+=D,t.total_out+=D,t.avail_out-=D,M.pending-=D,M.pending===0&&(M.pending_out=0))}function C(t,M){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,M),t.block_start=t.strstart,z(t.strm)}function J(t,M){t.pending_buf[t.pending++]=M}function G(t,M){t.pending_buf[t.pending++]=M>>>8&255,t.pending_buf[t.pending++]=255&M}function j(t,M){var D,c,i=t.max_chain_length,k=t.strstart,P=t.prev_length,N=t.nice_match,E=t.strstart>t.w_size-q?t.strstart-(t.w_size-q):0,Z=t.window,X=t.w_mask,H=t.prev,et=t.strstart+W,ft=Z[k+P-1],ct=Z[k+P];t.prev_length>=t.good_match&&(i>>=2),N>t.lookahead&&(N=t.lookahead);do if(Z[(D=M)+P]===ct&&Z[D+P-1]===ft&&Z[D]===Z[k]&&Z[++D]===Z[k+1]){k+=2,D++;do;while(Z[++k]===Z[++D]&&Z[++k]===Z[++D]&&Z[++k]===Z[++D]&&Z[++k]===Z[++D]&&Z[++k]===Z[++D]&&Z[++k]===Z[++D]&&Z[++k]===Z[++D]&&Z[++k]===Z[++D]&&k<et);if(c=W-(et-k),k=et-W,P<c){if(t.match_start=M,N<=(P=c))break;ft=Z[k+P-1],ct=Z[k+P]}}while((M=H[M&X])>E&&--i!=0);return P<=t.lookahead?P:t.lookahead}function ht(t){var M,D,c,i,k,P,N,E,Z,X,H=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=H+(H-q)){for(o.arraySet(t.window,t.window,H,H,0),t.match_start-=H,t.strstart-=H,t.block_start-=H,M=D=t.hash_size;c=t.head[--M],t.head[M]=H<=c?c-H:0,--D;);for(M=D=H;c=t.prev[--M],t.prev[M]=H<=c?c-H:0,--D;);i+=H}if(t.strm.avail_in===0)break;if(P=t.strm,N=t.window,E=t.strstart+t.lookahead,Z=i,X=void 0,X=P.avail_in,Z<X&&(X=Z),D=X===0?0:(P.avail_in-=X,o.arraySet(N,P.input,P.next_in,X,E),P.state.wrap===1?P.adler=u(P.adler,N,X,E):P.state.wrap===2&&(P.adler=_(P.adler,N,X,E)),P.next_in+=X,P.total_in+=X,X),t.lookahead+=D,t.lookahead+t.insert>=B)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+B-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<q&&t.strm.avail_in!==0)}function gt(t,M){for(var D,c;;){if(t.lookahead<q){if(ht(t),t.lookahead<q&&M===g)return e;if(t.lookahead===0)break}if(D=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),D!==0&&t.strstart-D<=t.w_size-q&&(t.match_length=j(t,D)),t.match_length>=B)if(c=s._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else c=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(c&&(C(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<B-1?t.strstart:B-1,M===m?(C(t,!0),t.strm.avail_out===0?it:A):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?e:U}function ut(t,M){for(var D,c,i;;){if(t.lookahead<q){if(ht(t),t.lookahead<q&&M===g)return e;if(t.lookahead===0)break}if(D=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,D!==0&&t.prev_length<t.max_lazy_match&&t.strstart-D<=t.w_size-q&&(t.match_length=j(t,D),t.match_length<=5&&(t.strategy===1||t.match_length===B&&4096<t.strstart-t.match_start)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-B,c=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=B-1,t.strstart++,c&&(C(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((c=s._tr_tally(t,0,t.window[t.strstart-1]))&&C(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(c=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,M===m?(C(t,!0),t.strm.avail_out===0?it:A):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?e:U}function dt(t,M,D,c,i){this.good_length=t,this.max_lazy=M,this.nice_length=D,this.max_chain=c,this.func=i}function _t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*O),this.dyn_dtree=new o.Buf16(2*(2*S+1)),this.bl_tree=new o.Buf16(2*(2*R+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(L+1),this.heap=new o.Buf16(2*x+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*x+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function mt(t){var M;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=a,(M=t.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?y:F,t.adler=M.wrap===2?0:1,M.last_flush=g,s._tr_init(M),r):Y(t,h)}function yt(t){var M=mt(t);return M===r&&function(D){D.window_size=2*D.w_size,K(D.head),D.max_lazy_match=d[D.level].max_lazy,D.good_match=d[D.level].good_length,D.nice_match=d[D.level].nice_length,D.max_chain_length=d[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=B-1,D.match_available=0,D.ins_h=0}(t.state),M}function xt(t,M,D,c,i,k){if(!t)return h;var P=1;if(M===n&&(M=6),c<0?(P=0,c=-c):15<c&&(P=2,c-=16),i<1||b<i||D!==v||c<8||15<c||M<0||9<M||k<0||l<k)return Y(t,h);c===8&&(c=9);var N=new _t;return(t.state=N).strm=t,N.wrap=P,N.gzhead=null,N.w_bits=c,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=i+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+B-1)/B),N.window=new o.Buf8(2*N.w_size),N.head=new o.Buf16(N.hash_size),N.prev=new o.Buf16(N.w_size),N.lit_bufsize=1<<i+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new o.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=M,N.strategy=k,N.method=D,yt(t)}d=[new dt(0,0,0,0,function(t,M){var D=65535;for(D>t.pending_buf_size-5&&(D=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ht(t),t.lookahead===0&&M===g)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var c=t.block_start+D;if((t.strstart===0||t.strstart>=c)&&(t.lookahead=t.strstart-c,t.strstart=c,C(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-q&&(C(t,!1),t.strm.avail_out===0))return e}return t.insert=0,M===m?(C(t,!0),t.strm.avail_out===0?it:A):(t.strstart>t.block_start&&(C(t,!1),t.strm.avail_out),e)}),new dt(4,4,8,4,gt),new dt(4,5,16,8,gt),new dt(4,6,32,32,gt),new dt(4,4,16,16,ut),new dt(8,16,32,32,ut),new dt(8,16,128,128,ut),new dt(8,32,128,256,ut),new dt(32,128,258,1024,ut),new dt(32,258,258,4096,ut)],w.deflateInit=function(t,M){return xt(t,M,v,15,8,0)},w.deflateInit2=xt,w.deflateReset=yt,w.deflateResetKeep=mt,w.deflateSetHeader=function(t,M){return t&&t.state?t.state.wrap!==2?h:(t.state.gzhead=M,r):h},w.deflate=function(t,M){var D,c,i,k;if(!t||!t.state||5<M||M<0)return t?Y(t,h):h;if(c=t.state,!t.output||!t.input&&t.avail_in!==0||c.status===666&&M!==m)return Y(t,t.avail_out===0?-5:h);if(c.strm=t,D=c.last_flush,c.last_flush=M,c.status===y)if(c.wrap===2)t.adler=0,J(c,31),J(c,139),J(c,8),c.gzhead?(J(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),J(c,255&c.gzhead.time),J(c,c.gzhead.time>>8&255),J(c,c.gzhead.time>>16&255),J(c,c.gzhead.time>>24&255),J(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),J(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(J(c,255&c.gzhead.extra.length),J(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(t.adler=_(t.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69):(J(c,0),J(c,0),J(c,0),J(c,0),J(c,0),J(c,c.level===9?2:2<=c.strategy||c.level<2?4:0),J(c,3),c.status=F);else{var P=v+(c.w_bits-8<<4)<<8;P|=(2<=c.strategy||c.level<2?0:c.level<6?1:c.level===6?2:3)<<6,c.strstart!==0&&(P|=32),P+=31-P%31,c.status=F,G(c,P),c.strstart!==0&&(G(c,t.adler>>>16),G(c,65535&t.adler)),t.adler=1}if(c.status===69)if(c.gzhead.extra){for(i=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>i&&(t.adler=_(t.adler,c.pending_buf,c.pending-i,i)),z(t),i=c.pending,c.pending!==c.pending_buf_size));)J(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>i&&(t.adler=_(t.adler,c.pending_buf,c.pending-i,i)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(c.status===73)if(c.gzhead.name){i=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>i&&(t.adler=_(t.adler,c.pending_buf,c.pending-i,i)),z(t),i=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,J(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>i&&(t.adler=_(t.adler,c.pending_buf,c.pending-i,i)),k===0&&(c.gzindex=0,c.status=91)}else c.status=91;if(c.status===91)if(c.gzhead.comment){i=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>i&&(t.adler=_(t.adler,c.pending_buf,c.pending-i,i)),z(t),i=c.pending,c.pending===c.pending_buf_size)){k=1;break}k=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,J(c,k)}while(k!==0);c.gzhead.hcrc&&c.pending>i&&(t.adler=_(t.adler,c.pending_buf,c.pending-i,i)),k===0&&(c.status=103)}else c.status=103;if(c.status===103&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&z(t),c.pending+2<=c.pending_buf_size&&(J(c,255&t.adler),J(c,t.adler>>8&255),t.adler=0,c.status=F)):c.status=F),c.pending!==0){if(z(t),t.avail_out===0)return c.last_flush=-1,r}else if(t.avail_in===0&&$(M)<=$(D)&&M!==m)return Y(t,-5);if(c.status===666&&t.avail_in!==0)return Y(t,-5);if(t.avail_in!==0||c.lookahead!==0||M!==g&&c.status!==666){var N=c.strategy===2?function(E,Z){for(var X;;){if(E.lookahead===0&&(ht(E),E.lookahead===0)){if(Z===g)return e;break}if(E.match_length=0,X=s._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,X&&(C(E,!1),E.strm.avail_out===0))return e}return E.insert=0,Z===m?(C(E,!0),E.strm.avail_out===0?it:A):E.last_lit&&(C(E,!1),E.strm.avail_out===0)?e:U}(c,M):c.strategy===3?function(E,Z){for(var X,H,et,ft,ct=E.window;;){if(E.lookahead<=W){if(ht(E),E.lookahead<=W&&Z===g)return e;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=B&&0<E.strstart&&(H=ct[et=E.strstart-1])===ct[++et]&&H===ct[++et]&&H===ct[++et]){ft=E.strstart+W;do;while(H===ct[++et]&&H===ct[++et]&&H===ct[++et]&&H===ct[++et]&&H===ct[++et]&&H===ct[++et]&&H===ct[++et]&&H===ct[++et]&&et<ft);E.match_length=W-(ft-et),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=B?(X=s._tr_tally(E,1,E.match_length-B),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(X=s._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),X&&(C(E,!1),E.strm.avail_out===0))return e}return E.insert=0,Z===m?(C(E,!0),E.strm.avail_out===0?it:A):E.last_lit&&(C(E,!1),E.strm.avail_out===0)?e:U}(c,M):d[c.level].func(c,M);if(N!==it&&N!==A||(c.status=666),N===e||N===it)return t.avail_out===0&&(c.last_flush=-1),r;if(N===U&&(M===1?s._tr_align(c):M!==5&&(s._tr_stored_block(c,0,0,!1),M===3&&(K(c.head),c.lookahead===0&&(c.strstart=0,c.block_start=0,c.insert=0))),z(t),t.avail_out===0))return c.last_flush=-1,r}return M!==m?r:c.wrap<=0?1:(c.wrap===2?(J(c,255&t.adler),J(c,t.adler>>8&255),J(c,t.adler>>16&255),J(c,t.adler>>24&255),J(c,255&t.total_in),J(c,t.total_in>>8&255),J(c,t.total_in>>16&255),J(c,t.total_in>>24&255)):(G(c,t.adler>>>16),G(c,65535&t.adler)),z(t),0<c.wrap&&(c.wrap=-c.wrap),c.pending!==0?r:1)},w.deflateEnd=function(t){var M;return t&&t.state?(M=t.state.status)!==y&&M!==69&&M!==73&&M!==91&&M!==103&&M!==F&&M!==666?Y(t,h):(t.state=null,M===F?Y(t,-3):r):h},w.deflateSetDictionary=function(t,M){var D,c,i,k,P,N,E,Z,X=M.length;if(!t||!t.state||(k=(D=t.state).wrap)===2||k===1&&D.status!==y||D.lookahead)return h;for(k===1&&(t.adler=u(t.adler,M,X,0)),D.wrap=0,X>=D.w_size&&(k===0&&(K(D.head),D.strstart=0,D.block_start=0,D.insert=0),Z=new o.Buf8(D.w_size),o.arraySet(Z,M,X-D.w_size,D.w_size,0),M=Z,X=D.w_size),P=t.avail_in,N=t.next_in,E=t.input,t.avail_in=X,t.next_in=0,t.input=M,ht(D);D.lookahead>=B;){for(c=D.strstart,i=D.lookahead-(B-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[c+B-1])&D.hash_mask,D.prev[c&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=c,c++,--i;);D.strstart=c,D.lookahead=B-1,ht(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=B-1,D.match_available=0,t.next_in=N,t.input=E,t.avail_in=P,D.wrap=k,r},w.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(p,I,w){I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(p,I,w){I.exports=function(d,o){var s,u,_,f,g,m,r,h,n,l,a,v,b,x,S,R,O,L,B,W,q,y,F,e,U;s=d.state,u=d.next_in,e=d.input,_=u+(d.avail_in-5),f=d.next_out,U=d.output,g=f-(o-d.avail_out),m=f+(d.avail_out-257),r=s.dmax,h=s.wsize,n=s.whave,l=s.wnext,a=s.window,v=s.hold,b=s.bits,x=s.lencode,S=s.distcode,R=(1<<s.lenbits)-1,O=(1<<s.distbits)-1;t:do{b<15&&(v+=e[u++]<<b,b+=8,v+=e[u++]<<b,b+=8),L=x[v&R];e:for(;;){if(v>>>=B=L>>>24,b-=B,(B=L>>>16&255)===0)U[f++]=65535&L;else{if(!(16&B)){if(!(64&B)){L=x[(65535&L)+(v&(1<<B)-1)];continue e}if(32&B){s.mode=12;break t}d.msg="invalid literal/length code",s.mode=30;break t}W=65535&L,(B&=15)&&(b<B&&(v+=e[u++]<<b,b+=8),W+=v&(1<<B)-1,v>>>=B,b-=B),b<15&&(v+=e[u++]<<b,b+=8,v+=e[u++]<<b,b+=8),L=S[v&O];n:for(;;){if(v>>>=B=L>>>24,b-=B,!(16&(B=L>>>16&255))){if(!(64&B)){L=S[(65535&L)+(v&(1<<B)-1)];continue n}d.msg="invalid distance code",s.mode=30;break t}if(q=65535&L,b<(B&=15)&&(v+=e[u++]<<b,(b+=8)<B&&(v+=e[u++]<<b,b+=8)),r<(q+=v&(1<<B)-1)){d.msg="invalid distance too far back",s.mode=30;break t}if(v>>>=B,b-=B,(B=f-g)<q){if(n<(B=q-B)&&s.sane){d.msg="invalid distance too far back",s.mode=30;break t}if(F=a,(y=0)===l){if(y+=h-B,B<W){for(W-=B;U[f++]=a[y++],--B;);y=f-q,F=U}}else if(l<B){if(y+=h+l-B,(B-=l)<W){for(W-=B;U[f++]=a[y++],--B;);if(y=0,l<W){for(W-=B=l;U[f++]=a[y++],--B;);y=f-q,F=U}}}else if(y+=l-B,B<W){for(W-=B;U[f++]=a[y++],--B;);y=f-q,F=U}for(;2<W;)U[f++]=F[y++],U[f++]=F[y++],U[f++]=F[y++],W-=3;W&&(U[f++]=F[y++],1<W&&(U[f++]=F[y++]))}else{for(y=f-q;U[f++]=U[y++],U[f++]=U[y++],U[f++]=U[y++],2<(W-=3););W&&(U[f++]=U[y++],1<W&&(U[f++]=U[y++]))}break}}break}}while(u<_&&f<m);u-=W=b>>3,v&=(1<<(b-=W<<3))-1,d.next_in=u,d.next_out=f,d.avail_in=u<_?_-u+5:5-(u-_),d.avail_out=f<m?m-f+257:257-(f-m),s.hold=v,s.bits=b}},{}],49:[function(p,I,w){var d=p("../utils/common"),o=p("./adler32"),s=p("./crc32"),u=p("./inffast"),_=p("./inftrees"),f=1,g=2,m=0,r=-2,h=1,n=852,l=592;function a(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(y){var F;return y&&y.state?(F=y.state,y.total_in=y.total_out=F.total=0,y.msg="",F.wrap&&(y.adler=1&F.wrap),F.mode=h,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new d.Buf32(n),F.distcode=F.distdyn=new d.Buf32(l),F.sane=1,F.back=-1,m):r}function x(y){var F;return y&&y.state?((F=y.state).wsize=0,F.whave=0,F.wnext=0,b(y)):r}function S(y,F){var e,U;return y&&y.state?(U=y.state,F<0?(e=0,F=-F):(e=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?r:(U.window!==null&&U.wbits!==F&&(U.window=null),U.wrap=e,U.wbits=F,x(y))):r}function R(y,F){var e,U;return y?(U=new v,(y.state=U).window=null,(e=S(y,F))!==m&&(y.state=null),e):r}var O,L,B=!0;function W(y){if(B){var F;for(O=new d.Buf32(512),L=new d.Buf32(32),F=0;F<144;)y.lens[F++]=8;for(;F<256;)y.lens[F++]=9;for(;F<280;)y.lens[F++]=7;for(;F<288;)y.lens[F++]=8;for(_(f,y.lens,0,288,O,0,y.work,{bits:9}),F=0;F<32;)y.lens[F++]=5;_(g,y.lens,0,32,L,0,y.work,{bits:5}),B=!1}y.lencode=O,y.lenbits=9,y.distcode=L,y.distbits=5}function q(y,F,e,U){var it,A=y.state;return A.window===null&&(A.wsize=1<<A.wbits,A.wnext=0,A.whave=0,A.window=new d.Buf8(A.wsize)),U>=A.wsize?(d.arraySet(A.window,F,e-A.wsize,A.wsize,0),A.wnext=0,A.whave=A.wsize):(U<(it=A.wsize-A.wnext)&&(it=U),d.arraySet(A.window,F,e-U,it,A.wnext),(U-=it)?(d.arraySet(A.window,F,e-U,U,0),A.wnext=U,A.whave=A.wsize):(A.wnext+=it,A.wnext===A.wsize&&(A.wnext=0),A.whave<A.wsize&&(A.whave+=it))),0}w.inflateReset=x,w.inflateReset2=S,w.inflateResetKeep=b,w.inflateInit=function(y){return R(y,15)},w.inflateInit2=R,w.inflate=function(y,F){var e,U,it,A,Y,$,K,z,C,J,G,j,ht,gt,ut,dt,_t,mt,yt,xt,t,M,D,c,i=0,k=new d.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return r;(e=y.state).mode===12&&(e.mode=13),Y=y.next_out,it=y.output,K=y.avail_out,A=y.next_in,U=y.input,$=y.avail_in,z=e.hold,C=e.bits,J=$,G=K,M=m;t:for(;;)switch(e.mode){case h:if(e.wrap===0){e.mode=13;break}for(;C<16;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(2&e.wrap&&z===35615){k[e.check=0]=255&z,k[1]=z>>>8&255,e.check=s(e.check,k,2,0),C=z=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&z)<<8)+(z>>8))%31){y.msg="incorrect header check",e.mode=30;break}if((15&z)!=8){y.msg="unknown compression method",e.mode=30;break}if(C-=4,t=8+(15&(z>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){y.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,y.adler=e.check=1,e.mode=512&z?10:12,C=z=0;break;case 2:for(;C<16;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(e.flags=z,(255&e.flags)!=8){y.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){y.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=z>>8&1),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,e.check=s(e.check,k,2,0)),C=z=0,e.mode=3;case 3:for(;C<32;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}e.head&&(e.head.time=z),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,k[2]=z>>>16&255,k[3]=z>>>24&255,e.check=s(e.check,k,4,0)),C=z=0,e.mode=4;case 4:for(;C<16;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}e.head&&(e.head.xflags=255&z,e.head.os=z>>8),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,e.check=s(e.check,k,2,0)),C=z=0,e.mode=5;case 5:if(1024&e.flags){for(;C<16;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}e.length=z,e.head&&(e.head.extra_len=z),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,e.check=s(e.check,k,2,0)),C=z=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&($<(j=e.length)&&(j=$),j&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),d.arraySet(e.head.extra,U,A,j,t)),512&e.flags&&(e.check=s(e.check,U,j,A)),$-=j,A+=j,e.length-=j),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if($===0)break t;for(j=0;t=U[A+j++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&j<$;);if(512&e.flags&&(e.check=s(e.check,U,j,A)),$-=j,A+=j,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if($===0)break t;for(j=0;t=U[A+j++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&j<$;);if(512&e.flags&&(e.check=s(e.check,U,j,A)),$-=j,A+=j,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;C<16;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(z!==(65535&e.check)){y.msg="header crc mismatch",e.mode=30;break}C=z=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),y.adler=e.check=0,e.mode=12;break;case 10:for(;C<32;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}y.adler=e.check=a(z),C=z=0,e.mode=11;case 11:if(e.havedict===0)return y.next_out=Y,y.avail_out=K,y.next_in=A,y.avail_in=$,e.hold=z,e.bits=C,2;y.adler=e.check=1,e.mode=12;case 12:if(F===5||F===6)break t;case 13:if(e.last){z>>>=7&C,C-=7&C,e.mode=27;break}for(;C<3;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}switch(e.last=1&z,C-=1,3&(z>>>=1)){case 0:e.mode=14;break;case 1:if(W(e),e.mode=20,F!==6)break;z>>>=2,C-=2;break t;case 2:e.mode=17;break;case 3:y.msg="invalid block type",e.mode=30}z>>>=2,C-=2;break;case 14:for(z>>>=7&C,C-=7&C;C<32;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if((65535&z)!=(z>>>16^65535)){y.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&z,C=z=0,e.mode=15,F===6)break t;case 15:e.mode=16;case 16:if(j=e.length){if($<j&&(j=$),K<j&&(j=K),j===0)break t;d.arraySet(it,U,A,j,Y),$-=j,A+=j,K-=j,Y+=j,e.length-=j;break}e.mode=12;break;case 17:for(;C<14;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(e.nlen=257+(31&z),z>>>=5,C-=5,e.ndist=1+(31&z),z>>>=5,C-=5,e.ncode=4+(15&z),z>>>=4,C-=4,286<e.nlen||30<e.ndist){y.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;C<3;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}e.lens[P[e.have++]]=7&z,z>>>=3,C-=3}for(;e.have<19;)e.lens[P[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,D={bits:e.lenbits},M=_(0,e.lens,0,19,e.lencode,0,e.work,D),e.lenbits=D.bits,M){y.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;dt=(i=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,_t=65535&i,!((ut=i>>>24)<=C);){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(_t<16)z>>>=ut,C-=ut,e.lens[e.have++]=_t;else{if(_t===16){for(c=ut+2;C<c;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(z>>>=ut,C-=ut,e.have===0){y.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],j=3+(3&z),z>>>=2,C-=2}else if(_t===17){for(c=ut+3;C<c;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}C-=ut,t=0,j=3+(7&(z>>>=ut)),z>>>=3,C-=3}else{for(c=ut+7;C<c;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}C-=ut,t=0,j=11+(127&(z>>>=ut)),z>>>=7,C-=7}if(e.have+j>e.nlen+e.ndist){y.msg="invalid bit length repeat",e.mode=30;break}for(;j--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){y.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,D={bits:e.lenbits},M=_(f,e.lens,0,e.nlen,e.lencode,0,e.work,D),e.lenbits=D.bits,M){y.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,D={bits:e.distbits},M=_(g,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,D),e.distbits=D.bits,M){y.msg="invalid distances set",e.mode=30;break}if(e.mode=20,F===6)break t;case 20:e.mode=21;case 21:if(6<=$&&258<=K){y.next_out=Y,y.avail_out=K,y.next_in=A,y.avail_in=$,e.hold=z,e.bits=C,u(y,G),Y=y.next_out,it=y.output,K=y.avail_out,A=y.next_in,U=y.input,$=y.avail_in,z=e.hold,C=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;dt=(i=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,_t=65535&i,!((ut=i>>>24)<=C);){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(dt&&!(240&dt)){for(mt=ut,yt=dt,xt=_t;dt=(i=e.lencode[xt+((z&(1<<mt+yt)-1)>>mt)])>>>16&255,_t=65535&i,!(mt+(ut=i>>>24)<=C);){if($===0)break t;$--,z+=U[A++]<<C,C+=8}z>>>=mt,C-=mt,e.back+=mt}if(z>>>=ut,C-=ut,e.back+=ut,e.length=_t,dt===0){e.mode=26;break}if(32&dt){e.back=-1,e.mode=12;break}if(64&dt){y.msg="invalid literal/length code",e.mode=30;break}e.extra=15&dt,e.mode=22;case 22:if(e.extra){for(c=e.extra;C<c;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}e.length+=z&(1<<e.extra)-1,z>>>=e.extra,C-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;dt=(i=e.distcode[z&(1<<e.distbits)-1])>>>16&255,_t=65535&i,!((ut=i>>>24)<=C);){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(!(240&dt)){for(mt=ut,yt=dt,xt=_t;dt=(i=e.distcode[xt+((z&(1<<mt+yt)-1)>>mt)])>>>16&255,_t=65535&i,!(mt+(ut=i>>>24)<=C);){if($===0)break t;$--,z+=U[A++]<<C,C+=8}z>>>=mt,C-=mt,e.back+=mt}if(z>>>=ut,C-=ut,e.back+=ut,64&dt){y.msg="invalid distance code",e.mode=30;break}e.offset=_t,e.extra=15&dt,e.mode=24;case 24:if(e.extra){for(c=e.extra;C<c;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}e.offset+=z&(1<<e.extra)-1,z>>>=e.extra,C-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){y.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(K===0)break t;if(j=G-K,e.offset>j){if((j=e.offset-j)>e.whave&&e.sane){y.msg="invalid distance too far back",e.mode=30;break}ht=j>e.wnext?(j-=e.wnext,e.wsize-j):e.wnext-j,j>e.length&&(j=e.length),gt=e.window}else gt=it,ht=Y-e.offset,j=e.length;for(K<j&&(j=K),K-=j,e.length-=j;it[Y++]=gt[ht++],--j;);e.length===0&&(e.mode=21);break;case 26:if(K===0)break t;it[Y++]=e.length,K--,e.mode=21;break;case 27:if(e.wrap){for(;C<32;){if($===0)break t;$--,z|=U[A++]<<C,C+=8}if(G-=K,y.total_out+=G,e.total+=G,G&&(y.adler=e.check=e.flags?s(e.check,it,G,Y-G):o(e.check,it,G,Y-G)),G=K,(e.flags?z:a(z))!==e.check){y.msg="incorrect data check",e.mode=30;break}C=z=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;C<32;){if($===0)break t;$--,z+=U[A++]<<C,C+=8}if(z!==(4294967295&e.total)){y.msg="incorrect length check",e.mode=30;break}C=z=0}e.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;case 32:default:return r}return y.next_out=Y,y.avail_out=K,y.next_in=A,y.avail_in=$,e.hold=z,e.bits=C,(e.wsize||G!==y.avail_out&&e.mode<30&&(e.mode<27||F!==4))&&q(y,y.output,y.next_out,G-y.avail_out)?(e.mode=31,-4):(J-=y.avail_in,G-=y.avail_out,y.total_in+=J,y.total_out+=G,e.total+=G,e.wrap&&G&&(y.adler=e.check=e.flags?s(e.check,it,G,y.next_out-G):o(e.check,it,G,y.next_out-G)),y.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(J==0&&G===0||F===4)&&M===m&&(M=-5),M)},w.inflateEnd=function(y){if(!y||!y.state)return r;var F=y.state;return F.window&&(F.window=null),y.state=null,m},w.inflateGetHeader=function(y,F){var e;return y&&y.state&&2&(e=y.state).wrap?((e.head=F).done=!1,m):r},w.inflateSetDictionary=function(y,F){var e,U=F.length;return y&&y.state?(e=y.state).wrap!==0&&e.mode!==11?r:e.mode===11&&o(1,F,U,0)!==e.check?-3:q(y,F,U,U)?(e.mode=31,-4):(e.havedict=1,m):r},w.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(p,I,w){var d=p("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(f,g,m,r,h,n,l,a){var v,b,x,S,R,O,L,B,W,q=a.bits,y=0,F=0,e=0,U=0,it=0,A=0,Y=0,$=0,K=0,z=0,C=null,J=0,G=new d.Buf16(16),j=new d.Buf16(16),ht=null,gt=0;for(y=0;y<=15;y++)G[y]=0;for(F=0;F<r;F++)G[g[m+F]]++;for(it=q,U=15;1<=U&&G[U]===0;U--);if(U<it&&(it=U),U===0)return h[n++]=20971520,h[n++]=20971520,a.bits=1,0;for(e=1;e<U&&G[e]===0;e++);for(it<e&&(it=e),y=$=1;y<=15;y++)if($<<=1,($-=G[y])<0)return-1;if(0<$&&(f===0||U!==1))return-1;for(j[1]=0,y=1;y<15;y++)j[y+1]=j[y]+G[y];for(F=0;F<r;F++)g[m+F]!==0&&(l[j[g[m+F]]++]=F);if(O=f===0?(C=ht=l,19):f===1?(C=o,J-=257,ht=s,gt-=257,256):(C=u,ht=_,-1),y=e,R=n,Y=F=z=0,x=-1,S=(K=1<<(A=it))-1,f===1&&852<K||f===2&&592<K)return 1;for(;;){for(L=y-Y,W=l[F]<O?(B=0,l[F]):l[F]>O?(B=ht[gt+l[F]],C[J+l[F]]):(B=96,0),v=1<<y-Y,e=b=1<<A;h[R+(z>>Y)+(b-=v)]=L<<24|B<<16|W|0,b!==0;);for(v=1<<y-1;z&v;)v>>=1;if(v!==0?(z&=v-1,z+=v):z=0,F++,--G[y]==0){if(y===U)break;y=g[m+l[F]]}if(it<y&&(z&S)!==x){for(Y===0&&(Y=it),R+=e,$=1<<(A=y-Y);A+Y<U&&!(($-=G[A+Y])<=0);)A++,$<<=1;if(K+=1<<A,f===1&&852<K||f===2&&592<K)return 1;h[x=z&S]=it<<24|A<<16|R-n|0}}return z!==0&&(h[R+z]=y-Y<<24|64<<16|0),a.bits=it,0}},{"../utils/common":41}],51:[function(p,I,w){I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(p,I,w){var d=p("../utils/common"),o=0,s=1;function u(i){for(var k=i.length;0<=--k;)i[k]=0}var _=0,f=29,g=256,m=g+1+f,r=30,h=19,n=2*m+1,l=15,a=16,v=7,b=256,x=16,S=17,R=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(m+2));u(q);var y=new Array(2*r);u(y);var F=new Array(512);u(F);var e=new Array(256);u(e);var U=new Array(f);u(U);var it,A,Y,$=new Array(r);function K(i,k,P,N,E){this.static_tree=i,this.extra_bits=k,this.extra_base=P,this.elems=N,this.max_length=E,this.has_stree=i&&i.length}function z(i,k){this.dyn_tree=i,this.max_code=0,this.stat_desc=k}function C(i){return i<256?F[i]:F[256+(i>>>7)]}function J(i,k){i.pending_buf[i.pending++]=255&k,i.pending_buf[i.pending++]=k>>>8&255}function G(i,k,P){i.bi_valid>a-P?(i.bi_buf|=k<<i.bi_valid&65535,J(i,i.bi_buf),i.bi_buf=k>>a-i.bi_valid,i.bi_valid+=P-a):(i.bi_buf|=k<<i.bi_valid&65535,i.bi_valid+=P)}function j(i,k,P){G(i,P[2*k],P[2*k+1])}function ht(i,k){for(var P=0;P|=1&i,i>>>=1,P<<=1,0<--k;);return P>>>1}function gt(i,k,P){var N,E,Z=new Array(l+1),X=0;for(N=1;N<=l;N++)Z[N]=X=X+P[N-1]<<1;for(E=0;E<=k;E++){var H=i[2*E+1];H!==0&&(i[2*E]=ht(Z[H]++,H))}}function ut(i){var k;for(k=0;k<m;k++)i.dyn_ltree[2*k]=0;for(k=0;k<r;k++)i.dyn_dtree[2*k]=0;for(k=0;k<h;k++)i.bl_tree[2*k]=0;i.dyn_ltree[2*b]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function dt(i){8<i.bi_valid?J(i,i.bi_buf):0<i.bi_valid&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function _t(i,k,P,N){var E=2*k,Z=2*P;return i[E]<i[Z]||i[E]===i[Z]&&N[k]<=N[P]}function mt(i,k,P){for(var N=i.heap[P],E=P<<1;E<=i.heap_len&&(E<i.heap_len&&_t(k,i.heap[E+1],i.heap[E],i.depth)&&E++,!_t(k,N,i.heap[E],i.depth));)i.heap[P]=i.heap[E],P=E,E<<=1;i.heap[P]=N}function yt(i,k,P){var N,E,Z,X,H=0;if(i.last_lit!==0)for(;N=i.pending_buf[i.d_buf+2*H]<<8|i.pending_buf[i.d_buf+2*H+1],E=i.pending_buf[i.l_buf+H],H++,N===0?j(i,E,k):(j(i,(Z=e[E])+g+1,k),(X=O[Z])!==0&&G(i,E-=U[Z],X),j(i,Z=C(--N),P),(X=L[Z])!==0&&G(i,N-=$[Z],X)),H<i.last_lit;);j(i,b,k)}function xt(i,k){var P,N,E,Z=k.dyn_tree,X=k.stat_desc.static_tree,H=k.stat_desc.has_stree,et=k.stat_desc.elems,ft=-1;for(i.heap_len=0,i.heap_max=n,P=0;P<et;P++)Z[2*P]!==0?(i.heap[++i.heap_len]=ft=P,i.depth[P]=0):Z[2*P+1]=0;for(;i.heap_len<2;)Z[2*(E=i.heap[++i.heap_len]=ft<2?++ft:0)]=1,i.depth[E]=0,i.opt_len--,H&&(i.static_len-=X[2*E+1]);for(k.max_code=ft,P=i.heap_len>>1;1<=P;P--)mt(i,Z,P);for(E=et;P=i.heap[1],i.heap[1]=i.heap[i.heap_len--],mt(i,Z,1),N=i.heap[1],i.heap[--i.heap_max]=P,i.heap[--i.heap_max]=N,Z[2*E]=Z[2*P]+Z[2*N],i.depth[E]=(i.depth[P]>=i.depth[N]?i.depth[P]:i.depth[N])+1,Z[2*P+1]=Z[2*N+1]=E,i.heap[1]=E++,mt(i,Z,1),2<=i.heap_len;);i.heap[--i.heap_max]=i.heap[1],function(ct,nt){var At,Et,Pt,vt,Wt,Yt,Bt=nt.dyn_tree,le=nt.max_code,be=nt.stat_desc.static_tree,ye=nt.stat_desc.has_stree,ke=nt.stat_desc.extra_bits,ce=nt.stat_desc.extra_base,Ut=nt.stat_desc.max_length,Zt=0;for(vt=0;vt<=l;vt++)ct.bl_count[vt]=0;for(Bt[2*ct.heap[ct.heap_max]+1]=0,At=ct.heap_max+1;At<n;At++)Ut<(vt=Bt[2*Bt[2*(Et=ct.heap[At])+1]+1]+1)&&(vt=Ut,Zt++),Bt[2*Et+1]=vt,le<Et||(ct.bl_count[vt]++,Wt=0,ce<=Et&&(Wt=ke[Et-ce]),Yt=Bt[2*Et],ct.opt_len+=Yt*(vt+Wt),ye&&(ct.static_len+=Yt*(be[2*Et+1]+Wt)));if(Zt!==0){do{for(vt=Ut-1;ct.bl_count[vt]===0;)vt--;ct.bl_count[vt]--,ct.bl_count[vt+1]+=2,ct.bl_count[Ut]--,Zt-=2}while(0<Zt);for(vt=Ut;vt!==0;vt--)for(Et=ct.bl_count[vt];Et!==0;)le<(Pt=ct.heap[--At])||(Bt[2*Pt+1]!==vt&&(ct.opt_len+=(vt-Bt[2*Pt+1])*Bt[2*Pt],Bt[2*Pt+1]=vt),Et--)}}(i,k),gt(Z,ft,i.bl_count)}function t(i,k,P){var N,E,Z=-1,X=k[1],H=0,et=7,ft=4;for(X===0&&(et=138,ft=3),k[2*(P+1)+1]=65535,N=0;N<=P;N++)E=X,X=k[2*(N+1)+1],++H<et&&E===X||(H<ft?i.bl_tree[2*E]+=H:E!==0?(E!==Z&&i.bl_tree[2*E]++,i.bl_tree[2*x]++):H<=10?i.bl_tree[2*S]++:i.bl_tree[2*R]++,Z=E,ft=(H=0)===X?(et=138,3):E===X?(et=6,3):(et=7,4))}function M(i,k,P){var N,E,Z=-1,X=k[1],H=0,et=7,ft=4;for(X===0&&(et=138,ft=3),N=0;N<=P;N++)if(E=X,X=k[2*(N+1)+1],!(++H<et&&E===X)){if(H<ft)for(;j(i,E,i.bl_tree),--H!=0;);else E!==0?(E!==Z&&(j(i,E,i.bl_tree),H--),j(i,x,i.bl_tree),G(i,H-3,2)):H<=10?(j(i,S,i.bl_tree),G(i,H-3,3)):(j(i,R,i.bl_tree),G(i,H-11,7));Z=E,ft=(H=0)===X?(et=138,3):E===X?(et=6,3):(et=7,4)}}u($);var D=!1;function c(i,k,P,N){G(i,(_<<1)+(N?1:0),3),function(E,Z,X,H){dt(E),J(E,X),J(E,~X),d.arraySet(E.pending_buf,E.window,Z,X,E.pending),E.pending+=X}(i,k,P)}w._tr_init=function(i){D||(function(){var k,P,N,E,Z,X=new Array(l+1);for(E=N=0;E<f-1;E++)for(U[E]=N,k=0;k<1<<O[E];k++)e[N++]=E;for(e[N-1]=E,E=Z=0;E<16;E++)for($[E]=Z,k=0;k<1<<L[E];k++)F[Z++]=E;for(Z>>=7;E<r;E++)for($[E]=Z<<7,k=0;k<1<<L[E]-7;k++)F[256+Z++]=E;for(P=0;P<=l;P++)X[P]=0;for(k=0;k<=143;)q[2*k+1]=8,k++,X[8]++;for(;k<=255;)q[2*k+1]=9,k++,X[9]++;for(;k<=279;)q[2*k+1]=7,k++,X[7]++;for(;k<=287;)q[2*k+1]=8,k++,X[8]++;for(gt(q,m+1,X),k=0;k<r;k++)y[2*k+1]=5,y[2*k]=ht(k,5);it=new K(q,O,g+1,m,l),A=new K(y,L,0,r,l),Y=new K(new Array(0),B,0,h,v)}(),D=!0),i.l_desc=new z(i.dyn_ltree,it),i.d_desc=new z(i.dyn_dtree,A),i.bl_desc=new z(i.bl_tree,Y),i.bi_buf=0,i.bi_valid=0,ut(i)},w._tr_stored_block=c,w._tr_flush_block=function(i,k,P,N){var E,Z,X=0;0<i.level?(i.strm.data_type===2&&(i.strm.data_type=function(H){var et,ft=4093624447;for(et=0;et<=31;et++,ft>>>=1)if(1&ft&&H.dyn_ltree[2*et]!==0)return o;if(H.dyn_ltree[18]!==0||H.dyn_ltree[20]!==0||H.dyn_ltree[26]!==0)return s;for(et=32;et<g;et++)if(H.dyn_ltree[2*et]!==0)return s;return o}(i)),xt(i,i.l_desc),xt(i,i.d_desc),X=function(H){var et;for(t(H,H.dyn_ltree,H.l_desc.max_code),t(H,H.dyn_dtree,H.d_desc.max_code),xt(H,H.bl_desc),et=h-1;3<=et&&H.bl_tree[2*W[et]+1]===0;et--);return H.opt_len+=3*(et+1)+5+5+4,et}(i),E=i.opt_len+3+7>>>3,(Z=i.static_len+3+7>>>3)<=E&&(E=Z)):E=Z=P+5,P+4<=E&&k!==-1?c(i,k,P,N):i.strategy===4||Z===E?(G(i,2+(N?1:0),3),yt(i,q,y)):(G(i,4+(N?1:0),3),function(H,et,ft,ct){var nt;for(G(H,et-257,5),G(H,ft-1,5),G(H,ct-4,4),nt=0;nt<ct;nt++)G(H,H.bl_tree[2*W[nt]+1],3);M(H,H.dyn_ltree,et-1),M(H,H.dyn_dtree,ft-1)}(i,i.l_desc.max_code+1,i.d_desc.max_code+1,X+1),yt(i,i.dyn_ltree,i.dyn_dtree)),ut(i),N&&dt(i)},w._tr_tally=function(i,k,P){return i.pending_buf[i.d_buf+2*i.last_lit]=k>>>8&255,i.pending_buf[i.d_buf+2*i.last_lit+1]=255&k,i.pending_buf[i.l_buf+i.last_lit]=255&P,i.last_lit++,k===0?i.dyn_ltree[2*P]++:(i.matches++,k--,i.dyn_ltree[2*(e[P]+g+1)]++,i.dyn_dtree[2*C(k)]++),i.last_lit===i.lit_bufsize-1},w._tr_align=function(i){G(i,2,3),j(i,b,q),function(k){k.bi_valid===16?(J(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(i)}},{"../utils/common":41}],53:[function(p,I,w){I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(p,I,w){(function(d){(function(o,s){if(!o.setImmediate){var u,_,f,g,m=1,r={},h=!1,n=o.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(o);l=l&&l.setTimeout?l:o,u={}.toString.call(o.process)==="[object process]"?function(x){process.nextTick(function(){v(x)})}:function(){if(o.postMessage&&!o.importScripts){var x=!0,S=o.onmessage;return o.onmessage=function(){x=!1},o.postMessage("","*"),o.onmessage=S,x}}()?(g="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(x){o.postMessage(g+x,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(x){v(x.data)},function(x){f.port2.postMessage(x)}):n&&"onreadystatechange"in n.createElement("script")?(_=n.documentElement,function(x){var S=n.createElement("script");S.onreadystatechange=function(){v(x),S.onreadystatechange=null,_.removeChild(S),S=null},_.appendChild(S)}):function(x){setTimeout(v,0,x)},l.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var S=new Array(arguments.length-1),R=0;R<S.length;R++)S[R]=arguments[R+1];var O={callback:x,args:S};return r[m]=O,u(m),m++},l.clearImmediate=a}function a(x){delete r[x]}function v(x){if(h)setTimeout(v,0,x);else{var S=r[x];if(S){h=!0;try{(function(R){var O=R.callback,L=R.args;switch(L.length){case 0:O();break;case 1:O(L[0]);break;case 2:O(L[0],L[1]);break;case 3:O(L[0],L[1],L[2]);break;default:O.apply(s,L)}})(S)}finally{a(x),h=!1}}}}function b(x){x.source===o&&typeof x.data=="string"&&x.data.indexOf(g)===0&&v(+x.data.slice(g.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof Dt<"u"?Dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ge);var Hr=ge.exports;const Vr=Ge(Hr);var we={exports:{}};(function(st,V){(function(p,I){I()})(Dt,function(){function p(_,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function I(_,f,g){var m=new XMLHttpRequest;m.open("GET",_),m.responseType="blob",m.onload=function(){u(m.response,f,g)},m.onerror=function(){console.error("could not download file")},m.send()}function w(_){var f=new XMLHttpRequest;f.open("HEAD",_,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function d(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Dt=="object"&&Dt.global===Dt?Dt:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(_,f,g){var m=o.URL||o.webkitURL,r=document.createElement("a");f=f||_.name||"download",r.download=f,r.rel="noopener",typeof _=="string"?(r.href=_,r.origin===location.origin?d(r):w(r.href)?I(_,f,g):d(r,r.target="_blank")):(r.href=m.createObjectURL(_),setTimeout(function(){m.revokeObjectURL(r.href)},4e4),setTimeout(function(){d(r)},0))}:"msSaveOrOpenBlob"in navigator?function(_,f,g){if(f=f||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(p(_,g),f);else if(w(_))I(_,f,g);else{var m=document.createElement("a");m.href=_,m.target="_blank",setTimeout(function(){d(m)})}}:function(_,f,g,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof _=="string")return I(_,f,g);var r=_.type==="application/octet-stream",h=/constructor/i.test(o.HTMLElement)||o.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent);if((n||r&&h||s)&&typeof FileReader<"u"){var l=new FileReader;l.onloadend=function(){var b=l.result;b=n?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=b:location=b,m=null},l.readAsDataURL(_)}else{var a=o.URL||o.webkitURL,v=a.createObjectURL(_);m?m.location=v:location.href=v,m=null,setTimeout(function(){a.revokeObjectURL(v)},4e4)}});o.saveAs=u.saveAs=u,st.exports=u})})(we);var Gr=we.exports;const Kr={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none"};function qr(st,V){return Q(),rt("svg",Kr,V[0]||(V[0]=[Ke('<g stroke="currentColor" stroke-width="1.67" clip-path="url(#a)"><path stroke-linecap="round" stroke-linejoin="round" d="m9.5 12 2.5 2.497L14.5 12M11.998 14.494V9.5"></path><path d="M15 4.446V3a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h1.446"></path><rect width="14" height="14" x="5" y="5" rx="2"></rect></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h20v20H0z"></path></clipPath></defs>',2)]))}const pe={render:qr},Yr={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-file",viewBox:"0 0 24 24"};function Xr(st,V){return Q(),rt("svg",Yr,V[0]||(V[0]=[T("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"},null,-1),T("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"},null,-1)]))}const Jr={render:Xr},Qr={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-mouse-pointer-click",viewBox:"0 0 24 24"};function ts(st,V){return Q(),rt("svg",Qr,V[0]||(V[0]=[T("path",{d:"M14 4.1 12 6M5.1 8l-2.9-.8M6 12l-1.9 2M7.2 2.2 8 5.1M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"},null,-1)]))}const es={render:ts},ns={class:"content"},rs={key:0,class:"classList"},ss={class:"header"},is={class:"title"},as={class:"btns"},os={class:"svg"},ls={class:"main"},cs={class:"classTitle"},us=["onClick"],ds={key:0,class:"classFiles"},hs={class:"timeTitle"},fs={class:"fileList"},ps=["onClick"],ms={class:"fileInfo"},_s={class:"fileNameContainer"},vs={class:"fileNameDiv"},gs={class:"fileNameSpan"},ws={class:"time"},bs={class:"custom-tooltip"},ys=["onClick"],ks=["onClick"],xs={key:1,class:"empty"},Ss={class:"emptyIcon"},Cs={class:"emptyText"},Es={key:1,class:"batchDownloadList"},zs={class:"header"},As={class:"batchMain"},Is={class:"batchMainContent"},Os={class:"timeTitle"},Ts={class:"fileList"},Bs={class:"timeContainer"},Ds={class:"fileName"},Rs={class:"time"},Ls={class:"batchFooter"},Fs={class:"span"},Ms={__name:"fileClass",setup(st){const V=Mt(),{messages:p}=Tt(V),{t:I}=jt(),w=ot(!1),d=ot(!1),o=ot("all"),s=ot(!1),u=ot({}),_=ot(""),f=ot(!1),g=ot(!1),m=qe([]),r=()=>{const A=Se.viewLocal(p.value,!1),Y=new Map(m.map($=>[$.id,$.selected]));m.length=0,A.forEach($=>{m.push({...$,selected:Y.get($.id)??!1})})};r(),$t(p,r,{deep:!0});const h=["all","document","image","codeFile","link"],n={link:["com"],codeFile:["js","css","html","java","c#","cpp","py","go","php","ruby","swift","kotlin","scala","rust"],image:["jpg","jpeg","png","gif","bmp","svg","tiff","webp","ico"],document:["doc","docx","xls","xlsx","ppt","pptx","pdf","txt","md"]},l=wt(()=>(console.log("chooseClassType.value",o.value),o.value==="all"?m:m.filter(A=>{var $;const Y=A.filename.split(".").pop().toLowerCase();return($=n[o.value])==null?void 0:$.includes(Y)}))),a=wt(()=>O(l.value)),v=ot(!1),b=wt(()=>{const A=l.value;if(A.length===0)return!1;const Y=A.some(K=>K.selected),$=A.every(K=>K.selected);return Y&&!$}),x=()=>{v.value=!v.value,l.value.forEach(A=>{A.selected=v.value})},S=()=>{const A=l.value;if(A.length===0){v.value=!1;return}v.value=A.every(Y=>Y.selected)},R=wt(()=>Object.values(a.value).some(A=>A.some(Y=>Y.selected)));$t(R,A=>{g.value=!A},{immediate:!0}),$t(l,A=>{S()},{immediate:!0});function O(A){s.value=A.length==0;const Y=new Date;Y.setHours(0,0,0,0);const $=new Date(Y);$.setDate($.getDate()-1);const K={today:[],yesterday:[],earlier:[]};return A.sort((z,C)=>new Date(C.timestamp)-new Date(z.timestamp)),A.forEach(z=>{const C=new Date(z.timestamp);C.setHours(0,0,0,0),C.getTime()===Y.getTime()?K.today.push(z):C.getTime()===$.getTime()?K.yesterday.push(z):K.earlier.push(z)}),Object.fromEntries(Object.entries(K).filter(([z,C])=>C.length>0))}const L=()=>{d.value=!1},B=()=>{w.value=!0},W=()=>{w.value=!1,v.value=!1,m.forEach(A=>{A.selected=!1})};async function q(A){u.value[A.id]=!1,Xt.handleFileDownload(A)}const y=A=>{Xt.imgType.includes(A.filename.split(".").pop())?Jt.getFile(A.filepath).then(Y=>{_.value=URL.createObjectURL(Y),f.value=!0}):zt.emit("fullPreviewVisable",A),d.value=!1},F=A=>{Xt.imgType.includes(A.filename.split(".").pop())?Jt.getFile(A.filepath).then(Y=>{_.value=URL.createObjectURL(Y),f.value=!0}):y(A),u.value[A.id]=!1},e=A=>{u.value[A]=!u.value[A]},U=(A,Y)=>{u.value[A]=Y};async function it(){if(g.value)return;const A=Object.values(a.value).flat().filter(K=>K.selected);if(A.length===0){w.value=!1;return}console.log("selectedFiles",A);const Y=new Vr,$=A.map(async K=>{const z=K.filename.split("/").pop(),C=await Jt.getFile(K.filepath);console.log("fileContent",C);const J=z.split(".").pop().toLowerCase(),G=n.image.includes(J)||["pdf","doc","docx","xls","xlsx","ppt","pptx","zip","rar"].includes(J);let j=C;!G&&typeof C!="string"&&(j=typeof C=="object"?JSON.stringify(C,null,2):String(C)),Y.file(z,j,{binary:G})});try{await Promise.all($);const K=await Y.generateAsync({type:"blob"});Gr.saveAs(K,`files_${new Date().toISOString().slice(0,10)}.zip`)}catch(K){console.error("Error creating ZIP file:",K)}w.value=!1,v.value=!1,m.forEach(K=>{K.selected=!1})}return zt.on("file-explorer-visible",()=>{d.value=!0}),(A,Y)=>{const $=Ye,K=Xe,z=Gt,C=Kt;return Q(),rt(Ct,null,[tt(C,{open:d.value,footer:null,style:{width:"600px","background-color":"#fff","border-color":"hsla(0, 0%, 100%, .05)","border-width":"1px","border-radius":"20px",overflow:"auto","flex-direction":"column","max-width":"95%","max-height":"95%",height:"680px",padding:"0px"},closable:!1,onCancel:L,centered:!0,class:"modal"},{default:pt(()=>[T("div",ns,[w.value?(Q(),rt("div",Es,[T("div",zs,[T("div",{class:"selectAll",onClick:x},[tt(K,{checked:v.value,"onUpdate:checked":Y[1]||(Y[1]=J=>v.value=J),indeterminate:b.value},null,8,["checked","indeterminate"]),T("span",null,at(A.$t("lemon.fileExplorer.selectAll")),1)]),T("span",{class:"cancel",onClick:W},at(A.$t("lemon.fileExplorer.cancel")),1)]),T("div",As,[T("div",Is,[(Q(!0),rt(Ct,null,It(a.value,(J,G)=>(Q(),rt("div",{key:G,class:"timeGroup"},[T("h3",Os,at(A.$t(`lemon.fileExplorer.timeGroups.${G}`)),1),T("div",Ts,[(Q(!0),rt(Ct,null,It(J,j=>(Q(),rt("div",{key:j.id,class:"fileItem"},[tt(K,{checked:j.selected,"onUpdate:checked":ht=>j.selected=ht,onChange:S},null,8,["checked","onUpdate:checked"]),tt(te,{url:j.filepath,filepath:j.filepath,class:"svgItem"},null,8,["url","filepath"]),T("div",Bs,[T("span",Ds,at(j.filename.split("/").pop().split("\\").pop()),1),T("span",Rs,at(lt(he)(j.timestamp)),1)])]))),128))])]))),128))])]),T("div",Ls,[tt(z,{type:"primary",onClick:it,class:Ft(["btnDownload",g.value?"disableDownload":"enableDownload"])},{default:pt(()=>[tt(lt(pe),{class:"svg"}),T("span",Fs,at(A.$t("lemon.fileExplorer.batchDownload")),1)]),_:1},8,["class"])])])):(Q(),rt("div",rs,[T("div",ss,[T("h1",is,at(A.$t("lemon.fileExplorer.allFilesInTask")),1),T("div",as,[T("div",os,[tt(lt(pe),{onClick:B,class:Ft(s.value?"disable":"svgDownload")},null,8,["class"])]),T("div",{class:"svg",onClick:L},[tt(lt(en),{class:"svgClose"})])])]),T("div",ls,[T("div",cs,[(Q(),rt(Ct,null,It(h,J=>T("div",{key:J,class:Ft(["classBtn",o.value===J?"active":""]),onClick:G=>o.value=J},at(A.$t(`lemon.fileExplorer.fileTypes.${J}`)),11,us)),64))]),s.value?s.value?(Q(),rt("div",xs,[T("div",Ss,[tt(lt(Jr))]),T("div",Cs,[T("span",null,at(A.$t("lemon.fileExplorer.noContent")),1)])])):bt("",!0):(Q(),rt("div",ds,[(Q(!0),rt(Ct,null,It(a.value,(J,G)=>(Q(),rt("div",{key:G,class:"timeGroup"},[T("h3",hs,at(A.$t(`lemon.fileExplorer.timeGroups.${G}`)),1),T("div",fs,[(Q(!0),rt(Ct,null,It(J,j=>(Q(),rt("div",{key:j.id,class:"fileItem",onClick:ht=>y(j)},[tt(te,{url:j.filename,filepath:j.filepath,class:"svgItem"},null,8,["url","filepath"]),T("div",ms,[T("div",_s,[T("div",vs,[T("span",gs,at(j.filename.split("/").pop().split("\\").pop()),1)]),T("span",ws,at(lt(he)(j.timestamp)),1)]),T("div",{class:"moreOption",onClick:Y[0]||(Y[0]=Lt(()=>{},["stop"]))},[tt($,{placement:"bottomRight",arrow:!1,color:"#ffffff",trigger:"click",visible:u.value[j.id]||!1,onVisibleChange:ht=>U(j.id,ht)},{title:pt(()=>[T("div",bs,[T("div",{class:"svg-tooltip",onClick:ht=>F(j)},[tt(lt(es)),Ot(" "+at(A.$t("lemon.fileExplorer.preview")),1)],8,ys),T("div",{class:"svg-tooltip",onClick:ht=>q(j)},[tt(lt(Ee)),Ot(" "+at(A.$t("lemon.fileExplorer.download")),1)],8,ks)])]),default:pt(()=>[tt(lt(Ce),{onClick:ht=>e(j.id)},null,8,["onClick"])]),_:2},1032,["visible","onVisibleChange"])])])],8,ps))),128))])]))),128))]))])]))])]),_:1},8,["open"]),tt(xe,{url:_.value,visible:f.value,onClose:Y[2]||(Y[2]=J=>f.value=!1)},null,8,["url","visible"])],64)}}},Ps=Rt(Ms,[["__scopeId","data-v-e8c0ea7c"]]),Us={class:"welcome-screen"},$s={class:"welcome-content"},Ns={key:0},js={key:1},Ws={key:0,class:"agent-loading"},Zs={class:"tip"},Hs={__name:"Welcome",props:{username:String},setup(st){const V=Mt(),p=qt(),{t:I}=jt(),{chatInfo:w,mode:d}=Tt(V),o=ot(!1),s=ot("Creating Agent...");function u(r="Creating Agent..."){s.value=r,o.value=!0}function _(r){s.value=r}function f(){o.value=!1}const g=async r=>{const{text:h,files:n,mcp_server_ids:l,is_public:a,workMode:v}=r,b=await V.createConversation(h,d.value),{conversation_id:x}=b;if(d.value==="chat"&&x)p.push(`/grace/chat/${x}`),await Nt.sendMessage(h,x,[],l,v);else{u("Creating Agent..."),await new Promise(R=>setTimeout(R,1e3)),_("Learning from the Experience base...");let S=await ve.generate(h,x,a);f(),zt.emit("selectedAgent",S),p.push(`/grace/${S.id}/${x}`),await Nt.sendMessage(h,x,n,l,v)}};wt(()=>d.value==="chat"?"ChatBot":"Agent");const m=()=>{console.log("toggleMobileMenu"),zt.emit("toggleMobileMenu",!0)};return(r,h)=>(Q(),rt("div",Us,[T("div",{class:"welcome-header"},[T("button",{class:"mobile-menu-btn",onClick:m},h[0]||(h[0]=[T("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M3 12H21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),T("path",{d:"M3 6H21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),T("path",{d:"M3 18H21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),h[2]||(h[2]=T("div",{class:"welcome-mode"},null,-1)),T("div",$s,[T("h1",null,at(r.$t("lemon.welcome.greeting",{username:st.username})),1),lt(d)=="chat"?(Q(),rt("p",Ns,at(r.$t("lemon.welcome.question")),1)):(Q(),rt("p",js,"Create, Training, Evoloving you new Agent")),tt(oe,{onSend:g})]),o.value?(Q(),rt("div",Ws,[h[1]||(h[1]=T("div",{class:"loader"},null,-1)),T("p",Zs,at(s.value),1)])):bt("",!0)]))}},Vs=Rt(Hs,[["__scopeId","data-v-a7da44fb"]]),Gs={class:"welcome-mode"},Ks={key:0,class:"dropdown-menu"},qs={class:"welcome-content"},Ys={__name:"AgentWelcome",props:{username:String},setup(st){const V=Mt(),p=qt(),{t:I}=jt(),{mode:w,agent:d}=Tt(V),o=ot(null),s=ot(!1),u=()=>{console.log("editKnowledge"),g.value=!1,o.value.visible=!0},_=()=>{g.value=!1,s.value=!0},f=async h=>{const{text:n,files:l,mcp_server_ids:a,workMode:v}=h,b=await V.createConversation(n,w.value),{conversation_id:x}=b;x&&p.push(`/grace/${d.value.id}/${x}`),w.value==="chat"?await Nt.sendMessage(n,x,[],a,v):await Nt.sendMessage(n,x,l,a,v)};wt(()=>"Agent");const g=ot(!1),m=()=>{g.value=!g.value},r=()=>{g.value=!1};return(h,n)=>(Q(),rt("div",{class:"welcome-screen",onClick:r},[T("div",Gs,[T("span",null,at(lt(d).name),1),T("div",{class:"dropdown-icon-wrapper",onClick:Lt(m,["stop"])},[tt(lt(Je),{class:"dropdown-icon"}),g.value?(Q(),rt("div",Ks,[T("div",{class:"menu-item",onClick:Lt(_,["stop"])},[tt(lt(Qe),{class:"icon"}),n[2]||(n[2]=Ot(" Edit "))]),T("div",{class:"menu-item",onClick:Lt(u,["stop"])},[tt(lt(un),{class:"icon"}),n[3]||(n[3]=Ot(" Knowledge "))])])):bt("",!0)])]),T("div",qs,[T("h1",null,at(h.$t("lemon.welcome.greeting",{username:st.username})),1),n[4]||(n[4]=T("p",null,"Create, Training, Evoloving you new Agent",-1)),tt(oe,{onSend:f})]),tt(dn,{ref_key:"knowledgeModalRef",ref:o,agentId:null},null,512),tt(hn,{visible:s.value,"onUpdate:visible":n[0]||(n[0]=l=>s.value=l),id:lt(d).id,"onUpdate:id":n[1]||(n[1]=l=>lt(d).id=l)},null,8,["visible","id"])]))}},Xs=Rt(Ys,[["__scopeId","data-v-7338dae4"]]);function Js(st){console.log("convertToTree",st);const V=new Map;st.forEach(I=>{console.log("msg",I);let w=I.meta;typeof w=="string"&&(w=JSON.parse(w)),V.set(I.id,{id:I.id,pid:w.pid,role:I.role,content:I.content,is_active:w.is_active,children:[]})}),console.log("messageMap",V);const p=[];return V.forEach(I=>{if(I.pid===-1)p.push(I);else{const w=V.get(I.pid);w&&w.children.push(I)}}),p.sort((I,w)=>I.id-w.id),p}const Qs={convertToTree:Js},ti=se(),St=Mt(),{chatInfo:ei,mode:ni,model_id:ri,agent:si}=Tt(St),{membership:ii,points:ai}=Tt(ti),Qt=re();async function oi(){const st=localStorage.getItem("model_info");if(st&&!JSON.parse(st).is_subscribe)return;let V=await an.getUserInfo();ii.value=V.membership,ai.value=V.points}const li=async(st,V)=>{st.forEach(async p=>{await ne.putFile(p.id,V)})},ci=st=>{},ui=()=>{console.log("throttledScrollToBottom")},di=async(st,V,p,I=[],w="auto")=>{const d=new AbortController;let o=[];p&&p.length>0&&(o=p.map(l=>l.id),p=p.map(l=>{const a=`${l.workspace_dir}/Conversation_${V.slice(0,6)}/upload/${l.name}`,v=l.name;return{...l,filepath:a,filename:v}}),await li(p,V));let s=St.list.find(l=>l.conversation_id==V);s&&(s.status="running");const u=Qt.selectedHtml,_=Qt.selectedPath,f=Qt.selectedScreenshot;St.handleInitMessage(st,p,f,_);let g="/api/agent/coding/sse",m={requirement:st,selection:u,screenshot:f,filepath:_,agent_id:si.value.id,conversation_id:V,fileIds:o,mcp_server_ids:I,model_id:ri.value,mode:w};console.log("options",m),console.log("mode.value",ni.value),console.log("chatInfo.value",ei.value);let r=null;const h=(l,a,v)=>{let b=St.list.find(S=>S.conversation_id==v);if(b&&b.status==="done")return;const x=St.conversationId;if(console.log("onTokenStream",a),a.startsWith("__lemon_mode__"))try{const S=a.substring(14);r=JSON.parse(S).mode;const O=St.messages.findLastIndex(L=>L.role==="assistant"&&L.is_temp===!0);if(O!==-1){const L=St.messages[O];r=="chat"?(L.meta={action_type:"chat"},L.content=""):L.content=de.global.t("lemon.message.botInitialResponse")}else if(r=="chat"){const L={content:"",role:"assistant",meta:{action_type:"chat"},is_temp:!0};St.messages.push(L)}else{const L={content:de.global.t("lemon.message.botInitialResponse"),role:"assistant",is_temp:!0};St.messages.push(L)}return}catch(S){console.error("Failed to parse mode data:",S);return}a&&a.startsWith("{")&&a.endsWith("}")&&x===v&&hi(a)},n="";St.incrementUserMessageCount(),ze(g,m,h,ci(),n,ui,d,V).then(l=>l).catch(l=>(console.error(l),"")).finally(()=>{zt.emit("coding-message-sent",{conversationId:V});const l=St.list.find(a=>a.conversation_id==V);l&&(l.status="done"),oi()})};function hi(st,V){let p;try{p=JSON.parse(st)}catch{console.error("Failed to parse JSON:",st);return}console.log("=== ch === ",p);const I=St.messages,w=fi(I);w!==-1&&I.splice(w,1),nn.handleMessage(p,I),St.scrollToBottom()}function fi(st){return st.findIndex(V=>V.is_temp===!0&&V.role==="assistant")}const pi={sendMessage:di},mi={class:"chat-panel"},_i={key:1,class:"chat-panel-content"},vi={__name:"ChatPanel",setup(st){const V=Mt(),p=_e(),{chatInfo:I,mode:w}=Tt(V),d=re(),o=async h=>{const{text:n,mode:l,files:a,mcp_server_ids:v,workMode:b}=h;if(d.showSelectionPreview){d.setShowSelectionPreview(!1),await pi.sendMessage(n,V.chat.conversation_id,a,v,b);return}await Nt.sendMessage(n,V.chat.conversation_id,a,v,b)},s=ot(p.params.id),u=wt(()=>p.params.agentId&&p.params.agentId!="chat");tn(()=>{console.log("route.params",p.params),s.value=p.params.id,p.params.id||(V.conversationId=null,V.chat=null,V.messages=[])});const _=wt(()=>V.chat);ot("");const f=wt(()=>{switch(console.log("出发了messages computed"),w.value){case"task":return V.messages;case"chat":return console.log("chatInfo.value.msgList",I.value.msgList),Qs.convertToTree(I.value.msgList);default:return V.messages}}),g=ot(!1);ie(()=>{const h=document.querySelector(".chat-messages");if(!h)return!1;h.addEventListener("scroll",()=>{h.scrollHeight-h.scrollTop-h.clientHeight>200?g.value=!0:g.value=!1}),zt.on("openComputerPreview",()=>{var l;const n=(l=f.value)==null?void 0:l[f.value.length-1];n&&zt.emit("preview",{message:n})})});const m=()=>{const h=document.querySelector(".chat-messages");if(!h)return!1;h.scrollTop=h.scrollHeight-h.clientHeight};ot(!1);const r=()=>{};return(h,n)=>{var l;return Q(),rt(Ct,null,[T("div",mi,[u.value&&!s.value?(Q(),kt(Xs,{key:0,class:"welcome"})):s.value?(Q(),rt("div",_i,[tt(Ae,{title:(l=_.value)==null?void 0:l.title,onShare:r},null,8,["title"]),tt(Ie,{messages:f.value,mode:lt(w)},null,8,["messages","mode"]),tt(oe,{onSend:o}),g.value?(Q(),rt("div",{key:0,class:"scroll-to-bottom",onClick:m},[tt(lt(Zr))])):bt("",!0)])):(Q(),kt(Vs,{key:2,class:"welcome"})),tt(Ps)]),tt(Oe,{class:"preview"}),tt(Te,{class:"preview"})],64)}}},Ri=Rt(vi,[["__scopeId","data-v-e8a26026"]]);export{Ri as default};
