import{p as g,u as _,r as i,s as m,L as f,o as w,f as l,g as v,d as u,l as y,e as n,v as S,S as k,x,w as C,y as b,h as p,j as L,t as P}from"./index-y24F1-rU.js";import{s as T}from"./auth-BN2fB74f.js";import"./http-D7M9oJmQ.js";const U={class:"callback-container"},V={class:"animation-wrapper"},B={key:0,class:"loading-text"},G={__name:"GoogleCallback",setup(N){const{t:r}=_(),d=v(),o=i(0),c=i(!1),h=m(f,{style:{fontSize:"48px",color:"#4f46e5"},spin:!0});return w(async()=>{setTimeout(()=>c.value=!0,300);const t=()=>{o.value<80&&(o.value+=10,setTimeout(t,300))};t();let e;if(window.location.search)e=new URLSearchParams(window.location.search);else{const s=window.location.hash.split("?")[1];e=new URLSearchParams(s)}if(console.log("urlParams:",e.has("code")),e.has("code"))try{const s="http://localhost:5005/api/users/auth/google";console.log("redirectUri",s),await T.googleAuth(e.get("code"),s),o.value=100,l.success(r("auth.loginSuccessful")),setTimeout(()=>d.push({name:"grace"}),500)}catch(a){l.error(r("auth.loginFailed")+": "+a.message)}}),(t,e)=>{const a=k,s=x;return p(),u("div",U,[y("div",V,[n(a,{size:"large",indicator:S(h),class:"spin-animation"},null,8,["indicator"]),n(s,{percent:o.value,"show-info":!1,"stroke-color":"#4f46e5",class:"progress-bar"},null,8,["percent"])]),n(b,{name:"fade"},{default:C(()=>[c.value?(p(),u("p",B,P(t.$t("Verifying Google Login...")),1)):L("",!0)]),_:1})])}}},j=g(G,[["__scopeId","data-v-f48d5ba5"]]);export{j as default};
