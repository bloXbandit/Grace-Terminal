import{p as G,d as i,h as n,l as e,g as re,a as fe,a3 as oe,r as p,c as ne,a7 as Me,o as ce,ab as ue,e as o,v as d,F as X,D as le,aT as N,ak as W,j as D,i as Ve,t as h,aN as Be,k as se,aW as He,aH as ze,aX as De,w as A,$ as $e,a1 as pe,f as Ee,ae as xe,a2 as ye,u as ge,H as ae,ac as ie,A as Ue,aY as Se,B as Pe,q as Ne}from"./index-DgcqBZ_P.js";import{l as Oe}from"./lemon-BOZR-6gf.js";import{R as Re,A as Ie,K as Te,s as ke}from"./KnowledgeModal-DGrfoBOu.js";import{e as c}from"./emitter-E5P-NQ8u.js";import{u as de,f as he,c as Ae,M as je,e as We}from"./edit-B_F6FZym.js";import{s as Ce}from"./auth-CYXfa530.js";import{s as Fe}from"./default-model-setting-BtbBz0WH.js";import{A as Ze}from"./driver-BxHdV7Lz.js";import"./mcp-Dtb42yOP.js";import"./http-DmdJyNsP.js";import"./index-TjCxX7sJ.js";const Ke={class:"logo-title"},qe={__name:"logo",setup(C){return(l,v)=>(n(),i("div",Ke,v[0]||(v[0]=[e("img",{src:Oe,alt:"Grace AI",class:"logo-image"},null,-1)])))}},Xe=G(qe,[["__scopeId","data-v-819e983e"]]),Ge={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",stroke:"#8f8f8f","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-search h-5 w-5 text-var(--icon-secondary)",viewBox:"0 0 24 24"};function Ye(C,l){return n(),i("svg",Ge,l[0]||(l[0]=[e("circle",{cx:"11",cy:"11",r:"8"},null,-1),e("path",{d:"m21 21-4.3-4.3"},null,-1)]))}const me={render:Ye},Je={class:"agent"},Qe={class:"agent-header"},et={class:"agent-list"},tt=["onMouseenter","onClick"],st=["title"],ot=["onClick"],nt=["onClick"],lt=["onClick"],at=["onClick"],it={class:"search-header"},rt={class:"search-header-icon"},ct={class:"search-content"},ut=["onClick"],dt={class:"search-item-content"},vt={class:"search-item-name"},pt={class:"search-item-time"},ht={key:0,class:"no-results"},mt={__name:"index",setup(C){const l=re(),v=fe(),B=de(),{agent:L,conversationId:y}=oe(B),w=p([]),E=p(!1),m=p(null),M=p(null),g=p(null),I=p(null),$=p(null),U=p({}),V=p(!1),a=p(""),b=p(null),x=ne(()=>a.value.trim()?w.value.filter(t=>t.name.toLowerCase().includes(a.value.toLowerCase())):w.value),F=async()=>{var t;V.value=!0,a.value="",await xe(),(t=b.value)==null||t.focus()},S=()=>{V.value=!1,a.value=""};function O(t){E.value=!0,m.value=t}function j(t){pe.confirm({title:"Confirm Delete",content:"Are you sure you want to delete this agent?",onOk:async()=>{await ke.delete(t),H(),Ee.success("Delete Success"),l.push("/grace")}})}const q=()=>{c.emit("preview-close",!1),c.emit("terminal-visible",!1),c.emit("fullPreviewVisable-close")};function Y(t){m.value=t,M.value.visible=!0}function J(t,s){I.value=I.value===t?null:t;const k=s.currentTarget.getBoundingClientRect(),z=120,r=8;let T=0;window.innerHeight-k.bottom<z+r?T=k.top-z+25:T=k.bottom,U.value={position:"fixed",top:`${T}px`,left:`${k.left}px`,zIndex:99999}}const H=async()=>{let t=await ke.getList();t.sort((s,k)=>new Date(k.create_at)-new Date(s.create_at)),w.value=t};c.on("updateAgentList",H),c.on("addAgent",Z),c.on("selectedAgent",Q);function Z(t){H(),R(t,!0,!1)}function Q(t){const s=w.value.find(k=>k.id===t.id);s?R(s,!0,!1):Z(t)}async function R(t,s=!1,k=!0){var z,r;t&&(q(),V.value=!1,$.value=((z=$.value)==null?void 0:z.id)===t.id?null:t,m.value=((r=$.value)==null?void 0:r.id)??null,L.value=t,await B.init("task"),k&&await B.selectFirst(),window.innerWidth<=768&&c.emit("toggleMobileMenu",!1),s&&(y.value?l.push(`/grace/${L.value.id}/${y.value}`):l.push(`/grace/${L.value.id}`)))}Me(()=>v.params.agentId,t=>{t||($.value=null)});function K(){I.value=null}return ce(async()=>{await H();const t=v.params.agentId;if(t&&t!="chat"){const s=w.value.find(k=>k.id==t);s&&R(s,!1)}window.addEventListener("click",K)}),ue(()=>{window.removeEventListener("click",K)}),(t,s)=>{const k=$e,z=pe;return n(),i(X,null,[e("div",Je,[e("div",Qe,[s[6]||(s[6]=e("span",{class:"disabled"},"Agents",-1)),e("span",null,[o(d(me),{class:"search-icon",onClick:F})])]),e("div",et,[(n(!0),i(X,null,le(w.value,r=>{var T;return n(),i("div",{key:r.id,class:W(["agent-item",{active:((T=$.value)==null?void 0:T.id)===r.id}]),onMouseenter:P=>g.value=r.id,onMouseleave:s[1]||(s[1]=P=>g.value=null),onClick:N(P=>R(r,!0),["stop"])},[e("span",{class:"agent-name",title:r.name.length>20?r.name:null},h(r.name),9,st),g.value===r.id?(n(),i("div",{key:0,class:"ellipsis",onClick:N(P=>J(r.id,P),["stop"])}," â‹¯ ",8,ot)):D("",!0),(n(),Ve(De,{to:"body"},[I.value===r.id?(n(),i("div",{key:0,class:"menu",style:Be(U.value),onMouseleave:s[0]||(s[0]=P=>I.value=null)},[e("div",{class:"menu-item",onClick:N(P=>O(r.id),["stop"])},[o(d(He),{class:"icon"}),s[7]||(s[7]=se(" Edit "))],8,nt),e("div",{class:"menu-item",onClick:N(P=>Y(r.id),["stop"])},[o(d(Re),{class:"icon"}),s[8]||(s[8]=se(" Experience "))],8,lt),e("div",{class:"menu-item danger",onClick:N(P=>j(r.id),["stop"])},[o(d(ze),{class:"icon"}),s[9]||(s[9]=se(" Delete "))],8,at)],36)):D("",!0)]))],42,tt)}),128))])]),o(Ie,{visible:E.value,"onUpdate:visible":s[2]||(s[2]=r=>E.value=r),id:m.value,"onUpdate:id":s[3]||(s[3]=r=>m.value=r)},null,8,["visible","id"]),o(Te,{agentId:m.value,ref_key:"knowledgeModalRef",ref:M},null,8,["agentId"]),o(z,{footer:null,centered:!0,open:V.value,"onUpdate:open":s[5]||(s[5]=r=>V.value=r),onCancel:S,closable:!1},{title:A(()=>[e("div",it,[e("div",rt,[o(d(me))]),o(k,{ref_key:"searchInputRef",ref:b,value:a.value,"onUpdate:value":s[4]||(s[4]=r=>a.value=r),placeholder:"Search Agents..."},null,8,["value"]),e("div",{class:"search-header-icon",onClick:S},[o(d(Ae))])])]),default:A(()=>[e("div",ct,[(n(!0),i(X,null,le(x.value,r=>(n(),i("div",{key:r.id,class:"search-item",onClick:T=>R(r,!0)},[e("div",dt,[e("div",vt,h(r.name),1),e("div",pt,h(d(he)(r.create_at)),1)])],8,ut))),128)),x.value.length===0&&a.value.trim()?(n(),i("div",ht,' No agents found for "'+h(a.value)+'" ',1)):D("",!0)])]),_:1},8,["open"])],64)}}},ft=G(mt,[["__scopeId","data-v-f5feb24a"]]),gt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"#F25A5A","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-4 w-4",color:"#468ff6",viewBox:"0 0 24 24"};function _t(C,l){return n(),i("svg",gt,l[0]||(l[0]=[e("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"},null,-1)]))}const wt={render:_t},kt={class:"user-center-popup"},Ct={key:0,class:"userInfo"},bt={class:"userName"},Mt={class:"userEmail"},$t={key:1,class:"memberInfo"},xt={key:2},yt={__name:"user-profile",props:{show:{type:Boolean,default:!1}},setup(C){const l=ye(),{user:v,membership:B,points:L}=oe(l),y=re(),{t:w}=ge(),E=ne(()=>v.user_name||v.mobile||v.user_email),m=()=>{y.push({name:"pricing"})},M=()=>{y.push({path:"/setting/basic"})},g=ne(()=>!!v.value.id),I=async()=>{await Ce.logout(),window.location.reload()},$=async()=>{y.push({name:"login"})},U=()=>{y.push({path:"/setting/usage"})};async function V(){if(!g.value)return;let a=await Ce.getUserInfo();B.value=a.membership,L.value=a.points}return ce(()=>{xe(()=>{V()})}),(a,b)=>{var x;return n(),i("div",kt,[g.value?(n(),i("div",Ct,[e("div",bt,h(E.value),1),e("div",Mt,h(d(v).user_email),1)])):D("",!0),g.value?(n(),i("div",$t,[e("span",null,h(((x=d(B))==null?void 0:x.planName)||a.$t("member.freePlan")),1),e("button",{onClick:m,class:"upgrade"},h(a.$t("member.upgrade")),1)])):D("",!0),g.value?(n(),i("div",xt,[e("div",{class:"score",onClick:U},[e("div",null,[b[0]||(b[0]=e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M15.2102 1.57437C15.2709 1.39188 15.529 1.39188 15.5897 1.57437L15.9325 2.60482C16.1315 3.20299 16.6008 3.67234 17.199 3.87131L18.2294 4.21408C18.4119 4.27478 18.4119 4.53293 18.2294 4.59363L17.199 4.9364C16.6008 5.13537 16.1315 5.60472 15.9325 6.20289L15.5897 7.23334C15.529 7.41583 15.2709 7.41583 15.2102 7.23334L14.8674 6.20289C14.6684 5.60472 14.1991 5.13537 13.6009 4.9364L12.5705 4.59363C12.388 4.53293 12.388 4.27478 12.5705 4.21408L13.6009 3.87131C14.1991 3.67234 14.6684 3.20299 14.8674 2.60482L15.2102 1.57437Z",fill:"currentColor"}),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.10529 6.19431C7.64765 7.5701 6.56814 8.6496 5.19235 9.10724L2.42617 10.0274C1.96992 10.1791 1.96992 10.8245 2.42617 10.9763L5.19236 11.8964C6.56815 12.354 7.64765 13.4335 8.10529 14.8093L9.02543 17.5755C9.17719 18.0318 9.82255 18.0318 9.97431 17.5755L10.8945 14.8093C11.3521 13.4335 12.4316 12.354 13.8074 11.8964L16.5736 10.9763C17.0298 10.8245 17.0298 10.1791 16.5736 10.0274L13.8074 9.10724C12.4316 8.6496 11.3521 7.5701 10.8945 6.19431L9.97431 3.42812C9.82255 2.97188 9.17719 2.97188 9.02543 3.42812L8.10529 6.19431ZM9.49987 7.22075C8.86634 8.69339 7.69143 9.86829 6.2188 10.5018C7.69143 11.1354 8.86634 12.3103 9.49987 13.7829C10.1334 12.3103 11.3083 11.1354 12.7809 10.5018C11.3083 9.86829 10.1334 8.69339 9.49987 7.22075Z",fill:"currentColor"})],-1)),e("span",null,h(a.$t("member.points")),1)]),e("span",null,h(d(L).total),1)])])):D("",!0),e("div",{onClick:M},[b[1]||(b[1]=e("svg",{t:"1744338498135",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5527",width:"20",height:"20"},[e("path",{d:"M439.816 101.851c-8.631-16.952-28.007-25.48-46.337-20.396-70.066 19.435-133.165 55.501-184.82 103.628-12.909 12.028-16.413 31.094-8.623 46.926 5.374 10.92 8.414 23.234 8.414 36.376 0 45.555-36.833 82.347-82.1 82.347-0.381 0-0.762-0.003-1.142-0.008-17.691-0.253-33.448 11.147-38.74 28.031C73.159 421.209 66 466.344 66 513.078c0 30.844 3.118 61.001 9.07 90.156 4.1 20.082 22.714 33.816 43.111 31.808a83.069 83.069 0 0 1 8.169-0.399c45.267 0 82.1 36.791 82.1 82.346 0 20.276-7.254 38.74-19.334 53.086-13.177 15.649-12.423 38.718 1.748 53.472 52.742 54.916 119.403 96.417 194.376 118.784 20.888 6.231 42.918-5.408 49.543-26.174 10.616-33.275 41.714-57.212 78.217-57.212s67.601 23.937 78.217 57.212c6.625 20.766 28.655 32.405 49.543 26.174 74.973-22.367 141.634-63.868 194.376-118.784 14.17-14.755 14.924-37.823 1.748-53.471-12.08-14.346-19.334-32.811-19.334-53.087 0-45.554 36.834-82.346 82.1-82.346 2.773 0 5.496 0.135 8.169 0.399 20.397 2.008 39.011-11.726 43.111-31.808 5.951-29.155 9.07-59.312 9.07-90.156 0-46.734-7.16-91.869-20.468-134.323-5.292-16.884-21.049-28.285-38.741-28.031-0.379 0.005-0.76 0.008-1.141 0.008-45.266 0-82.1-36.792-82.1-82.347 0-13.142 3.04-25.456 8.414-36.376 7.79-15.832 4.286-34.898-8.623-46.926-51.655-48.127-114.754-84.193-184.82-103.628-18.33-5.084-37.706 3.444-46.337 20.396-13.648 26.806-41.357 44.97-73.184 44.97-31.827 0-59.536-18.164-73.184-44.97zM288.45 268.385c0-14.471-1.9-28.535-5.47-41.936 31.114-25.118 66.377-45.232 104.576-59.156 29.686 36.285 74.82 59.528 125.444 59.528 50.624 0 95.758-23.243 125.444-59.528 38.199 13.924 73.462 34.038 104.576 59.156a162.748 162.748 0 0 0-5.47 41.936c0 79.513 57.113 145.772 132.604 159.667 6.434 27.261 9.846 55.723 9.846 85.026 0 14.581-0.845 28.951-2.485 43.065-79.109 10.814-139.965 78.769-139.965 160.846 0 26.162 6.201 50.922 17.202 72.84-30.829 27.076-66.197 49.043-104.786 64.612-28.717-45.337-79.271-75.496-136.966-75.496-57.695 0-108.249 30.159-136.966 75.496-38.589-15.569-73.957-37.536-104.787-64.612 11.002-21.918 17.203-46.678 17.203-72.84 0-82.077-60.856-150.032-139.965-160.846A373.007 373.007 0 0 1 146 513.078c0-29.304 3.411-57.765 9.845-85.026 75.492-13.894 132.605-80.154 132.605-159.667zM513 336c-97.202 0-176 78.798-176 176s78.798 176 176 176 176-78.798 176-176-78.798-176-176-176zM409 512c0-57.438 46.562-104 104-104s104 46.562 104 104-46.562 104-104 104-104-46.562-104-104z",fill:"#666","p-id":"5528"})],-1)),e("span",null,h(a.$t("settings")),1)]),g.value?(n(),i("div",{key:3,class:"logout",onClick:I},[o(d(wt)),e("span",null,h(a.$t("auth.logOut")),1)])):(n(),i("div",{key:4,class:"login",onClick:$},[b[2]||(b[2]=e("svg",{t:"1749714854005",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5537",width:"20",height:"20"},[e("path",{d:"M832 896H298.666667a104.533333 104.533333 0 0 1-106.666667-102.4v-101.973333h53.333333v102.826666A52.48 52.48 0 0 0 298.666667 845.653333h533.333333a52.48 52.48 0 0 0 53.333333-51.2V229.546667a52.48 52.48 0 0 0-53.333333-51.2H298.666667a52.48 52.48 0 0 0-53.333334 51.2v102.826666H192V229.546667A104.533333 104.533333 0 0 1 298.666667 128h533.333333A104.533333 104.533333 0 0 1 938.666667 229.546667v564.906666A104.533333 104.533333 0 0 1 832 896zM601.173333 352a25.6 25.6 0 0 1 0-36.693333 27.733333 27.733333 0 0 1 37.546667 0l184.32 177.066666a30.293333 30.293333 0 0 1 0 39.253334L640 708.693333a27.733333 27.733333 0 0 1-37.546667 0 25.173333 25.173333 0 0 1 0-36.266666l139.946667-134.826667H112.213333a25.6 25.6 0 1 1 0-51.2h628.906667z",fill:"#2c2c2c","p-id":"5538"})],-1)),e("span",null,h(a.$t("auth.login")),1)]))])}}},St=G(yt,[["__scopeId","data-v-955e913e"]]),It={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 19 18"};function At(C,l){return n(),i("svg",It,l[0]||(l[0]=[e("path",{"fill-rule":"evenodd",d:"M3.23 4.5a.75.75 0 0 1 .75-.75h11.28a.75.75 0 0 1 0 1.5H3.98a.75.75 0 0 1-.75-.75m0 4.5a.75.75 0 0 1 .75-.75h11.28a.75.75 0 0 1 0 1.5H3.98A.75.75 0 0 1 3.23 9m0 4.5a.75.75 0 0 1 .75-.75h7.533a.75.75 0 0 1 0 1.5H3.98a.75.75 0 0 1-.75-.75","clip-rule":"evenodd"},null,-1)]))}const be={render:At},Lt={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",stroke:"#34322d","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-plus h-4 w-4 text-[var(--icon-primary)]",viewBox:"0 0 24 24"};function Vt(C,l){return n(),i("svg",Lt,l[0]||(l[0]=[e("path",{d:"M5 12h14M12 5v14"},null,-1)]))}const Bt={render:Vt},Ht={xmlns:"http://www.w3.org/2000/svg",width:"38",height:"38",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-message-square-dashed",viewBox:"0 0 24 24"};function zt(C,l){return n(),i("svg",Ht,l[0]||(l[0]=[e("path",{d:"M10 17H7l-4 4v-7M14 17h1M14 3h1M19 3a2 2 0 0 1 2 2M21 14v1a2 2 0 0 1-2 2M21 9v1M3 9v1M5 3a2 2 0 0 0-2 2M9 3h1"},null,-1)]))}const Dt={render:zt},Et={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",stroke:"#f25a5a","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"lucide lucide-trash",viewBox:"0 0 24 24"};function Ut(C,l){return n(),i("svg",Et,l[0]||(l[0]=[e("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},null,-1)]))}const Pt={render:Ut},Nt={class:"menu-icon"},Ot={class:"sidebar-header"},Rt={class:"header-content"},Tt={class:"sidebar-new-task"},jt={class:"plus-icon"},Wt={key:0,class:"button-text"},Ft={key:1,class:"button-text"},Zt={class:"sidebar-content"},Kt={class:"chat-list"},qt=["onClick"],Xt={class:"chat-details"},Gt={class:"chat-header"},Yt={class:"chat-title"},Jt={class:"chat-time"},Qt=["title"],es={class:"chat-footer"},ts={class:"chat-model-info"},ss={key:0,class:"chat-model-name"},os={class:"more-options"},ns=["onClick"],ls=["onClick"],as={key:0,class:"no-chats"},is={class:"search-header"},rs={class:"search-header-icon"},cs={class:"search-content"},us=["onClick"],ds={class:"chat-details"},vs={class:"chat-header"},ps={class:"chat-title"},hs={class:"chat-time"},ms={key:0,class:"chat-footer"},fs=["title"],gs={__name:"secondMenu",props:{chats:{type:Array,default:()=>[]}},emits:["update:isCollapsed","selectChat","newChat","editChat","deleteChat"],setup(C,{emit:l}){const v=de(),{chatInfo:B,agent:L,conversationId:y,mode:w}=oe(v),{t:E}=ge(),m=re(),M=fe(),g=p(!0),I=p(!1),$=p(!1),U=()=>window.innerWidth<=768;function V(){if(console.log("route ===== ",M.path.includes("/lemon")),!M.path.includes("/lemon")){I.value=!1;return}I.value=!!M.params.agentId}V(),Me(()=>M.fullPath,()=>{V()});const a=p(null),b=p(!1),x=p(!1),F=p(!1),S=p(""),O=p(null),j=p(null),q=()=>{console.log("toggleCollapse",g),g.value=!g.value},Y=()=>{g.value=!0,v.conversationId=null,v.clearMessages(),setTimeout(()=>{c.emit("toggleMobileMenu",!0)},100),m.push("/lemon")},J=()=>{U()&&(console.log("handleOverlayClick"),H())},H=()=>{g.value=!0},Z=()=>{g.value=!1};c.on("close-collapse",H),c.on("open-collapse",Z),c.on("preview",()=>{console.log("Preview opened, hiding second-menu"),$.value=!0}),c.on("preview-close",()=>{console.log("Preview closed, showing second-menu"),$.value=!1}),c.on("fullPreviewVisable",()=>{console.log("Preview opened, hiding second-menu"),$.value=!0}),c.on("fullPreviewVisable-close",()=>{$.value=!1}),ue(()=>{c.off("close-collapse",H),c.off("open-collapse",Z),c.off("preview"),c.off("preview-close"),c.off("fullPreviewVisable"),c.off("fullPreviewVisable-close")});const Q=()=>{R(),v.conversationId=null,v.clearMessages(),w.value==="task"?m.push(`/grace/${L.value.id}`):m.push("/grace")},R=()=>{c.emit("preview-close",!1),c.emit("terminal-visible",!1),c.emit("fullPreviewVisable-close")},K=f=>{H(),R(),console.log("handleChatClick",f),v.conversationId=f.conversation_id,console.log("chatStore.conversationId",y.value),v.chat=f,v.clearMessages(),v.initConversation(f.conversation_id),w.value=="chat"?m.push(`/grace/chat/${f.conversation_id}`):m.push(`/grace/${L.value.id}/${f.conversation_id}`)},t=f=>{a.value=a.value===f?null:f},s=f=>{j.value=f,S.value=f.title,x.value=!0,a.value=null},k=()=>{x.value=!1,x.value=!1,v.updateConversationTitleById(S.value,j.value.conversation_id),j.value=null},z=()=>{x.value=!1,j.value=null},r=f=>{O.value=f,b.value=!0,a.value=null},T=async()=>{if(O.value)try{await v.removeConversation(O.value.conversation_id),b.value=!1,O.value=null,m.push("/grace")}catch(f){console.error("Failed to delete conversation:",f)}},P=()=>{b.value=!1,F.value=!1,O.value=null};return(f,_)=>{const Le=Se,_e=Pe,ve=pe,we=$e;return ae((n(),i("div",{class:W(g.value?"second-menu":"second-menu collapsed"),onClick:J},[g.value&&I.value&&!($.value&&U())?(n(),i("button",{key:0,class:"menu-button",onClick:N(q,["stop"])},[e("span",Nt,[o(d(be),{style:{width:"22px",height:"22px"}})])])):D("",!0),ae(e("div",{class:"sidebar-container",onClick:_[1]||(_[1]=N(()=>{},["stop"]))},[e("div",{class:W(["sidebar",{collapsed:g.value}])},[e("div",Ot,[e("div",Rt,[e("button",{class:"collapse-btn mobile-only",onClick:Y},[o(d(Ue),{style:{width:"20px",height:"20px"}})]),e("button",{class:"collapse-btn pc-only",onClick:q},[o(d(be),{style:{width:"20px",height:"20px"}})])])]),e("div",Tt,[e("button",{class:"new-task-button",onClick:Q},[e("span",jt,[o(d(Bt),{style:{width:"16px",height:"16px"}})]),d(w)=="task"?(n(),i("span",Wt,"New Task")):(n(),i("span",Ft,"New Chat"))])]),e("div",Zt,[e("div",Kt,[(n(!0),i(X,null,le(C.chats,u=>{var ee;return n(),i("div",{key:u.conversation_id,class:W(["chat-item",{active:u.conversation_id===d(y)}]),onClick:te=>K(u)},[e("div",Xt,[e("div",Gt,[e("div",Yt,h(u.title),1),e("div",Jt,h(d(he)(u.update_at,d(E))),1)]),e("div",{class:"chat-last-message",title:u.last_message},h((ee=u==null?void 0:u.latest_message)==null?void 0:ee.content),9,Qt),e("div",es,[e("div",ts,[u.model_name?(n(),i("div",ss,h(u.model_name),1)):D("",!0)]),e("div",os,[o(Le,{title:"More",placement:"top",arrow:!1},{default:A(()=>[o(d(je),{class:"more-options-icon",onClick:N(te=>t(u.conversation_id),["stop"])},null,8,["onClick"])]),_:2},1024),a.value===u.conversation_id?(n(),i("div",{key:0,class:"more-options-dropdown",onMouseleave:_[0]||(_[0]=te=>a.value=null)},[e("div",{class:"more-options-item",onClick:N(te=>s(u),["stop"])},[o(d(We)),_[7]||(_[7]=e("span",{class:"more-options-item-text"},"Rename",-1))],8,ns),e("div",{class:"more-options-item err",onClick:N(te=>r(u),["stop"])},[o(d(Pt)),_[8]||(_[8]=e("span",{class:"more-options-item-text"},"Delete",-1))],8,ls)],32)):D("",!0)])])])],10,qt)}),128)),C.chats.length?D("",!0):(n(),i("div",as,[o(d(Dt),{style:{width:"24px",height:"24px"}}),_[9]||(_[9]=e("span",null,"No Conversation",-1))]))])])],2)],512),[[ie,!g.value&&I.value]]),o(ve,{open:b.value,"onUpdate:open":_[2]||(_[2]=u=>b.value=u),title:f.$t("lemon.sidebar.confirmDelete")},{footer:A(()=>[o(_e,{onClick:P},{default:A(()=>[se(h(f.$t("lemon.sidebar.cancel")),1)]),_:1}),o(_e,{type:"primary",onClick:T},{default:A(()=>[se(h(f.$t("lemon.sidebar.confirm")),1)]),_:1})]),default:A(()=>[e("p",null,h(f.$t("lemon.sidebar.deleteConfirmation")),1)]),_:1},8,["open","title"]),o(ve,{open:x.value,"onUpdate:open":_[4]||(_[4]=u=>x.value=u),title:"Edit Title",centered:"",width:400,footer:null,class:"edit-title-modal"},{default:A(()=>[_[10]||(_[10]=e("span",{class:"edit-title"},"Enter new title",-1)),o(we,{value:S.value,"onUpdate:value":_[3]||(_[3]=u=>S.value=u),class:"edit-title-input"},null,8,["value"]),e("footer",null,[e("div",{class:"footer-btn"},[e("div",{class:"cancel-btn",onClick:z},"Cancel"),e("div",{class:"confirm-btn",onClick:k},"Confirm")])])]),_:1},8,["open"]),o(ve,{open:F.value,"onUpdate:open":_[6]||(_[6]=u=>F.value=u),footer:null,centered:!0,closable:!1},{title:A(()=>[e("div",is,[e("div",rs,[o(d(me),{style:{width:"24px",height:"24px"}})]),o(we,{value:f.searchValue,"onUpdate:value":_[5]||(_[5]=u=>f.searchValue=u),placeholder:"Search conversations"},null,8,["value"]),e("div",{class:"search-header-icon",onClick:P},[o(d(Ae),{style:{width:"24px",height:"24px"}})])])]),default:A(()=>[e("div",cs,[(n(!0),i(X,null,le(C.chats,u=>{var ee;return n(),i("div",{key:u.conversation_id,class:W(["chat-item",{active:u.conversation_id===d(y)}]),onClick:te=>K(u)},[e("div",ds,[e("div",vs,[e("div",ps,h(u.title),1),e("div",hs,h(d(he)(u.update_at,d(E))),1)]),f.modal=="task"?(n(),i("div",ms,[e("div",{class:"chat-last-message",title:u.last_message},h((ee=u==null?void 0:u.latest_message)==null?void 0:ee.content),9,fs)])):D("",!0)])],10,us)}),128))])]),_:1},8,["open"])],2)),[[ie,!($.value&&U())]])}}},_s=G(gs,[["__scopeId","data-v-ed6e79b0"]]),ws={xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",class:"icon",viewBox:"0 0 1024 1024"};function ks(C,l){return n(),i("svg",ws,l[0]||(l[0]=[e("path",{d:"M512 619.4c-152.3 0-276.2-123.9-276.2-276.2S359.7 67 512 67s276.2 123.9 276.2 276.2S664.3 619.4 512 619.4m0-491c-118.4 0-214.8 96.4-214.8 214.8S393.6 558 512 558s214.8-96.4 214.8-214.8S630.4 128.4 512 128.4"},null,-1),e("path",{d:"M910.9 957h-61.4c0-186.1-151.4-337.6-337.6-337.6S174.4 770.8 174.4 957H113c.1-220 179-399 399-399s398.9 179 398.9 399"},null,-1)]))}const Cs={render:ks},bs={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor","aria-hidden":"true",class:"icon"};function Ms(C,l){return n(),i("svg",bs,l[0]||(l[0]=[e("path",{d:"M2.669 11.333V8.667c0-.922 0-1.655.048-2.244.048-.597.15-1.106.387-1.571l.155-.276a4 4 0 0 1 1.593-1.472l.177-.083c.418-.179.872-.263 1.395-.305.589-.048 1.32-.048 2.243-.048h.5a.665.665 0 0 1 0 1.33h-.5c-.944 0-1.613 0-2.135.043-.386.032-.66.085-.876.162l-.2.086a2.67 2.67 0 0 0-1.064.982l-.102.184c-.126.247-.206.562-.248 1.076-.043.523-.043 1.192-.043 2.136v2.666c0 .944 0 1.613.043 2.136.042.514.122.829.248 1.076l.102.184c.257.418.624.758 1.064.982l.2.086c.217.077.49.13.876.161.522.043 1.19.044 2.135.044h2.667c.944 0 1.612-.001 2.135-.044.514-.042.829-.121 1.076-.247l.184-.104c.418-.256.759-.623.983-1.062l.086-.2c.077-.217.13-.49.16-.876.043-.523.044-1.192.044-2.136v-.5a.665.665 0 0 1 1.33 0v.5c0 .922.001 1.655-.047 2.244-.043.522-.127.977-.306 1.395l-.083.176a4 4 0 0 1-1.471 1.593l-.276.154c-.466.238-.975.34-1.572.39-.59.047-1.321.047-2.243.047H8.667c-.923 0-1.654 0-2.243-.048-.523-.043-.977-.126-1.395-.305l-.177-.084a4 4 0 0 1-1.593-1.471l-.155-.276c-.237-.465-.339-.974-.387-1.57-.049-.59-.048-1.322-.048-2.245m10.796-8.22a2.43 2.43 0 0 1 3.255.167l.167.185c.727.892.727 2.18 0 3.071l-.168.185-5.046 5.048a4 4 0 0 1-1.945 1.072l-.317.058-1.817.26a.665.665 0 0 1-.752-.753l.26-1.816.058-.319a4 4 0 0 1 1.072-1.944L13.28 3.28zm2.314 1.108a1.103 1.103 0 0 0-1.476-.076l-.084.076-5.046 5.048a2.67 2.67 0 0 0-.716 1.296l-.04.212-.134.939.94-.134.211-.039a2.67 2.67 0 0 0 1.298-.716L15.78 5.78l.076-.084c.33-.404.33-.988 0-1.392z"},null,-1)]))}const $s={render:Ms},xs={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1024 1024"};function ys(C,l){return n(),i("svg",xs,l[0]||(l[0]=[e("path",{stroke:"currentColor",d:"M770.438 597.358a158 158 0 0 0 73.143 11.703v219.891a73.143 73.143 0 0 1-73.143 73.143H551.01V731.43h-73.143v170.666H258.438a73.143 73.143 0 0 1-73.143-73.143v-223.67a158.9 158.9 0 0 0 73.143 0v223.67h146.286V658.286h219.428v170.666h146.286zm-24.04-475.453a73.14 73.14 0 0 1 62.83 35.718l116.297 195.243-.317-.025a126.537 126.537 0 0 1-208.091 140.532A137.48 137.48 0 0 1 616.814 536.6a137.68 137.68 0 0 1-103.522-46.738A137.68 137.68 0 0 1 409.795 536.6a137.63 137.63 0 0 1-100.303-43.227 126.537 126.537 0 0 1-200.9-152.869l97.793-180.321a73.14 73.14 0 0 1 64.317-38.278h475.72zm0 73.143H270.702l-99.304 183.1-1.707 2.634a53.394 53.394 0 0 0 84.797 64.439l52.931-60.538 55.272 58.44c12.215 12.947 29.013 20.335 47.153 20.335 18.92 0 36.376-8.046 48.664-21.992l54.857-62.123 54.833 62.123c12.288 13.946 29.745 21.992 48.664 21.992 18.14 0 34.914-7.388 47.104-20.285l55.223-58.515 53.005 60.538a53.394 53.394 0 0 0 87.844-59.221l-.829-1.634-112.786-189.293z"},null,-1)]))}const Ss={render:ys},Is={class:"menu-panel"},As={class:"menu-top"},Ls={class:"menu-header"},Vs={class:"menu-actions"},Bs={class:"menu-bottom"},Hs={style:{display:"flex","align-items":"flex-end","justify-content":"space-between"}},zs={class:"user-info-bar"},Ds={class:"user-info-text"},Es={class:"user-name"},Us={class:"user-plan"},Ps={class:"profile-wrapper"},Ns={class:"footer-social"},Os={class:"second-menu"},Rs={__name:"index",setup(C){const l=re(),v=de(),B=ye(),{agent:L,mode:y}=oe(v),{user:w,membership:E}=oe(B),{t:m}=ge();let M=null;const g=async()=>{M=Ze({animate:!0,showProgress:!1,prevBtnText:m("setting.prevStep"),nextBtnText:m("setting.nextStep"),doneBtnText:m("setting.doneStep"),steps:[{element:".user-profile-container",popover:{side:"top",title:m("setting.settingModel"),description:m("setting.tourHoverDescription"),showButtons:["next"],nextBtnText:m("setting.tourUnderstood"),onNextClick:()=>{localStorage.setItem("tour_end","true"),l.push({path:"/setting/basic"}),M.destroy()}}}]}),M.drive()},I=()=>{x.value=!0,M&&M.isActive()&&M.destroy()},$=()=>{x.value=!1},U=p("task"),V=p(!1),a=p(!1),b=p([]),x=p(!1);async function F(){if(localStorage.getItem("tour_end")=="true"){localStorage.setItem("tour","false");return}let t=await Fe.checkModel();t.has_default_platform&&t.has_enabled_platform&&t.has_search_setting?localStorage.setItem("tour","false"):(localStorage.setItem("tour","true"),g())}const S=p(window.innerWidth<=768),O=()=>{const t=window.innerWidth<=768;S.value&&!t&&a.value&&(a.value=!1),S.value=t};ce(()=>{F(),U.value=localStorage.getItem("mode")||"task",window.addEventListener("resize",O),c.on("toggleMobileMenu",H)}),ue(()=>{window.removeEventListener("resize",O),c.off("toggleMobileMenu",H)});const j=ne(()=>!S.value||a.value);function q(t){Z(),U.value=t,y.value=t,console.log("changeMode",t),localStorage.getItem("mode")!==t&&(localStorage.setItem("mode",t),L.value={},v.conversationId=null),c.emit("close-collapse"),v.clearAgent(),S.value&&a.value&&(a.value=!1,c.emit("mobileMenuStateChange",!1)),l.push("/grace")}function Y(){S.value&&a.value&&(a.value=!1,c.emit("mobileMenuStateChange",!1)),window.open("https://app.lemonai.ai/store","_blank")}function J(){S.value&&(a.value=!1,c.emit("mobileMenuStateChange",!1))}function H(t){S.value&&(typeof t=="boolean"?a.value=t:a.value=!a.value,c.emit("mobileMenuStateChange",a.value))}function Z(){c.emit("preview-close",!1),c.emit("terminal-visible",!1),c.emit("fullPreviewVisible-close")}const Q=ne(()=>v.list),R=p({localVersion:"0.4.0",latestVersion:"0.4.0",isLatest:!0,updateUrl:"https://github.com/yu-mengyun/vue-admin-template",message:"the current version is the latest version"}),K=()=>{window.open("https://lemon-11.gitbook.io/lemonai/version-update","_blank")};return(t,s)=>{var z;const k=Se;return n(),i(X,null,[ae(e("div",{class:W(["left-menu",{"menu-visible":a.value}]),onClick:N(J,["self"])},[e("div",Is,[e("div",As,[e("div",Ls,[o(Xe)]),e("div",Vs,[e("div",{class:"menu-button",onClick:s[0]||(s[0]=r=>q("task"))},[o(d($s)),s[2]||(s[2]=e("span",{class:"truncate"},"New Agent",-1))]),e("div",{class:W(["menu-button store-button",{active:t.isStorePage}]),onClick:Y},[o(d(Ss)),s[3]||(s[3]=e("span",{class:"truncate"},"Agent Store",-1))],2)]),o(ft)]),e("div",Bs,[e("div",Hs,[e("div",{class:"user-profile-container",onMouseenter:I,onMouseleave:$},[e("div",zs,[o(d(Cs),{style:{height:"20px",width:"20px"}}),e("div",Ds,[e("span",Es,h(d(w).user_name||d(w).mobile||d(w).user_email),1),e("span",Us,h(((z=d(E))==null?void 0:z.planName)||t.$t("member.freePlan")),1)])]),ae(e("div",Ps,[o(St,{isCollapsed:t.isCollapsed,chats:b.value},null,8,["isCollapsed","chats"])],512),[[ie,x.value]])],32),e("div",{class:"version-text",onClick:K}," V "+h(R.value.localVersion),1)]),e("div",Ns,[o(k,{title:"Homepage"},{default:A(()=>s[4]||(s[4]=[e("a",{href:"https://www.lemonai.ai",target:"_blank",rel:"noopener noreferrer",class:"footer-social-link"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"footer-social-icon",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9,22 9,12 15,12 15,22"})])],-1)])),_:1}),o(k,{title:"Email"},{default:A(()=>s[5]||(s[5]=[e("a",{href:"mailto:hello@lemonai.ai",target:"_blank",rel:"noopener noreferrer",class:"footer-social-link"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"footer-social-icon",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})])],-1)])),_:1}),o(k,{title:"Discord"},{default:A(()=>s[6]||(s[6]=[e("a",{href:"https://discord.gg/gjEXg4UBR4",target:"_blank",rel:"noopener noreferrer",class:"footer-social-link"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"footer-social-icon",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0189 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})])],-1)])),_:1}),o(k,{title:"Documentation"},{default:A(()=>s[7]||(s[7]=[e("a",{href:"https://lemon-11.gitbook.io/lemonai",target:"_blank",rel:"noopener noreferrer",class:"footer-social-link"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"footer-social-icon",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})])],-1)])),_:1})])])])],2),[[ie,j.value]]),e("div",Os,[o(_s,{chats:Q.value},null,8,["chats"])]),o(Ie,{visible:V.value,"onUpdate:visible":s[1]||(s[1]=r=>V.value=r),id:""},null,8,["visible"])],64)}}},Ts=G(Rs,[["__scopeId","data-v-e9f10b36"]]),js={class:"lemon-content"},Ws={__name:"index",setup(C){fe();const l=de();p(!1);const v=p(!1),B=w=>{typeof w=="boolean"?v.value=w:v.value=!v.value},L=()=>{c.emit("toggleMobileMenu",!1)},y=async()=>{let w=localStorage.getItem("mode")||"task";await l.init(w)};return ce(()=>{y(),c.on("mobileMenuStateChange",B)}),ue(()=>{c.off("mobileMenuStateChange",B)}),(w,E)=>{const m=Ne("router-view");return n(),i("div",{class:W(["lemon-container",{"mobile-menu-open":v.value}])},[o(Ts),e("div",js,[v.value?(n(),i("div",{key:0,class:"mobile-overlay",onClick:L})):D("",!0),o(m)])],2)}}},so=G(Ws,[["__scopeId","data-v-1fd30527"]]);export{so as default};
