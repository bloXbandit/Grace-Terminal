import{l as x}from"./lemon-BOZR-6gf.js";import{C as b,a as H,P as I,_ as T}from"./fullPreview-SZvbgAQr.js";import{e as V}from"./emitter-E5P-NQ8u.js";import{p as $,r as _,c as m,a as M,u as N,o as R,d as l,l as t,e as a,j as q,q as D,t as i,i as h,w as f,B as L,h as o,k as v}from"./index-y24F1-rU.js";import{u as P}from"./edit-DybdI1Gg.js";import"./http-D7M9oJmQ.js";import"./index-CuH_tq0a.js";import"./marked.esm-BktMfnUh.js";import"./index-TjCxX7sJ.js";import"./auth-BN2fB74f.js";const j={class:"lemon-container"},A={class:"lemon-content"},E={class:"lemon-main"},z={class:"lemon-footer"},F={style:{display:"flex","align-items":"center"}},G={style:{color:"#34322d","font-size":".875rem","line-height":"1.25rem"}},J={key:0},K={key:1},O={__name:"index",setup(Q){const d=M(),s=P();_(!1);const g=m(()=>s.chat),y=m(()=>s.messages),u=m(()=>{var e;return(e=s.list.find(n=>n.conversation_id==d.params.id))==null?void 0:e.status}),{t:U}=N();let r;const k=async()=>{r=d.params.id,s.playback(r,500)},C=()=>{V.emit("fullPreviewVisable-close"),s.playback(r,500)},w=()=>{s.toResult()},c=_(!1);R(()=>{k();const e=document.querySelector(".chat-messages");if(!e)return!1;e.addEventListener("scroll",()=>{e.scrollHeight-e.scrollTop-e.clientHeight>200?c.value=!0:c.value=!1})});const B=()=>{const e=document.querySelector(".chat-messages");if(!e)return!1;e.scrollTop=e.scrollHeight-e.clientHeight};return(e,n)=>{const S=D("Down"),p=L;return o(),l("div",j,[t("div",A,[t("div",E,[a(b,{title:g.value.title},null,8,["title"]),a(H,{messages:y.value},null,8,["messages"]),c.value?(o(),l("div",{key:0,class:"scroll-to-bottom",onClick:B},[a(S)])):q("",!0),t("div",z,[t("div",F,[n[0]||(n[0]=t("div",null,[t("img",{style:{width:"20px",height:"20px","margin-right":"5px"},src:x,alt:""})],-1)),t("span",G,[u.value!="running"?(o(),l("div",J,"LemonAI"+i(e.$t("task_finished")),1)):(o(),l("div",K,"LemonAI"+i(e.$t("task_playing"))+"...",1))])]),t("div",null,[u.value!="running"?(o(),h(p,{key:0,type:"primary",onClick:C},{default:f(()=>[v(i(e.$t("replay")),1)]),_:1})):(o(),h(p,{key:1,type:"primary",onClick:w},{default:f(()=>[v(i(e.$t("jump_to_result")),1)]),_:1}))])])]),a(I,{class:"preview"}),a(T,{class:"preview"})])])}}},le=$(O,[["__scopeId","data-v-e5ac87c7"]]);export{le as default};
