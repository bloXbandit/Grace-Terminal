import{e as C,I as qe,p as Ge,u as He,a2 as We,a3 as je,r as f,c as M,o as Ye,a7 as Qe,d as w,h as g,l as i,j as F,t as s,a8 as Je,v as $,w as T,k as K,B as Xe,F as ie,D as he,a6 as Ze,a1 as oe,i as ue,f as d,g as Ke,a9 as et,s as _}from"./index-y24F1-rU.js";import{s as h}from"./membership-GkEFab9j.js";import{S as tt,W as at}from"./wechatpay-CgvKqgmN.js";import{s as nt}from"./auth-BN2fB74f.js";var rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};function we(D){for(var S=1;S<arguments.length;S++){var a=arguments[S]!=null?Object(arguments[S]):{},I=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(I=I.concat(Object.getOwnPropertySymbols(a).filter(function(A){return Object.getOwnPropertyDescriptor(a,A).enumerable}))),I.forEach(function(A){lt(D,A,a[A])})}return D}function lt(D,S,a){return S in D?Object.defineProperty(D,S,{value:a,enumerable:!0,configurable:!0,writable:!0}):D[S]=a,D}var ce=function(S,a){var I=we({},S,a.attrs);return C(qe,we({},I,{icon:rt}),null)};ce.displayName="GiftOutlined";ce.inheritAttrs=!1;const st={class:"pricing-page"},it={class:"header"},ot={key:0,class:"title"},ut={class:"billing-toggle"},ct={key:0,class:"downgrade-notice"},dt={class:"downgrade-notice-content"},mt={class:"downgrade-text"},pt={class:"pricing-cards"},vt={key:0,class:"pricing-cards-container"},ft={class:"pricing-card"},gt={class:"info"},bt={class:"plan-name"},yt={key:0,class:"price"},_t={key:1,class:"price"},ht={style:{display:"flex","flex-direction":"column"}},wt={key:0,class:"save-text"},Pt={key:0,class:"monthly-equivalent"},kt={key:2,class:"benefits-list"},St={class:"benefit-item-icon"},Ct={class:"benefit-item-title"},Dt={class:"qr-code-container"},Mt={style:{display:"flex","flex-direction":"column",gap:"16px",padding:"12px 4px"}},$t={class:"payment-content"},Ot={class:"payment-title"},Ft={class:"payment-description"},Ut={class:"payment-content"},Nt={class:"payment-title"},Tt={class:"payment-description"},It={class:"cancel-btn"},xt={key:0},Bt={key:0,class:"upgrade-preview-content"},Et={class:"upgrade-info"},Rt={class:"upgrade-details"},At={class:"upgrade-row"},zt={class:"upgrade-row"},Vt={class:"pricing-info"},Lt={class:"pricing-details"},qt={class:"pricing-row"},Gt={class:"amount"},Ht={__name:"pricing",props:{isWindow:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},emits:["close_window"],setup(D,{emit:S}){const{t:a}=He(),I=Ke(),A=We(),{membership:u,points:Pe}=je(A),P=f(!1),ae=f(!1),de=f(!0),G=f((()=>{var e;return(e=u.value)!=null&&e.durationDays?u.value.durationDays===365?"year":"month":"year"})()),ke=[{label:()=>_("div",[_("span",a("member.billingMonthly"))]),value:"month"},{label:()=>_("div",{style:"display: flex; align-items: center; gap: 4px;"},[_("span",a("member.billingYearly")),_("span",{style:"color: #0081f2; font-size: 13px; font-weight: 500;"},"Save 16%")]),value:"year"}],H=f([]),p=f({}),W=f(!1),ne=f(""),j=f(!1),Y=f(null),U=f(null),z=M(()=>"$"),Q=f(!1),J=f(!1),V=f(null),k=f(!1),b=f(null),y=f(null),me=D,pe=S,Se=()=>{Q.value=!0},Ce=async()=>{var t,r,n;console.log("Subscription canceled",u.value.subscription_id);let e=u.value.subscription_id;if(e||(e=((n=(r=(t=(await h.getSubscriptionInfo()).subscription)==null?void 0:t.data)==null?void 0:r[0])==null?void 0:n.id)??null),e){let o=await h.cancelSubscription({subscription_id:e});console.log("=== cancel_res === ",o),await x(),await E()}},N=f(null),x=async()=>{var t,r;let e=await h.getSubscriptionInfo();return N.value=((r=(t=e.subscription)==null?void 0:t.data)==null?void 0:r[0])??null,e},ve=M(()=>{var e;return(e=N.value)==null?void 0:e.cancel_at_period_end}),X=M(()=>{var e,t;return((t=(e=N.value)==null?void 0:e.metadata)==null?void 0:t.action)==="downgrade"}),re=M(()=>ve.value&&!X.value),De=M(()=>{var e,t;return!X.value||!((t=(e=N.value)==null?void 0:e.metadata)!=null&&t.target_plan_name)?null:N.value.metadata.target_plan_name}),fe=M(()=>{var r,n,o,c;const e=(c=(o=(n=(r=N.value)==null?void 0:r.items)==null?void 0:n.data)==null?void 0:o[0])==null?void 0:c.current_period_end;return e?new Date(e*1e3).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):""}),Me=M(()=>{const e={};return L.value.forEach(t=>{var n;if(!!((n=u.value)!=null&&n.planName)&&t.plan_name==="Free"){e[t.id]=a("member.unavailable");return}if(be(t))t.plan_name==="Free"?e[t.id]=a("member.unavailable"):e[t.id]=re.value?a("member.reactivatePlan"):a("member.alreadyCurrentMember");else if(t.plan_name==="Free")e[t.id]=a("member.alreadyCurrentMember");else{let o=t.plan_name;t.duration_days===365?o=o+" "+a("member.year"):o=o+" "+a("member.month");const c=le(t);c==="upgrade"?e[t.id]=a("member.upgradeTo")+" "+o:c==="downgrade"?e[t.id]=a("member.downgradeTo")+" "+o:e[t.id]=a("member.upgradeTo")+" "+o}}),e});function $e(e){return Me.value[e.id]}const le=e=>{const t=u.value;if(!t)return null;const r={Pro:1,Business:2};return r[t.planName],r[e.plan_name],console.log("plan monthly_points",e.monthly_points),console.log("current monthlyPoints",t.monthlyPoints),console.log("plan duration_days",e.duration_days),console.log("current durationDays",t.durationDays),e.duration_days>=t.durationDays&&e.monthly_points>=t.monthlyPoints?"upgrade":e.duration_days<=t.durationDays&&e.monthly_points<=t.monthlyPoints?"downgrade":e.duration_days>t.durationDays?"upgrade":"none"},Oe=M(()=>{const e={};return L.value.forEach(t=>{t.plan_name==="Free"?e[t.id]=!0:be(t)?e[t.id]=!re.value:e[t.id]=!1}),e}),Fe=e=>Oe.value[e.id],Ue=async()=>{P.value=!0;try{await Ce(),Q.value=!1,d.success(a("member.cancelMembershipSuccess"))}finally{P.value=!1}},Ne=async()=>{if(V.value){P.value=!0;try{ee()==="stripe"?(await h.downgradeSubscription({subscription_id:u.value.subscription_id,new_price_id:V.value.stripe_price_id}),d.success(a("member.downgradeScheduledSuccess")),await x(),await E()):d.info(a("member.downgradeNotSupported")),J.value=!1,V.value=null}catch(e){console.error("降级失败:",e),d.error(a("member.downgradeFailed"))}finally{P.value=!1}}},Te=async()=>{ae.value=!0;try{await h.cancelDowngrade({subscription_id:N.value.id}),d.success(a("member.cancelDowngradeSuccess")),await x(),await E()}catch(e){console.error("取消降级失败:",e),d.error(a("member.cancelDowngradeFailed"))}finally{ae.value=!1}},se=e=>{if(e.plan_name==="Pro")return 38;if(e.plan_name==="Business")return 189},ge=e=>e.plan_name==="Pro"?16:e.plan_name==="Business"?83:0;Ye(()=>{x()});const be=e=>{var t,r;return((t=u.value)==null?void 0:t.planName)===e.plan_name&&((r=u.value)==null?void 0:r.durationDays)===e.duration_days},L=M(()=>H.value.filter(e=>G.value==="year"?e.duration_days===365:e.duration_days===30)),Ie=M(()=>({Free:[{title:a("member.benefits.free.newUserCredits"),iconType:"GiftOutlined"},{title:a("member.benefits.free.dailyCredits")},{title:a("member.benefits.free.publicAgentsOnly")},{title:a("member.benefits.free.systemExperienceInvisible")},{title:a("member.benefits.free.limitedChat")},{title:a("member.benefits.free.limitedAgent")}],Pro:[{title:a("member.benefits.pro.monthlyCredits"),iconType:"GiftOutlined"},{title:a("member.benefits.pro.dailyCredits")},{title:a("member.benefits.pro.privateAgents")},{title:a("member.benefits.pro.systemExperienceEditable")},{title:a("member.benefits.pro.unlimitedChat")},{title:a("member.benefits.pro.unlimitedAgent")}],Business:[{title:a("member.benefits.business.monthlyCredits"),iconType:"GiftOutlined"},{title:a("member.benefits.business.dailyCredits")},{title:a("member.benefits.business.privateAgents")},{title:a("member.benefits.business.systemExperienceEdit")},{title:a("member.benefits.business.unlimitedChat")},{title:a("member.benefits.business.unlimitedAgent")},{title:a("member.benefits.business.earlyAccess")},{title:a("member.benefits.business.customDomains")},{title:a("member.benefits.business.teamShare")}]}));(async()=>{try{const e=await h.getList();e.unshift({id:0,plan_name:"Free",price:0,duration_days:30},{id:1,plan_name:"Free",price:0,duration_days:365}),e.forEach(t=>{t.benefits=Ie.value[t.plan_name]||[]}),H.value=e,L.value.forEach(t=>{t.duration_days==30?B.value[t.id]=Number(t.price):B.value[t.id]=Number(ge(t))})}catch{d.error(a("member.loadPlansFailed"))}})();const B=f({}),q={};function Z(e){return Number(e).toFixed(2)}function xe(e,t){const r=H.value.find(n=>n.plan_name===e&&n.duration_days===t);return r?Number(r.price):0}function Be(){if(!u.value)return 0;const e=H.value.find(t=>t.plan_name===u.value.planName&&t.duration_days===u.value.durationDays);return e?Number(e.price):0}function Ee(e,t,r,n=300){q[e]&&(clearInterval(q[e]),q[e]=null);const o=30,c=Math.round(n/(1e3/o));let m=0;const l=r-t;q[e]=setInterval(()=>{m++,m>=c?(B.value[e]=r,clearInterval(q[e]),q[e]=null):B.value[e]=t+l*m/c},1e3/o)}Qe(G,(e,t)=>{if(!H.value.length)return;const r=t==="year"?365:30;L.value.forEach(n=>{const o=n.id;let c=Number(n.price);n.duration_days==365&&(c=Number(ge(n)));const m=xe(n.plan_name,r);B.value[o]=m,Ee(o,m,c)})});const Re=async e=>{var t,r,n,o,c;if(X.value&&le(e)==="downgrade"){d.info(a("member.cancelPleaseFirst"));return}if(re.value&&((t=u.value)==null?void 0:t.planName)===e.plan_name&&((r=u.value)==null?void 0:r.durationDays)===e.duration_days){p.value={...p.value,[e.id]:!0},await h.reactivateSubscription({subscription_id:N.value.id}),d.success(a("member.reactivateSuccess")),p.value={...p.value,[e.id]:!1},x(),await E();return}if(console.log("membership.value?.planName",(n=u.value)==null?void 0:n.planName),(o=u.value)!=null&&o.planName){const m=le(e);if(console.log("upgradeOrDowngrade",m),m==="upgrade"){if(!de.value&&((c=u.value)!=null&&c.planName)&&u.value.planName!=="Free"){d.info(a("member.platformNotSupported"));return}if(ee()==="stripe")try{p.value={...p.value,[e.id]:!0};const v=await h.previewUpgrade({current_plan_id:u.value.planId,new_plan_id:e.id});y.value=v,b.value=e,k.value=!0,p.value={...p.value,[e.id]:!1};return}catch{d.error(a("member.upgradePreviewFailed")),p.value={...p.value,[e.id]:!1};return}else try{p.value={...p.value,[e.id]:!0};const v=await h.previewUpgrade({current_plan_id:u.value.planId,new_plan_id:e.id});y.value=v,b.value=e,k.value=!0,p.value={...p.value,[e.id]:!1};return}catch{d.error(a("member.upgradePreviewFailed")),p.value={...p.value,[e.id]:!1};return}}else if(m==="none"){d.error(a("member.switchNotSupported"));return}else if(m===null){Y.value=e,j.value=!0;return}else if(m==="downgrade"){if(!de.value){d.info(a("member.platformNotSupported"));return}if(ee()==="wechat"){d.info(a("member.wechatDowngradeNotSupported"));return}V.value=e,J.value=!0;return}}Y.value=e,j.value=!0},ee=()=>{var e;return(e=u.value)!=null&&e.subscription_id?"stripe":"wechat"},Ae=async()=>{var t,r,n,o,c;if(!b.value||!y.value)return;P.value=!0;let e=null;try{if(ee()==="stripe"){const l=Math.round(parseFloat(y.value.upgrade_price)*100);if(e=await h.upgradeSubscription({subscription_id:u.value.subscription_id,new_price_id:b.value.stripe_price_id,custom_amount:l}),console.log("=== upgradeResult === ",e),((t=e.data)==null?void 0:t.payment_failed)===!0||((r=e.data)==null?void 0:r.success)===!1){let v=((n=e.data)==null?void 0:n.message)||a("member.upgradeFailed"),O=[];const R=[_("p",{style:"margin-bottom: 16px; color: #ff4d4f; font-weight: 500;"},v)];O.length>0&&R.push(_("div",{style:"margin-top: 16px;"},[_("p",{style:"margin-bottom: 8px; font-weight: 500; color: #1890ff;"},a("member.whatYouCanDo")),_("ul",{style:"margin: 0; padding-left: 20px; color: #666;"},O.map(te=>_("li",{style:"margin-bottom: 4px; line-height: 1.4;"},te)))])),oe.error({title:a("member.upgradePaymentFailed"),width:480,content:_("div",R),okText:a("member.iUnderstand"),okType:"primary"}),k.value=!1,b.value=null,y.value=null;return}(o=e==null?void 0:e.order)!=null&&o.order_sn?(d.info(a("member.processingUpgrade")),Ve(e.order.order_sn)):(d.success(a("member.upgradeSuccessful")),await new Promise(v=>setTimeout(v,2e3)),await x(),await E(),k.value=!1,b.value=null,y.value=null)}else{const l=await h.createMembershipUpgradeOrder({current_plan_id:u.value.planId,new_plan_id:b.value.id});ne.value=l.code_url,W.value=!0,_e(l.order_sn),k.value=!1,b.value=null,y.value=null}}catch(m){console.error("升级失败:",m),d.error(a("member.upgradeFailed")),k.value=!1,b.value=null,y.value=null}finally{(c=e==null?void 0:e.order)!=null&&c.order_sn||(P.value=!1)}},ze=()=>{k.value=!1,b.value=null,y.value=null},ye=async(e,t)=>{console.log("=== method === ",e,t),p.value={...p.value,[t]:!0};const r=Y.value;j.value=!1;try{if(e==="stripe"){const n=await h.createStripeOrder(r.id);n!=null&&n.url&&(window.location.href=n.url)}else if(e==="wechat"){const n=await h.createOrder(r.id);ne.value=n.code_url,W.value=!0,_e(n.order_sn)}}catch(n){console.error("paymentFailed",n),d.error(a("member.paymentFailed"))}finally{p.value={...p.value,[t]:!1}}},_e=async e=>{let r=0;U.value=setInterval(async()=>{r++;const n=await h.checkOrderStatus(e);(n==null?void 0:n.status)==="paid"&&(clearInterval(U.value),W.value=!1,d.success(a("member.paySuccess")),await E(),me.isWindow?pe("close_window"):I.push("/pricing")),r>=20&&clearInterval(U.value)},3e3)},Ve=async e=>{let r=0;P.value=!0,U.value=setInterval(async()=>{r++;try{const n=await h.checkOrderStatus(e);console.log(`=== 轮询订单状态 (第${r}次) ===`),console.log("订单状态:",n==null?void 0:n.status),(n==null?void 0:n.status)==="paid"?(clearInterval(U.value),P.value=!1,k.value=!1,b.value=null,y.value=null,d.success(a("member.upgradeSuccessful")),await x(),await E(),me.isWindow&&pe("close_window")):(n==null?void 0:n.status)==="failed"?(console.log("=== 检测到订单失败 ==="),clearInterval(U.value),P.value=!1,k.value=!1,b.value=null,y.value=null,console.log("准备调用 handleUpgradeFailure"),await Le(),console.log("handleUpgradeFailure 调用完成")):r>=20&&(clearInterval(U.value),P.value=!1,d.warning(a("member.upgradeTimeoutWarning")),k.value=!1,b.value=null,y.value=null)}catch(n){console.error("检查升级订单状态失败:",n),r>=20&&(clearInterval(U.value),P.value=!1,k.value=!1,b.value=null,y.value=null,d.error(a("member.upgradeStatusCheckFailed")))}},3e3)},Le=async()=>{var e;try{const t=(e=u.value)==null?void 0:e.subscription_id;if(console.log("=== handleUpgradeFailure 调试信息 ==="),console.log("subscriptionId:",t),!t){console.log("没有找到 subscriptionId"),d.error(a("member.getSubscriptionFailed"));return}console.log("正在查询支付失败原因...");const r=await h.getPaymentFailureReason(t);console.log("支付失败原因查询结果:",r),console.log("failureResult.success:",r.success),console.log("failureResult.data:",r.data);const n=r.success?r.data:r;if(n&&(n.failure_reason||n.failure_code||n.failure_message)){let o=a("member.upgradeFailed"),c=[];n.failure_code==="insufficient_funds"?o=a("member.insufficientFunds"):n.failure_code==="card_declined"?o=a("member.cardDeclined"):n.failure_code==="authentication_required"?o=a("member.authenticationRequired"):n.failure_code==="expired_card"?o=a("member.expiredCard"):n.failure_code==="no_payment_method_or_failed"?(o=n.failure_message||a("member.paymentMethodIssue"),c=n.suggestions||[]):n.failure_code==="invoice_open"?(o=n.failure_message||a("member.invoiceUnpaid"),c=n.suggestions||[]):n.failure_message&&(o=n.failure_message,c=n.suggestions||[]);const m=[_("p",{style:"margin-bottom: 16px; color: #ff4d4f; font-weight: 500;"},o)];c.length>0&&m.push(_("div",{style:"margin-top: 16px;"},[_("p",{style:"margin-bottom: 8px; font-weight: 500; color: #1890ff;"},a("member.whatYouCanDo")),_("ul",{style:"margin: 0; padding-left: 20px; color: #666;"},c.map(l=>_("li",{style:"margin-bottom: 4px; line-height: 1.4;"},l)))])),console.log("准备显示 Modal 弹窗"),console.log("errorMessage:",o),console.log("suggestions:",c),console.log("failure_code:",n.failure_code),oe.error({title:a("member.upgradePaymentFailed"),width:480,content:_("div",m),okText:a("member.iUnderstand"),okType:"primary"}),console.log("Modal.error 已调用")}else d.error(a("member.contactSupport"))}catch(t){console.error("查询升级失败原因出错:",t),d.error("Upgrade failed. Please try again or contact support.")}};async function E(){let e=await nt.getUserInfo();u.value=e.membership,Pe.value=e.points}return(e,t)=>{var m;const r=Je,n=Xe,o=Ze,c=oe;return g(),w(ie,null,[i("div",st,[i("div",it,[D.showTitle==!0?(g(),w("h1",ot,s(e.$t("member.pricing")),1)):F("",!0),i("div",ut,[C(r,{value:G.value,"onUpdate:value":t[0]||(t[0]=l=>G.value=l),options:ke,size:"large"},null,8,["value"])])]),X.value?(g(),w("div",ct,[i("div",dt,[i("span",mt,s(e.$t("member.downgradeNotice").replace("{planName}",(m=$(u))==null?void 0:m.planName).replace("{targetPlan}",De.value).replace("{date}",fe.value)),1),C(n,{type:"primary",onClick:Te,loading:ae.value},{default:T(()=>[K(s(e.$t("member.cancelDowngrade")),1)]),_:1},8,["loading"])])])):F("",!0),i("div",pt,[L.value.length?(g(),w("div",vt,[(g(!0),w(ie,null,he(L.value,l=>{var v;return g(),w("div",{key:l.id},[i("div",ft,[i("div",gt,[i("h3",bt,s(l.plan_name),1),G.value==="month"?(g(),w("div",yt,s(z.value)+s(Z(B.value[l.id]??l.price))+" "+s(e.$t("member.monthlyBilling")),1)):(g(),w("div",_t,[i("div",ht,[i("span",null,s(z.value)+s(Z(B.value[l.id]))+" "+s(e.$t("member.monthlyBilling")),1),se(l)>0?(g(),w("span",wt,s(e.$t("member.save"))+" "+s(z.value)+s(se(l)),1)):F("",!0)]),se(l)>0?(g(),w("div",Pt,s(z.value)+s(l.price)+" "+s(e.$t("member.yearlyBilling")),1)):F("",!0)])),(v=l.benefits)!=null&&v.length?(g(),w("div",kt,[(g(!0),w(ie,null,he(l.benefits,(O,R)=>(g(),w("div",{key:R,class:"benefit-item"},[i("div",St,[O.iconType=="GiftOutlined"?(g(),ue($(ce),{key:0})):(g(),ue($(et),{key:1}))]),i("div",Ct,s(O.title),1)]))),128))])):F("",!0)]),C(n,{loading:p.value[l.id],class:"subscribe-btn",size:"large",disabled:Fe(l),block:"",onClick:O=>Re(l)},{default:T(()=>[K(s($e(l)),1)]),_:2},1032,["loading","disabled","onClick"])])])}),128))])):F("",!0)])]),C(c,{open:W.value,"onUpdate:open":t[1]||(t[1]=l=>W.value=l),centered:"",footer:null},{default:T(()=>[i("div",Dt,[C(o,{value:ne.value,size:200},null,8,["value"]),i("p",null,s(e.$t("member.qrTip")),1)])]),_:1},8,["open"]),C(c,{open:j.value,"onUpdate:open":t[4]||(t[4]=l=>j.value=l),footer:null,centered:"",width:"480px",title:e.$t("member.selectPaymentMethod")},{default:T(()=>[i("div",Mt,[i("div",{class:"payment-option",onClick:t[2]||(t[2]=l=>{var v;return ye("stripe",(v=Y.value)==null?void 0:v.id)})},[C($(tt)),i("div",$t,[i("div",Ot,s(e.$t("payment.stripe.title")),1),i("div",Ft,s(e.$t("payment.stripe.description")),1)])]),i("div",{class:"payment-option",onClick:t[3]||(t[3]=l=>{var v;return ye("wechat",(v=Y.value)==null?void 0:v.id)})},[C($(at)),i("div",Ut,[i("div",Nt,s(e.$t("payment.wechat.title")),1),i("div",Tt,s(e.$t("payment.wechat.description")),1)])])])]),_:1},8,["open","title"]),i("div",It,[$(u)&&$(u).subscription_id&&!X.value&&!ve.value?(g(),ue(n,{key:0,type:"text",onClick:Se},{default:T(()=>[K(s(e.$t("member.cancelMembership")),1)]),_:1})):F("",!0)]),C(c,{open:Q.value,"onUpdate:open":t[5]||(t[5]=l=>Q.value=l),title:e.$t("member.confirmCancelTitle"),onOk:Ue,onCancel:t[6]||(t[6]=l=>Q.value=!1),"ok-button-props":{loading:P.value},"ok-text":e.$t("member.confirm"),"cancel-text":e.$t("member.cancel")},{default:T(()=>[i("p",null,s(e.$t("member.confirmCancelMessage")),1)]),_:1},8,["open","title","ok-button-props","ok-text","cancel-text"]),C(c,{open:J.value,"onUpdate:open":t[7]||(t[7]=l=>J.value=l),title:e.$t("member.confirmDowngrade"),onOk:Ne,onCancel:t[8]||(t[8]=l=>J.value=!1),"ok-button-props":{loading:P.value},"ok-text":e.$t("member.confirmDowngrade"),"cancel-text":e.$t("member.cancel")},{default:T(()=>{var l;return[V.value?(g(),w("p",xt,[K(s(e.$t("member.confirmDowngradeMessage"))+" "+s((l=$(u))==null?void 0:l.planName)+" "+s(e.$t("member.to"))+" "+s(V.value.plan_name)+"? ",1),t[10]||(t[10]=i("br",null,null,-1)),t[11]||(t[11]=i("br",null,null,-1)),K(" "+s(e.$t("member.effectAtPeriodEnd"))+" ("+s(fe.value)+"). ",1)])):F("",!0)]}),_:1},8,["open","title","ok-button-props","ok-text","cancel-text"]),C(c,{open:k.value,"onUpdate:open":t[9]||(t[9]=l=>k.value=l),title:e.$t("member.upgradePreviewTitle"),width:"520px",centered:"",onOk:Ae,onCancel:ze,"ok-button-props":{loading:P.value},"ok-text":e.$t("member.confirmUpgrade"),"cancel-text":e.$t("member.cancel")},{default:T(()=>{var l,v,O,R,te;return[y.value?(g(),w("div",Bt,[i("div",Et,[i("h4",null,s(e.$t("member.upgradeSummary")),1),i("div",Rt,[i("div",At,[i("span",null,s(e.$t("member.from")),1),i("strong",null,s((l=$(u))==null?void 0:l.planName)+" - "+s(z.value)+s(Z(Be()))+"/"+s(((v=$(u))==null?void 0:v.durationDays)===365?e.$t("member.year"):e.$t("member.month")),1)]),i("div",zt,[i("span",null,s(e.$t("member.to")),1),i("strong",null,s((O=b.value)==null?void 0:O.plan_name)+" - "+s(z.value)+s(Z((R=b.value)==null?void 0:R.price))+"/"+s(((te=b.value)==null?void 0:te.duration_days)===365?e.$t("member.year"):e.$t("member.month")),1)])])]),i("div",Vt,[i("h4",null,s(e.$t("member.paymentRequired")),1),i("div",Lt,[i("div",qt,[i("span",null,s(e.$t("member.upgradePrice")),1),i("span",Gt,s(y.value.currency==="USD"?"$":y.value.currency)+s(Z(y.value.upgrade_price)),1)])])])])):F("",!0)]}),_:1},8,["open","title","ok-button-props","ok-text","cancel-text"])],64)}}},Zt=Ge(Ht,[["__scopeId","data-v-e38a0fdb"]]);export{Zt as P};
