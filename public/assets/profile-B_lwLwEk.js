import{p as B,r as g,o as P,d as u,l as t,H as a,J as i,K as $,M as V,j as F,F as G,D as C,h as p,t as v}from"./index-y24F1-rU.js";import{h as m}from"./http-D7M9oJmQ.js";const L={class:"profile-settings"},h={class:"settings-content"},D={class:"settings-section"},U={class:"form-group"},W={class:"form-group"},I={class:"form-group"},A={class:"settings-section"},E={class:"form-group"},M={class:"form-group"},N={class:"form-group"},j={class:"settings-section"},H={class:"learned-items"},O={key:0,class:"no-learned"},R={class:"learned-key"},T={class:"learned-value"},K={class:"learned-meta"},Y={class:"confidence"},z={class:"source"},J={__name:"profile",setup(q){const n=g({name:"",profession:"",expertise_level:"",interests:"",goals:"",location:""}),y=g({}),d=g([]),b=()=>{window.addEventListener("profile-learned",o=>{const{key:e,value:s}=o.detail;n.value.hasOwnProperty(e)&&(n.value[e]=s),f()})},f=async()=>{try{const o=await m.get("/api/users/profile");o.data&&o.data.success&&(o.data.profile.forEach(e=>{n.value.hasOwnProperty(e.key)&&(n.value[e.key]=e.value)}),d.value=o.data.profile.filter(e=>e.source&&e.source.startsWith("conversation")))}catch(o){console.error("Failed to load profile:",o)}},l=async o=>{var s;const e=n.value[o];if(!(!e||e.trim()==="")){if(y.value[o]===e){console.log(`[Profile] No change detected for ${o}, skipping save`);return}try{const r=await m.post("/api/users/profile",{key:o,value:e.trim(),confidence:1,source:"settings"});if(r.data&&r.data.success){console.log(`[Profile] Saved ${o}: ${e.trim()}`);const c=await m.get("/api/users/profile");c.data&&c.data.success&&(d.value=c.data.profile.filter(x=>x.source&&x.source.startsWith("conversation")))}else console.error("Failed to save field:",(s=r.data)==null?void 0:s.message)}catch(r){console.error("Failed to save field:",r)}}},w=async()=>{let o=0;for(const[e,s]of Object.entries(n.value))s&&s.trim()!==""&&(await l(e),o++);o>0&&alert(`âœ… Profile saved! ${o} fields updated.`)},S=o=>o.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),k=o=>o==="settings"?"You entered this":o.startsWith("conversation")?"Grace learned this":o;return P(()=>{f(),b()}),(o,e)=>(p(),u("div",L,[e[29]||(e[29]=t("div",{class:"settings-header"},[t("h1",null,"ðŸ‘¤ Your Profile"),t("p",null,"Help Grace understand you better")],-1)),t("div",h,[t("div",D,[e[20]||(e[20]=t("h2",null,"Basic Information",-1)),t("div",U,[e[13]||(e[13]=t("label",{for:"name"},"Preferred Name *",-1)),a(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>n.value.name=s),type:"text",placeholder:"What should Grace call you?",onBlur:e[1]||(e[1]=s=>l("name")),onFocus:e[2]||(e[2]=s=>y.value.name=n.value.name)},null,544),[[i,n.value.name]]),e[14]||(e[14]=t("span",{class:"field-hint"},"This is how Grace will address you",-1))]),t("div",W,[e[15]||(e[15]=t("label",{for:"profession"},"Profession *",-1)),a(t("input",{id:"profession","onUpdate:modelValue":e[3]||(e[3]=s=>n.value.profession=s),type:"text",placeholder:"e.g., Software Developer, Designer, Student",onBlur:e[4]||(e[4]=s=>l("profession"))},null,544),[[i,n.value.profession]]),e[16]||(e[16]=t("span",{class:"field-hint"},"Helps Grace tailor technical explanations",-1))]),t("div",I,[e[18]||(e[18]=t("label",{for:"expertise_level"},"Expertise Level *",-1)),a(t("select",{id:"expertise_level","onUpdate:modelValue":e[5]||(e[5]=s=>n.value.expertise_level=s),onChange:e[6]||(e[6]=s=>l("expertise_level"))},e[17]||(e[17]=[V('<option value="" data-v-0e652081>Select level...</option><option value="beginner" data-v-0e652081>Beginner</option><option value="intermediate" data-v-0e652081>Intermediate</option><option value="advanced" data-v-0e652081>Advanced</option><option value="expert" data-v-0e652081>Expert</option>',5)]),544),[[$,n.value.expertise_level]]),e[19]||(e[19]=t("span",{class:"field-hint"},"How Grace adjusts complexity",-1))])]),t("div",A,[e[27]||(e[27]=t("h2",null,"Optional Information",-1)),t("div",E,[e[21]||(e[21]=t("label",{for:"interests"},"Interests",-1)),a(t("textarea",{id:"interests","onUpdate:modelValue":e[7]||(e[7]=s=>n.value.interests=s),placeholder:"e.g., AI, Web Development, Design, Startups",rows:"3",onBlur:e[8]||(e[8]=s=>l("interests"))},null,544),[[i,n.value.interests]]),e[22]||(e[22]=t("span",{class:"field-hint"},"Topics you're passionate about",-1))]),t("div",M,[e[23]||(e[23]=t("label",{for:"goals"},"Current Goals",-1)),a(t("textarea",{id:"goals","onUpdate:modelValue":e[9]||(e[9]=s=>n.value.goals=s),placeholder:"e.g., Build a SaaS product, Learn React, Launch a startup",rows:"3",onBlur:e[10]||(e[10]=s=>l("goals"))},null,544),[[i,n.value.goals]]),e[24]||(e[24]=t("span",{class:"field-hint"},"What you're working towards",-1))]),t("div",N,[e[25]||(e[25]=t("label",{for:"location"},"Location",-1)),a(t("input",{id:"location","onUpdate:modelValue":e[11]||(e[11]=s=>n.value.location=s),type:"text",placeholder:"e.g., San Francisco, Remote",onBlur:e[12]||(e[12]=s=>l("location"))},null,544),[[i,n.value.location]]),e[26]||(e[26]=t("span",{class:"field-hint"},"For time zone context",-1))])]),t("div",j,[e[28]||(e[28]=t("h2",null,"What Grace Learned",-1)),t("div",H,[d.value.length===0?(p(),u("div",O," Grace hasn't learned anything about you yet. Start chatting! ")):F("",!0),(p(!0),u(G,null,C(d.value,s=>(p(),u("div",{key:s.key,class:"learned-item"},[t("div",R,v(S(s.key)),1),t("div",T,v(s.value),1),t("div",K,[t("span",Y,v(Math.round(s.confidence*100))+"% confident",1),t("span",z,v(k(s.source)),1)])]))),128))])]),t("div",{class:"settings-actions"},[t("button",{onClick:w,class:"btn-primary"}," ðŸ’¾ Save All Changes "),t("button",{onClick:f,class:"btn-secondary"}," ðŸ”„ Refresh ")])])]))}},Z=B(J,[["__scopeId","data-v-0e652081"]]);export{Z as default};
